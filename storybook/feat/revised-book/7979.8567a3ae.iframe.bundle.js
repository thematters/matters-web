/*! For license information please see 7979.8567a3ae.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkmatters_web=self.webpackChunkmatters_web||[]).push([[7979],{"./node_modules/@stablelib/ed25519/lib/ed25519.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.Xx=exports._w=exports.aP=exports.KS=exports.jQ=void 0;const random_1=__webpack_require__("./node_modules/@stablelib/random/lib/random.js"),sha512_1=__webpack_require__("./node_modules/@stablelib/sha512/lib/sha512.js"),wipe_1=__webpack_require__("./node_modules/@stablelib/wipe/lib/wipe.js");function gf(init){const r=new Float64Array(16);if(init)for(let i=0;i<init.length;i++)r[i]=init[i];return r}exports.jQ=64,exports.KS=64,exports.aP=32;new Uint8Array(32)[0]=9;const gf0=gf(),gf1=gf([1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function set25519(r,a){for(let i=0;i<16;i++)r[i]=0|a[i]}function car25519(o){let c=1;for(let i=0;i<16;i++){let v=o[i]+c+65535;c=Math.floor(v/65536),o[i]=v-65536*c}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){const c=~(b-1);for(let i=0;i<16;i++){const t=c&(p[i]^q[i]);p[i]^=t,q[i]^=t}}function pack25519(o,n){const m=gf(),t=gf();for(let i=0;i<16;i++)t[i]=n[i];car25519(t),car25519(t),car25519(t);for(let j=0;j<2;j++){m[0]=t[0]-65517;for(let i=1;i<15;i++)m[i]=t[i]-65535-(m[i-1]>>16&1),m[i-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1);const b=m[15]>>16&1;m[14]&=65535,sel25519(t,m,1-b)}for(let i=0;i<16;i++)o[2*i]=255&t[i],o[2*i+1]=t[i]>>8}function verify32(x,y){let d=0;for(let i=0;i<32;i++)d|=x[i]^y[i];return(1&d-1>>>8)-1}function neq25519(a,b){const c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,a),pack25519(d,b),verify32(c,d)}function par25519(a){const d=new Uint8Array(32);return pack25519(d,a),1&d[0]}function add(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]+b[i]}function sub(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]-b[i]}function mul(o,a,b){let v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0],t0+=v*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,v=a[1],t1+=v*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,v=a[2],t2+=v*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,v=a[3],t3+=v*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,v=a[4],t4+=v*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,v=a[5],t5+=v*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,v=a[6],t6+=v*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,v=a[7],t7+=v*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,v=a[8],t8+=v*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,v=a[9],t9+=v*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,v=a[10],t10+=v*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,v=a[11],t11+=v*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,v=a[12],t12+=v*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,v=a[13],t13+=v*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,v=a[14],t14+=v*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,v=a[15],t15+=v*b0,t16+=v*b1,t17+=v*b2,t18+=v*b3,t19+=v*b4,t20+=v*b5,t21+=v*b6,t22+=v*b7,t23+=v*b8,t24+=v*b9,t25+=v*b10,t26+=v*b11,t27+=v*b12,t28+=v*b13,t29+=v*b14,t30+=v*b15,t0+=38*t16,t1+=38*t17,t2+=38*t18,t3+=38*t19,t4+=38*t20,t5+=38*t21,t6+=38*t22,t7+=38*t23,t8+=38*t24,t9+=38*t25,t10+=38*t26,t11+=38*t27,t12+=38*t28,t13+=38*t29,t14+=38*t30,c=1,v=t0+c+65535,c=Math.floor(v/65536),t0=v-65536*c,v=t1+c+65535,c=Math.floor(v/65536),t1=v-65536*c,v=t2+c+65535,c=Math.floor(v/65536),t2=v-65536*c,v=t3+c+65535,c=Math.floor(v/65536),t3=v-65536*c,v=t4+c+65535,c=Math.floor(v/65536),t4=v-65536*c,v=t5+c+65535,c=Math.floor(v/65536),t5=v-65536*c,v=t6+c+65535,c=Math.floor(v/65536),t6=v-65536*c,v=t7+c+65535,c=Math.floor(v/65536),t7=v-65536*c,v=t8+c+65535,c=Math.floor(v/65536),t8=v-65536*c,v=t9+c+65535,c=Math.floor(v/65536),t9=v-65536*c,v=t10+c+65535,c=Math.floor(v/65536),t10=v-65536*c,v=t11+c+65535,c=Math.floor(v/65536),t11=v-65536*c,v=t12+c+65535,c=Math.floor(v/65536),t12=v-65536*c,v=t13+c+65535,c=Math.floor(v/65536),t13=v-65536*c,v=t14+c+65535,c=Math.floor(v/65536),t14=v-65536*c,v=t15+c+65535,c=Math.floor(v/65536),t15=v-65536*c,t0+=c-1+37*(c-1),c=1,v=t0+c+65535,c=Math.floor(v/65536),t0=v-65536*c,v=t1+c+65535,c=Math.floor(v/65536),t1=v-65536*c,v=t2+c+65535,c=Math.floor(v/65536),t2=v-65536*c,v=t3+c+65535,c=Math.floor(v/65536),t3=v-65536*c,v=t4+c+65535,c=Math.floor(v/65536),t4=v-65536*c,v=t5+c+65535,c=Math.floor(v/65536),t5=v-65536*c,v=t6+c+65535,c=Math.floor(v/65536),t6=v-65536*c,v=t7+c+65535,c=Math.floor(v/65536),t7=v-65536*c,v=t8+c+65535,c=Math.floor(v/65536),t8=v-65536*c,v=t9+c+65535,c=Math.floor(v/65536),t9=v-65536*c,v=t10+c+65535,c=Math.floor(v/65536),t10=v-65536*c,v=t11+c+65535,c=Math.floor(v/65536),t11=v-65536*c,v=t12+c+65535,c=Math.floor(v/65536),t12=v-65536*c,v=t13+c+65535,c=Math.floor(v/65536),t13=v-65536*c,v=t14+c+65535,c=Math.floor(v/65536),t14=v-65536*c,v=t15+c+65535,c=Math.floor(v/65536),t15=v-65536*c,t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function square(o,a){mul(o,a,a)}function inv25519(o,i){const c=gf();let a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)square(c,c),2!==a&&4!==a&&mul(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function edadd(p,q){const a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();sub(a,p[1],p[0]),sub(t,q[1],q[0]),mul(a,a,t),add(b,p[0],p[1]),add(t,q[0],q[1]),mul(b,b,t),mul(c,p[3],q[3]),mul(c,c,D2),mul(d,p[2],q[2]),add(d,d,d),sub(e,b,a),sub(f,d,c),add(g,d,c),add(h,b,a),mul(p[0],e,f),mul(p[1],h,g),mul(p[2],g,f),mul(p[3],e,h)}function cswap(p,q,b){for(let i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){const tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]),mul(tx,p[0],zi),mul(ty,p[1],zi),pack25519(r,ty),r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0);for(let i=255;i>=0;--i){const b=s[i/8|0]>>(7&i)&1;cswap(p,q,b),edadd(q,p),edadd(p,p),cswap(p,q,b)}}function scalarbase(p,s){const q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),mul(q[3],X,Y),scalarmult(p,q,s)}function generateKeyPairFromSeed(seed){if(seed.length!==exports.aP)throw new Error(`ed25519: seed must be ${exports.aP} bytes`);const d=(0,sha512_1.hash)(seed);d[0]&=248,d[31]&=127,d[31]|=64;const publicKey=new Uint8Array(32),p=[gf(),gf(),gf(),gf()];scalarbase(p,d),pack(publicKey,p);const secretKey=new Uint8Array(64);return secretKey.set(seed),secretKey.set(publicKey,32),{publicKey,secretKey}}exports._w=generateKeyPairFromSeed;const L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){let carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=Math.floor((x[j]+128)/256),x[j]-=256*carry;x[j]+=carry,x[i]=0}for(carry=0,j=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=255&x[i]}function reduce(r){const x=new Float64Array(64);for(let i=0;i<64;i++)x[i]=r[i];for(let i=0;i<64;i++)r[i]=0;modL(r,x)}function unpackneg(r,p){const t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();return set25519(r[2],gf1),function unpack25519(o,n){for(let i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}(r[1],p),square(num,r[1]),mul(den,num,D),sub(num,num,r[2]),add(den,r[2],den),square(den2,den),square(den4,den2),mul(den6,den4,den2),mul(t,den6,num),mul(t,t,den),function pow2523(o,i){const c=gf();let a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--)square(c,c),1!==a&&mul(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}(t,t),mul(t,t,num),mul(t,t,den),mul(t,t,den),mul(r[0],t,den),square(chk,r[0]),mul(chk,chk,den),neq25519(chk,num)&&mul(r[0],r[0],I),square(chk,r[0]),mul(chk,chk,den),neq25519(chk,num)?-1:(par25519(r[0])===p[31]>>7&&sub(r[0],gf0,r[0]),mul(r[3],r[0],r[1]),0)}exports.Xx=function sign(secretKey,message){const x=new Float64Array(64),p=[gf(),gf(),gf(),gf()],d=(0,sha512_1.hash)(secretKey.subarray(0,32));d[0]&=248,d[31]&=127,d[31]|=64;const signature=new Uint8Array(64);signature.set(d.subarray(32),32);const hs=new sha512_1.SHA512;hs.update(signature.subarray(32)),hs.update(message);const r=hs.digest();hs.clean(),reduce(r),scalarbase(p,r),pack(signature,p),hs.reset(),hs.update(signature.subarray(0,32)),hs.update(secretKey.subarray(32)),hs.update(message);const h=hs.digest();reduce(h);for(let i=0;i<32;i++)x[i]=r[i];for(let i=0;i<32;i++)for(let j=0;j<32;j++)x[i+j]+=h[i]*d[j];return modL(signature.subarray(32),x),signature}},"./node_modules/@stablelib/sha512/lib/sha512.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binary_1=__webpack_require__("./node_modules/@stablelib/binary/lib/binary.js"),wipe_1=__webpack_require__("./node_modules/@stablelib/wipe/lib/wipe.js");exports.DIGEST_LENGTH=64,exports.BLOCK_SIZE=128;var SHA512=function(){function SHA512(){this.digestLength=exports.DIGEST_LENGTH,this.blockSize=exports.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){wipe_1.wipe(this._buffer),wipe_1.wipe(this._tempHi),wipe_1.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(data,dataLength){if(void 0===dataLength&&(dataLength=data.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var dataPos=0;if(this._bytesHashed+=dataLength,this._bufferLength>0){for(;this._bufferLength<exports.BLOCK_SIZE&&dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(dataLength>=this.blockSize&&(dataPos=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,data,dataPos,dataLength),dataLength%=this.blockSize);dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;return this},SHA512.prototype.finish=function(out){if(!this._finished){var bytesHashed=this._bytesHashed,left=this._bufferLength,bitLenHi=bytesHashed/536870912|0,bitLenLo=bytesHashed<<3,padLength=bytesHashed%128<112?128:256;this._buffer[left]=128;for(var i=left+1;i<padLength-8;i++)this._buffer[i]=0;binary_1.writeUint32BE(bitLenHi,this._buffer,padLength-8),binary_1.writeUint32BE(bitLenLo,this._buffer,padLength-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,padLength),this._finished=!0}for(i=0;i<this.digestLength/8;i++)binary_1.writeUint32BE(this._stateHi[i],out,8*i),binary_1.writeUint32BE(this._stateLo[i],out,8*i+4);return this},SHA512.prototype.digest=function(){var out=new Uint8Array(this.digestLength);return this.finish(out),out},SHA512.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(savedState){return this._stateHi.set(savedState.stateHi),this._stateLo.set(savedState.stateLo),this._bufferLength=savedState.bufferLength,savedState.buffer&&this._buffer.set(savedState.buffer),this._bytesHashed=savedState.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(savedState){wipe_1.wipe(savedState.stateHi),wipe_1.wipe(savedState.stateLo),savedState.buffer&&wipe_1.wipe(savedState.buffer),savedState.bufferLength=0,savedState.bytesHashed=0},SHA512}();exports.SHA512=SHA512;var K=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(wh,wl,hh,hl,m,pos,len){for(var h,l,th,tl,a,b,c,d,ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];len>=128;){for(var i=0;i<16;i++){var j=8*i+pos;wh[i]=binary_1.readUint32BE(m,j),wl[i]=binary_1.readUint32BE(m,j+4)}for(i=0;i<80;i++){var bh7,bl7,bh0=ah0,bh1=ah1,bh2=ah2,bh3=ah3,bh4=ah4,bh5=ah5,bh6=ah6,bl0=al0,bl1=al1,bl2=al2,bl3=al3,bl4=al4,bl5=al5,bl6=al6;if(a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,a+=65535&(l=(al4>>>14|ah4<<18)^(al4>>>18|ah4<<14)^(ah4>>>9|al4<<23)),b+=l>>>16,c+=65535&(h=(ah4>>>14|al4<<18)^(ah4>>>18|al4<<14)^(al4>>>9|ah4<<23)),d+=h>>>16,a+=65535&(l=al4&al5^~al4&al6),b+=l>>>16,c+=65535&(h=ah4&ah5^~ah4&ah6),d+=h>>>16,h=K[2*i],a+=65535&(l=K[2*i+1]),b+=l>>>16,c+=65535&h,d+=h>>>16,h=wh[i%16],b+=(l=wl[i%16])>>>16,c+=65535&h,d+=h>>>16,c+=(b+=(a+=65535&l)>>>16)>>>16,a=65535&(l=tl=65535&a|b<<16),b=l>>>16,c=65535&(h=th=65535&c|(d+=c>>>16)<<16),d=h>>>16,a+=65535&(l=(al0>>>28|ah0<<4)^(ah0>>>2|al0<<30)^(ah0>>>7|al0<<25)),b+=l>>>16,c+=65535&(h=(ah0>>>28|al0<<4)^(al0>>>2|ah0<<30)^(al0>>>7|ah0<<25)),d+=h>>>16,b+=(l=al0&al1^al0&al2^al1&al2)>>>16,c+=65535&(h=ah0&ah1^ah0&ah2^ah1&ah2),d+=h>>>16,bh7=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,bl7=65535&a|b<<16,a=65535&(l=bl3),b=l>>>16,c=65535&(h=bh3),d=h>>>16,b+=(l=tl)>>>16,c+=65535&(h=th),d+=h>>>16,ah1=bh0,ah2=bh1,ah3=bh2,ah4=bh3=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,ah5=bh4,ah6=bh5,ah7=bh6,ah0=bh7,al1=bl0,al2=bl1,al3=bl2,al4=bl3=65535&a|b<<16,al5=bl4,al6=bl5,al7=bl6,al0=bl7,i%16==15)for(j=0;j<16;j++)h=wh[j],a=65535&(l=wl[j]),b=l>>>16,c=65535&h,d=h>>>16,h=wh[(j+9)%16],a+=65535&(l=wl[(j+9)%16]),b+=l>>>16,c+=65535&h,d+=h>>>16,th=wh[(j+1)%16],a+=65535&(l=((tl=wl[(j+1)%16])>>>1|th<<31)^(tl>>>8|th<<24)^(tl>>>7|th<<25)),b+=l>>>16,c+=65535&(h=(th>>>1|tl<<31)^(th>>>8|tl<<24)^th>>>7),d+=h>>>16,th=wh[(j+14)%16],b+=(l=((tl=wl[(j+14)%16])>>>19|th<<13)^(th>>>29|tl<<3)^(tl>>>6|th<<26))>>>16,c+=65535&(h=(th>>>19|tl<<13)^(tl>>>29|th<<3)^th>>>6),d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,wh[j]=65535&c|d<<16,wl[j]=65535&a|b<<16}a=65535&(l=al0),b=l>>>16,c=65535&(h=ah0),d=h>>>16,h=hh[0],b+=(l=hl[0])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[0]=ah0=65535&c|d<<16,hl[0]=al0=65535&a|b<<16,a=65535&(l=al1),b=l>>>16,c=65535&(h=ah1),d=h>>>16,h=hh[1],b+=(l=hl[1])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[1]=ah1=65535&c|d<<16,hl[1]=al1=65535&a|b<<16,a=65535&(l=al2),b=l>>>16,c=65535&(h=ah2),d=h>>>16,h=hh[2],b+=(l=hl[2])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[2]=ah2=65535&c|d<<16,hl[2]=al2=65535&a|b<<16,a=65535&(l=al3),b=l>>>16,c=65535&(h=ah3),d=h>>>16,h=hh[3],b+=(l=hl[3])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[3]=ah3=65535&c|d<<16,hl[3]=al3=65535&a|b<<16,a=65535&(l=al4),b=l>>>16,c=65535&(h=ah4),d=h>>>16,h=hh[4],b+=(l=hl[4])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[4]=ah4=65535&c|d<<16,hl[4]=al4=65535&a|b<<16,a=65535&(l=al5),b=l>>>16,c=65535&(h=ah5),d=h>>>16,h=hh[5],b+=(l=hl[5])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[5]=ah5=65535&c|d<<16,hl[5]=al5=65535&a|b<<16,a=65535&(l=al6),b=l>>>16,c=65535&(h=ah6),d=h>>>16,h=hh[6],b+=(l=hl[6])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[6]=ah6=65535&c|d<<16,hl[6]=al6=65535&a|b<<16,a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,h=hh[7],b+=(l=hl[7])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[7]=ah7=65535&c|d<<16,hl[7]=al7=65535&a|b<<16,pos+=128,len-=128}return pos}exports.hash=function hash(data){var h=new SHA512;h.update(data);var digest=h.digest();return h.clean(),digest}},"./node_modules/@walletconnect/environment/dist/cjs/crypto.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function getBrowerCrypto(){return(null===__webpack_require__.g||void 0===__webpack_require__.g?void 0:__webpack_require__.g.crypto)||(null===__webpack_require__.g||void 0===__webpack_require__.g?void 0:__webpack_require__.g.msCrypto)||{}}function getSubtleCrypto(){const browserCrypto=getBrowerCrypto();return browserCrypto.subtle||browserCrypto.webkitSubtle}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowserCryptoAvailable=exports.getSubtleCrypto=exports.getBrowerCrypto=void 0,exports.getBrowerCrypto=getBrowerCrypto,exports.getSubtleCrypto=getSubtleCrypto,exports.isBrowserCryptoAvailable=function isBrowserCryptoAvailable(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}},"./node_modules/@walletconnect/environment/dist/cjs/env.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowser=exports.isNode=exports.isReactNative=void 0,exports.isReactNative=isReactNative,exports.isNode=isNode,exports.isBrowser=function isBrowser(){return!isReactNative()&&!isNode()}},"./node_modules/@walletconnect/environment/dist/cjs/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js");tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/environment/dist/cjs/crypto.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/environment/dist/cjs/env.js"),exports)},"./node_modules/@walletconnect/ethereum-provider/dist/index.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EthereumProvider:()=>index_es_G,OPTIONAL_EVENTS:()=>index_es_,OPTIONAL_METHODS:()=>index_es_E});var events=__webpack_require__("./node_modules/events/events.js"),events_default=__webpack_require__.n(events),index_es=__webpack_require__("./node_modules/@walletconnect/utils/dist/index.es.js"),browser=__webpack_require__("./node_modules/@walletconnect/keyvaluestorage/dist/cjs/browser/index.js"),cjs=__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/index.js"),dist_cjs=__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/index.js"),esm_events=__webpack_require__("./node_modules/@walletconnect/events/dist/esm/events.js");class n extends esm_events.q{constructor(s){super(),this.opts=s,this.protocol="wc",this.version=2}}class h extends esm_events.q{constructor(s,t){super(),this.core=s,this.logger=t,this.records=new Map}}class a{constructor(s,t){this.logger=s,this.core=t}}class u extends esm_events.q{constructor(s,t){super(),this.relayer=s,this.logger=t}}class g extends esm_events.q{constructor(s){super()}}class p{constructor(s,t,o,w){this.core=s,this.logger=t,this.name=o}}class d extends esm_events.q{constructor(s,t){super(),this.relayer=s,this.logger=t}}class E extends esm_events.q{constructor(s,t){super(),this.core=s,this.logger=t}}class y{constructor(s,t){this.projectId=s,this.logger=t}}class b{constructor(s){this.opts=s,this.protocol="wc",this.version=2}}class S{constructor(s){this.client=s}}const JSONStringify=data=>JSON.stringify(data,((_,value)=>"bigint"==typeof value?value.toString()+"n":value));function esm_safeJsonParse(value){if("string"!=typeof value)throw new Error("Cannot safe json parse value of type "+typeof value);try{return(json=>{const serializedData=json.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(serializedData,((_,value)=>"string"==typeof value&&value.match(/^\d+n$/)?BigInt(value.substring(0,value.length-1)):value))})(value)}catch(_a){return value}}function safeJsonStringify(value){return"string"==typeof value?value:JSONStringify(value)||""}var lib_ed25519=__webpack_require__("./node_modules/@stablelib/ed25519/lib/ed25519.js"),random=__webpack_require__("./node_modules/@stablelib/random/lib/random.js"),time_dist_cjs=__webpack_require__("./node_modules/@walletconnect/time/dist/cjs/index.js");const constants_JWT_DELIMITER=".",constants_JWT_ENCODING="base64url",constants_JSON_ENCODING="utf8",constants_DATA_ENCODING="utf8",constants_DID_DELIMITER=":",constants_DID_PREFIX="did",constants_DID_METHOD="key",constants_MULTICODEC_ED25519_ENCODING="base58btc",constants_MULTICODEC_ED25519_BASE="z",constants_MULTICODEC_ED25519_HEADER="K36";var concat=__webpack_require__("./node_modules/uint8arrays/esm/src/concat.js"),to_string=__webpack_require__("./node_modules/uint8arrays/esm/src/to-string.js"),from_string=__webpack_require__("./node_modules/uint8arrays/esm/src/from-string.js");function encodeJSON(val){return(0,to_string.toString)((0,from_string.fromString)(safeJsonStringify(val),constants_JSON_ENCODING),constants_JWT_ENCODING)}function encodeIss(publicKey){const header=(0,from_string.fromString)(constants_MULTICODEC_ED25519_HEADER,constants_MULTICODEC_ED25519_ENCODING),multicodec=constants_MULTICODEC_ED25519_BASE+(0,to_string.toString)((0,concat.concat)([header,publicKey]),constants_MULTICODEC_ED25519_ENCODING);return[constants_DID_PREFIX,constants_DID_METHOD,multicodec].join(constants_DID_DELIMITER)}function generateKeyPair(seed=(0,random.randomBytes)(32)){return lib_ed25519._w(seed)}async function signJWT(sub,aud,ttl,keyPair,iat=(0,time_dist_cjs.fromMiliseconds)(Date.now())){const header={alg:"EdDSA",typ:"JWT"},payload={iss:encodeIss(keyPair.publicKey),sub,aud,iat,exp:iat+ttl},data=function encodeData(params){return(0,from_string.fromString)([encodeJSON(params.header),encodeJSON(params.payload)].join(constants_JWT_DELIMITER),constants_DATA_ENCODING)}({header,payload});return function encodeJWT(params){return[encodeJSON(params.header),encodeJSON(params.payload),(bytes=params.signature,(0,to_string.toString)(bytes,constants_JWT_ENCODING))].join(constants_JWT_DELIMITER);var bytes}({header,payload,signature:lib_ed25519.Xx(keyPair.secretKey,data)})}__webpack_require__("./node_modules/@walletconnect/relay-auth/dist/esm/types.js");var src=__webpack_require__("./node_modules/uint8arrays/esm/src/index.js");const INTERNAL_ERROR="INTERNAL_ERROR",SERVER_ERROR="SERVER_ERROR",RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],constants_STANDARD_ERROR_MAP={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[SERVER_ERROR]:{code:-32e3,message:"Server error"}},constants_DEFAULT_ERROR=SERVER_ERROR;function isReservedErrorCode(code){return RESERVED_ERROR_CODES.includes(code)}function getError(type){return Object.keys(constants_STANDARD_ERROR_MAP).includes(type)?constants_STANDARD_ERROR_MAP[type]:constants_STANDARD_ERROR_MAP[constants_DEFAULT_ERROR]}function getErrorByCode(code){const match=Object.values(constants_STANDARD_ERROR_MAP).find((e=>e.code===code));return match||constants_STANDARD_ERROR_MAP[constants_DEFAULT_ERROR]}function parseConnectionError(e,url,type){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${type} RPC url at ${url}`):e}var environment_dist_cjs=__webpack_require__("./node_modules/@walletconnect/environment/dist/cjs/index.js");function payloadId(entropy=3){return Date.now()*Math.pow(10,entropy)+Math.floor(Math.random()*Math.pow(10,entropy))}function getBigIntRpcId(entropy=6){return BigInt(payloadId(entropy))}function formatJsonRpcRequest(method,params,id){return{id:id||payloadId(),jsonrpc:"2.0",method,params}}function formatJsonRpcResult(id,result){return{id,jsonrpc:"2.0",result}}function formatJsonRpcError(id,error,data){return{id,jsonrpc:"2.0",error:formatErrorMessage(error,data)}}function formatErrorMessage(error,data){return void 0===error?getError(INTERNAL_ERROR):("string"==typeof error&&(error=Object.assign(Object.assign({},getError(SERVER_ERROR)),{message:error})),void 0!==data&&(error.data=data),isReservedErrorCode(error.code)&&(error=getErrorByCode(error.code)),error)}class misc_IEvents{}class IBaseJsonRpcProvider extends misc_IEvents{constructor(){super()}}class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(connection){super()}}function matchRegexProtocol(url,regex){const protocol=function getUrlProtocol(url){const matches=url.match(new RegExp(/^\w+:/,"gi"));if(matches&&matches.length)return matches[0]}(url);return void 0!==protocol&&new RegExp(regex).test(protocol)}function isHttpUrl(url){return matchRegexProtocol(url,"^https?:")}function isWsUrl(url){return matchRegexProtocol(url,"^wss?:")}function isLocalhostUrl(url){return new RegExp("wss?://localhost(:d{2,5})?").test(url)}function isJsonRpcPayload(payload){return"object"==typeof payload&&"id"in payload&&"jsonrpc"in payload&&"2.0"===payload.jsonrpc}function isJsonRpcRequest(payload){return isJsonRpcPayload(payload)&&"method"in payload}function isJsonRpcResponse(payload){return isJsonRpcPayload(payload)&&(isJsonRpcResult(payload)||isJsonRpcError(payload))}function isJsonRpcResult(payload){return"result"in payload}function isJsonRpcError(payload){return"error"in payload}class JsonRpcProvider extends IJsonRpcProvider{constructor(connection){super(connection),this.events=new events.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(connection),this.connection.connected&&this.registerEventListeners()}async connect(connection=this.connection){await this.open(connection)}async disconnect(){await this.close()}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async request(request,context){return this.requestStrict(formatJsonRpcRequest(request.method,request.params||[],request.id||getBigIntRpcId().toString()),context)}async requestStrict(request,context){return new Promise((async(resolve,reject)=>{if(!this.connection.connected)try{await this.open()}catch(e){reject(e)}this.events.on(`${request.id}`,(response=>{isJsonRpcError(response)?reject(response.error):resolve(response.result)}));try{await this.connection.send(request,context)}catch(e){reject(e)}}))}setConnection(connection=this.connection){return connection}onPayload(payload){this.events.emit("payload",payload),isJsonRpcResponse(payload)?this.events.emit(`${payload.id}`,payload):this.events.emit("message",{type:payload.method,data:payload.params})}onClose(event){event&&3e3===event.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${event.code} ${event.reason?`(${event.reason})`:""}`)),this.events.emit("disconnect")}async open(connection=this.connection){this.connection===connection&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof connection&&(await this.connection.open(connection),connection=this.connection),this.connection=this.setConnection(connection),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(payload=>this.onPayload(payload))),this.connection.on("close",(event=>this.onClose(event))),this.connection.on("error",(error=>this.events.emit("error",error))),this.connection.on("register_error",(error=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const truncateQuery=wssUrl=>wssUrl.split("?")[0],WS=void 0!==__webpack_require__.g&&void 0!==__webpack_require__.g.WebSocket?__webpack_require__.g.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:__webpack_require__("./node_modules/@walletconnect/jsonrpc-ws-connection/node_modules/ws/browser.js");const dist_esm=class WsConnection{constructor(url){if(this.url=url,this.events=new events.EventEmitter,this.registering=!1,!isWsUrl(url))throw new Error(`Provided URL is not compatible with WebSocket connection: ${url}`);this.url=url}get connected(){return void 0!==this.socket}get connecting(){return this.registering}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async open(url=this.url){await this.register(url)}async close(){return new Promise(((resolve,reject)=>{void 0!==this.socket?(this.socket.onclose=event=>{this.onClose(event),resolve()},this.socket.close()):reject(new Error("Connection already closed"))}))}async send(payload,context){void 0===this.socket&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(payload))}catch(e){this.onError(payload.id,e)}}register(url=this.url){if(!isWsUrl(url))throw new Error(`Provided URL is not compatible with WebSocket connection: ${url}`);if(this.registering){const currentMaxListeners=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=currentMaxListeners||this.events.listenerCount("open")>=currentMaxListeners)&&this.events.setMaxListeners(currentMaxListeners+1),new Promise(((resolve,reject)=>{this.events.once("register_error",(error=>{this.resetMaxListeners(),reject(error)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),void 0===this.socket)return reject(new Error("WebSocket connection is missing or invalid"));resolve(this.socket)}))}))}return this.url=url,this.registering=!0,new Promise(((resolve,reject)=>{const opts=(0,environment_dist_cjs.isReactNative)()?void 0:{rejectUnauthorized:!isLocalhostUrl(url)},socket=new WS(url,[],opts);"undefined"!=typeof window?socket.onerror=event=>{const errorEvent=event;reject(this.emitError(errorEvent.error))}:socket.on("error",(errorEvent=>{reject(this.emitError(errorEvent))})),socket.onopen=()=>{this.onOpen(socket),resolve(socket)}}))}onOpen(socket){socket.onmessage=event=>this.onPayload(event),socket.onclose=event=>this.onClose(event),this.socket=socket,this.registering=!1,this.events.emit("open")}onClose(event){this.socket=void 0,this.registering=!1,this.events.emit("close",event)}onPayload(e){if(void 0===e.data)return;const payload="string"==typeof e.data?esm_safeJsonParse(e.data):e.data;this.events.emit("payload",payload)}onError(id,e){const error=this.parseError(e),payload=formatJsonRpcError(id,error.message||error.toString());this.events.emit("payload",payload)}parseError(e,url=this.url){return parseConnectionError(e,truncateQuery(url),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(errorEvent){const error=this.parseError(new Error((null==errorEvent?void 0:errorEvent.message)||`WebSocket connection failed for host: ${truncateQuery(this.url)}`));return this.events.emit("register_error",error),error}};var lodash_isequal=__webpack_require__("./node_modules/lodash.isequal/index.js"),lodash_isequal_default=__webpack_require__.n(lodash_isequal),process=__webpack_require__("./node_modules/process/browser.js");var $i=function Fi(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),a=n.charCodeAt(0);if(255!==t[a])throw new TypeError(n+" is ambiguous");t[a]=s}var o=r.length,h=r.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function b(u){if("string"!=typeof u)throw new TypeError("Expected String");if(0===u.length)return new Uint8Array;var y=0;if(" "!==u[y]){for(var A=0,v=0;u[y]===h;)A++,y++;for(var R=(u.length-y)*d+1>>>0,T=new Uint8Array(R);u[y];){var m=t[u.charCodeAt(y)];if(255===m)return;for(var S=0,x=R-1;(0!==m||S<v)&&-1!==x;x--,S++)m+=o*T[x]>>>0,T[x]=m%256>>>0,m=m/256>>>0;if(0!==m)throw new Error("Non-zero carry");v=S,y++}if(" "!==u[y]){for(var I=R-v;I!==R&&0===T[I];)I++;for(var P=new Uint8Array(A+(R-I)),B=A;I!==R;)P[B++]=T[I++];return P}}}return{encode:function D(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===u.length)return"";for(var y=0,A=0,v=0,R=u.length;v!==R&&0===u[v];)v++,y++;for(var T=(R-v)*l+1>>>0,m=new Uint8Array(T);v!==R;){for(var S=u[v],x=0,I=T-1;(0!==S||x<A)&&-1!==I;I--,x++)S+=256*m[I]>>>0,m[I]=S%o>>>0,S=S/o>>>0;if(0!==S)throw new Error("Non-zero carry");A=x,v++}for(var P=T-A;P!==T&&0===m[P];)P++;for(var B=h.repeat(y);P<T;++P)B+=r.charAt(m[P]);return B},decodeUnsafe:b,decode:function k(u){var y=b(u);if(y)return y;throw new Error(`Non-${e} character`)}}},Mi=$i;const Oe=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Bi{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ji{constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return xe(this,e)}}class Vi{constructor(e){this.decoders=e}or(e){return xe(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xe=(r,e)=>new Vi({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class qi{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Bi(e,t,i),this.decoder=new ji(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const H=({name:r,prefix:e,encode:t,decode:i})=>new qi(r,e,t,i),M=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Mi(t,e);return H({prefix:r,name:e,encode:i,decode:n=>Oe(s(n))})},index_es_p=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>H({prefix:e,name:r,encode:s=>((r,e,t)=>{const i="="===e[e.length-1],s=(1<<t)-1;let n="",a=0,o=0;for(let h=0;h<r.length;++h)for(o=o<<8|r[h],a+=8;a>t;)a-=t,n+=e[s&o>>a];if(a&&(n+=e[s&o<<t-a]),i)for(;n.length*t&7;)n+="=";return n})(s,i,t),decode:s=>((r,e,t,i)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let n=r.length;for(;"="===r[n-1];)--n;const a=new Uint8Array(n*t/8|0);let o=0,h=0,d=0;for(let l=0;l<n;++l){const D=s[r[l]];if(void 0===D)throw new SyntaxError(`Non-${i} character`);h=h<<t|D,o+=t,o>=8&&(o-=8,a[d++]=255&h>>o)}if(o>=t||255&h<<8-o)throw new SyntaxError("Unexpected end of data");return a})(s,i,t,r)}),Ji=H({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var Hi=Object.freeze({__proto__:null,identity:Ji});const Wi=index_es_p({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Xi=Object.freeze({__proto__:null,base2:Wi});const Zi=index_es_p({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Qi=Object.freeze({__proto__:null,base8:Zi});const es=M({prefix:"9",name:"base10",alphabet:"0123456789"});var ts=Object.freeze({__proto__:null,base10:es});const is=index_es_p({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ss=index_es_p({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var rs=Object.freeze({__proto__:null,base16:is,base16upper:ss});const ns=index_es_p({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),as=index_es_p({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),os=index_es_p({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hs=index_es_p({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cs=index_es_p({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),us=index_es_p({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ls=index_es_p({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ds=index_es_p({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gs=index_es_p({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ps=Object.freeze({__proto__:null,base32:ns,base32upper:as,base32pad:os,base32padupper:hs,base32hex:cs,base32hexupper:us,base32hexpad:ls,base32hexpadupper:ds,base32z:gs});const Ds=M({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ys=M({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bs=Object.freeze({__proto__:null,base36:Ds,base36upper:ys});const ms=M({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Es=M({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fs=Object.freeze({__proto__:null,base58btc:ms,base58flickr:Es});const index_es_ws=index_es_p({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vs=index_es_p({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Is=index_es_p({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cs=index_es_p({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var _s=Object.freeze({__proto__:null,base64:index_es_ws,base64pad:vs,base64url:Is,base64urlpad:Cs});const Ae=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Rs=Ae.reduce(((r,e,t)=>(r[t]=e,r)),[]),Ts=Ae.reduce(((r,e,t)=>(r[e.codePointAt(0)]=t,r)),[]);const Os=H({prefix:"🚀",name:"base256emoji",encode:function Ss(r){return r.reduce(((e,t)=>e+=Rs[t]),"")},decode:function Ps(r){const e=[];for(const t of r){const i=Ts[t.codePointAt(0)];if(void 0===i)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}});var xs=Object.freeze({__proto__:null,base256emoji:Os}),As=function Ne(r,e,t){e=e||[];for(var i=t=t||0;r>=Us;)e[t++]=255&r|ze,r/=128;for(;r&Ns;)e[t++]=255&r|ze,r>>>=7;return e[t]=0|r,Ne.bytes=t-i+1,e},ze=128,Ns=-128,Us=Math.pow(2,31);var Ls=function ae(r,i){var a,t=0,s=0,n=i=i||0,o=r.length;do{if(n>=o)throw ae.bytes=0,new RangeError("Could not decode varint");a=r[n++],t+=s<28?(a&index_es_Ue)<<s:(a&index_es_Ue)*Math.pow(2,s),s+=7}while(a>=Fs);return ae.bytes=n-i,t},Fs=128,index_es_Ue=127;var $s=Math.pow(2,7),Ms=Math.pow(2,14),Ks=Math.pow(2,21),ks=Math.pow(2,28),Bs=Math.pow(2,35),js=Math.pow(2,42),Vs=Math.pow(2,49),qs=Math.pow(2,56),Ys=Math.pow(2,63),Le={encode:As,decode:Ls,encodingLength:function(r){return r<$s?1:r<Ms?2:r<Ks?3:r<ks?4:r<Bs?5:r<js?6:r<Vs?7:r<qs?8:r<Ys?9:10}};const Fe=(r,e,t=0)=>(Le.encode(r,e,t),e),$e=r=>Le.encodingLength(r),oe=(r,e)=>{const t=e.byteLength,i=$e(r),s=i+$e(t),n=new Uint8Array(s+t);return Fe(r,n,0),Fe(t,n,i),n.set(e,s),new Hs(r,t,e,n)};class Hs{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const Me=({name:r,code:e,encode:t})=>new Ws(r,e,t);class Ws{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?oe(this.code,t):t.then((i=>oe(this.code,i)))}throw Error("Unknown type, must be binary type")}}const Ke=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Xs=Me({name:"sha2-256",code:18,encode:Ke("SHA-256")}),Zs=Me({name:"sha2-512",code:19,encode:Ke("SHA-512")});Object.freeze({__proto__:null,sha256:Xs,sha512:Zs});const Be=Oe,ir={code:0,name:"identity",encode:Be,digest:r=>oe(0,Be(r))};Object.freeze({__proto__:null,identity:ir});new TextEncoder,new TextDecoder;const je={...Hi,...Xi,...Qi,...ts,...rs,...ps,...bs,...fs,..._s,...xs};function Ve(r){return null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function qe(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Ye=qe("utf8","u",(r=>"u"+new TextDecoder("utf8").decode(r)),(r=>(new TextEncoder).encode(r.substring(1)))),he=qe("ascii","a",(r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}),(r=>{const e=function rr(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Ve(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e})),nr={utf8:Ye,"utf-8":Ye,hex:je.base16,latin1:he,ascii:he,binary:he,...je};const W="core",O=`wc@2:${W}:`,Je_logger="error",He={database:":memory:"},ue="client_ed25519_seed",Xe=time_dist_cjs.ONE_DAY,it=time_dist_cjs.SIX_HOURS,le="wss://relay.walletconnect.com",de="wss://relay.walletconnect.org",index_es_g_message="relayer_message",index_es_g_message_ack="relayer_message_ack",index_es_g_connect="relayer_connect",index_es_g_disconnect="relayer_disconnect",index_es_g_error="relayer_error",index_es_g_connection_stalled="relayer_connection_stalled",index_es_g_transport_closed="relayer_transport_closed",index_es_g_publish="relayer_publish",L_payload="payload",L_connect="connect",L_disconnect="disconnect",L_error="error",ht=time_dist_cjs.ONE_SECOND/2,index_es_C_created="subscription_created",index_es_C_deleted="subscription_deleted",index_es_C_sync="subscription_sync",index_es_C_resubscribed="subscription_resubscribed",Dt=1e3*time_dist_cjs.FIVE_SECONDS,F={wc_pairingDelete:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:0},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:0}}},__created="history_created",__updated="history_updated",__deleted="history_deleted",__sync="history_sync",w_created="expirer_created",w_deleted="expirer_deleted",w_expired="expirer_expired",w_sync="expirer_sync",X="verify-api",ge="https://verify.walletconnect.com";class vt{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=O,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,index_es.KC)(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,index_es.IP)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class It{constructor(e,t,i){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();return encodeIss(generateKeyPair(await this.getClientSeed()).publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=(0,index_es.Au)();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const a=generateKeyPair(await this.getClientSeed()),o=(0,index_es.jd)(),h=Xe;return await signJWT(o,s,h,a)},this.generateSharedKey=(s,n,a)=>{this.isInitialized();const o=this.getPrivateKey(s),h=(0,index_es.m$)(o,n);return this.setSymKey(h,a)},this.setSymKey=async(s,n)=>{this.isInitialized();const a=n||(0,index_es.Ym)(s);return await this.keychain.set(a,s),a},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,n,a)=>{this.isInitialized();const o=(0,index_es.EN)(a),h=safeJsonStringify(n);if((0,index_es.Q8)(o)){const b=o.senderPublicKey,k=o.receiverPublicKey;s=await this.generateSharedKey(b,k)}const d=this.getSymKey(s),{type:l,senderPublicKey:D}=o;return(0,index_es.HI)({type:l,symKey:d,message:h,senderPublicKey:D})},this.decode=async(s,n,a)=>{this.isInitialized();const o=(0,index_es.Ll)(n,a);if((0,index_es.Q8)(o)){const l=o.receiverPublicKey,D=o.senderPublicKey;s=await this.generateSharedKey(l,D)}const h=this.getSymKey(s);return esm_safeJsonParse((0,index_es.pe)({symKey:h,encoded:n}))},this.getPayloadType=s=>{const n=(0,index_es.vB)(s);return(0,index_es.WG)(n.type)},this.getPayloadSenderPublicKey=s=>{const n=(0,index_es.vB)(s);return n.senderPublicKey?(0,src.BB)(n.senderPublicKey,index_es.AW):void 0},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.keychain=i||new vt(this.core,this.logger)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ue)}catch{e=(0,index_es.jd)(),await this.keychain.set(ue,e)}return function ar(r,e="utf8"){const t=nr[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):Ve(globalThis.Buffer.from(r,"utf-8"))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ct extends a{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=O,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const n=(0,index_es.rj)(s);let a=this.messages.get(i);return typeof a>"u"&&(a={}),typeof a[n]<"u"||(a[n]=s,this.messages.set(i,a),await this.persist()),n},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();return typeof this.get(i)[(0,index_es.rj)(s)]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=(0,dist_cjs.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,index_es.KC)(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,index_es.IP)(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class lr extends u{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new events.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,time_dist_cjs.toMiliseconds)(time_dist_cjs.TEN_SECONDS),this.queueTimeout=(0,time_dist_cjs.toMiliseconds)(time_dist_cjs.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,s,n)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});try{const a=n?.ttl||it,o=(0,index_es._H)(n),h=n?.prompt||!1,d=n?.tag||0,l=n?.id||getBigIntRpcId().toString(),D={topic:i,message:s,opts:{ttl:a,relay:o,prompt:h,tag:d,id:l}},b=setTimeout((()=>this.queue.set(l,D)),this.queueTimeout);try{await await(0,index_es.hF)(this.rpcPublish(i,s,a,o,h,d,l),this.publishTimeout),clearTimeout(b),this.relayer.events.emit(index_es_g_publish,D)}catch{return this.logger.debug("Publishing Payload stalled"),void(this.needsTransportRestart=!0)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}rpcPublish(e,t,i,s,n,a,o){var h,d,l,D;const b={method:(0,index_es.cO)(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:n,tag:a},id:o};return(0,index_es.o8)(null==(h=b.params)?void 0:h.prompt)&&(null==(d=b.params)||delete d.prompt),(0,index_es.o8)(null==(l=b.params)?void 0:l.tag)&&(null==(D=b.params)||delete D.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:b}),this.relayer.request(b)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)}))}registerEventListeners(){this.relayer.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(index_es_g_connection_stalled);this.checkQueue()})),this.relayer.on(index_es_g_message_ack,(e=>{this.onPublish(e.id.toString())}))}}class dr{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter((n=>n!==t));s.length?this.map.set(e,s):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var gr=Object.defineProperty,pr=Object.defineProperties,Dr=Object.getOwnPropertyDescriptors,_t=Object.getOwnPropertySymbols,yr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,Rt=(r,e,t)=>e in r?gr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,K=(r,e)=>{for(var t in e||(e={}))yr.call(e,t)&&Rt(r,t,e[t]);if(_t)for(var t of _t(e))br.call(e,t)&&Rt(r,t,e[t]);return r},pe=(r,e)=>pr(r,Dr(e));class Tt extends d{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new dr,this.events=new events.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=O,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=(0,index_es._H)(s),a={topic:i,relay:n};this.pending.set(i,a);const o=await this.rpcSubscribe(i,n);return this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),o}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>!!this.topics.includes(i)||await new Promise(((s,n)=>{const a=new time_dist_cjs.Watch;a.start(this.pendingSubscriptionWatchLabel);const o=setInterval((()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),s(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=Dt&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),n(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1)),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map((async s=>await this.unsubscribeById(e,s,t))))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=(0,index_es._H)(i);await this.rpcUnsubscribe(e,t,s);const n=(0,index_es.D6)("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:(0,index_es.cO)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await(0,index_es.hF)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(index_es_g_connection_stalled)}return(0,index_es.rj)(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:(0,index_es.cO)(t.protocol).batchSubscribe,params:{topics:e.map((s=>s.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await(0,index_es.hF)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(index_es_g_connection_stalled)}}rpcUnsubscribe(e,t,i){const s={method:(0,index_es.cO)(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,pe(K({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((t=>{this.setSubscription(t.id,K({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,K({},t)),this.topicMap.set(t.topic,e),this.events.emit(index_es_C_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(index_es_C_deleted,pe(K({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(index_es_C_sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(index_es_C_resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);(0,index_es.qt)(t)&&this.onBatchSubscribe(t.map(((i,s)=>pe(K({},e[s]),{id:i}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(index_es_g_connect,(async()=>{await this.onConnect()})),this.relayer.on(index_es_g_disconnect,(()=>{this.onDisconnect()})),this.events.on(index_es_C_created,(async e=>{const t=index_es_C_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(index_es_C_deleted,(async e=>{const t=index_es_C_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var mr=Object.defineProperty,St=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,fr=Object.prototype.propertyIsEnumerable,Pt=(r,e,t)=>e in r?mr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;class Ot extends g{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new events.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,dist_cjs.generateChildLogger)(e.logger,this.name):(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new Ct(this.logger,e.core),this.subscriber=new Tt(this,this.logger),this.publisher=new lr(this,this.logger),this.relayUrl=e?.relayUrl||le,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${de}...`),await this.restartTransport(de)}this.registerEventListeners(),this.initialized=!0,setTimeout((async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),1e4)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let s=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";return s||(await Promise.all([new Promise((n=>{this.subscriber.once(index_es_C_created,(a=>{a.topic===e&&n()}))})),new Promise((async n=>{s=await this.subscriber.subscribe(e,t),n()}))]),s)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(index_es_g_transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise((t=>{this.initialized||t(),this.subscriber.once(index_es_C_resubscribed,(()=>{t()}))})),await Promise.race([new Promise((async(t,i)=>{await(0,index_es.hF)(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((s=>i(s))).then((()=>t())).finally((()=>this.removeListener(index_es_g_transport_closed,this.rejectTransportOpen)))})),new Promise((t=>this.once(index_es_g_transport_closed,this.rejectTransportOpen)))])])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.events.emit(index_es_g_transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise((t=>{this.provider.once(L_disconnect,(()=>{t()}))})),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new dist_esm((0,index_es.$0)({sdkVersion:"2.9.0",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;return!await this.subscriber.isSubscribed(t)||this.messages.has(t,i)}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),isJsonRpcRequest(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:i,message:s,publishedAt:n}=t.data,a={topic:i,message:s,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(((r,e)=>{for(var t in e||(e={}))Er.call(e,t)&&Pt(r,t,e[t]);if(St)for(var t of St(e))fr.call(e,t)&&Pt(r,t,e[t]);return r})({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else isJsonRpcResponse(e)&&this.events.emit(index_es_g_message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(index_es_g_message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=formatJsonRpcResult(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(L_payload,(e=>this.onProviderPayload(e))),this.provider.on(L_connect,(()=>{this.events.emit(index_es_g_connect)})),this.provider.on(L_disconnect,(()=>{this.onProviderDisconnect()})),this.provider.on(L_error,(e=>{this.logger.error(e),this.events.emit(index_es_g_error,e)}))}registerEventListeners(){this.events.on(index_es_g_connection_stalled,(async()=>{await this.restartTransport()}))}onProviderDisconnect(){this.events.emit(index_es_g_disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout((async()=>{await this.restartTransport()}),(0,time_dist_cjs.toMiliseconds)(ht))}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var vr=Object.defineProperty,xt=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,At=(r,e,t)=>e in r?vr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,zt=(r,e)=>{for(var t in e||(e={}))Ir.call(e,t)&&At(r,t,e[t]);if(xt)for(var t of xt(e))Cr.call(e,t)&&At(r,t,e[t]);return r};class Nt extends p{constructor(e,t,i,s=O,n=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=O,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((a=>{this.getKey&&null!==a&&!(0,index_es.o8)(a)?this.map.set(this.getKey(a),a):(0,index_es.xW)(a)?this.map.set(a.id,a):(0,index_es.h1)(a)&&this.map.set(a.topic,a)})),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter((o=>Object.keys(a).every((h=>lodash_isequal_default()(o[h],a[h]))))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const h=zt(zt({},this.getData(a)),o);this.map.set(a,h),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),await this.persist())},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ut{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(events_default()),this.initialized=!1,this.storagePrefix=O,this.ignoredPayloadTypes=[index_es.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=(0,index_es.jd)(),s=await this.core.crypto.setSymKey(i),n=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES),a={protocol:"irn"},o={topic:s,expiry:n,relay:a,active:!1},h=(0,index_es.Bv)({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a});return await this.pairings.set(s,o),await this.core.relayer.subscribe(s),this.core.expirer.set(s,n),{topic:s,uri:h}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:n,relay:a}=(0,index_es.he)(i.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const o=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES),h={topic:s,relay:a,expiry:o,active:!1};return await this.pairings.set(s,h),await this.core.crypto.setSymKey(n,s),await this.core.relayer.subscribe(s,{relay:a}),this.core.expirer.set(s,o),i.activatePairing&&await this.activate({topic:s}),h},this.activate=async({topic:i})=>{this.isInitialized();const s=(0,index_es.gn)(time_dist_cjs.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:h}=(0,index_es.H1)();this.events.once((0,index_es.E0)("pairing_ping",n),(({error:d})=>{d?h(d):o()})),await a()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",(0,index_es.D6)("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,n)=>{const a=formatJsonRpcRequest(s,n),o=await this.core.crypto.encode(i,a),h=F[s].req;return this.core.history.set(i,a),this.core.relayer.publish(i,o,h),a.id},this.sendResult=async(i,s,n)=>{const a=formatJsonRpcResult(i,n),o=await this.core.crypto.encode(s,a),h=await this.core.history.get(s,i),d=F[h.request.method].res;await this.core.relayer.publish(s,o,d),await this.core.history.resolve(a)},this.sendError=async(i,s,n)=>{const a=formatJsonRpcError(i,n),o=await this.core.crypto.encode(s,a),h=await this.core.history.get(s,i),d=F[h.request.method]?F[h.request.method].res:F.unregistered_method.res;await this.core.relayer.publish(s,o,d),await this.core.history.resolve(a)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,(0,index_es.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter((s=>(0,index_es.Bw)(s.expiry)));await Promise.all(i.map((s=>this.deletePairing(s.topic))))},this.onRelayEventRequest=i=>{const{topic:s,payload:n}=i,a=n.method;if(this.pairings.keys.includes(s))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:n}=i,a=(await this.core.history.get(s,n.id)).request.method;if(this.pairings.keys.includes(s)){if("wc_pairingPing"===a)return this.onPairingPingResponse(s,n);return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit("pairing_ping",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onPairingPingResponse=(i,s)=>{const{id:n}=s;setTimeout((()=>{isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("pairing_ping",n),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("pairing_ping",n),{error:s.error})}),500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:n,method:a}=s;try{if(this.registeredMethods.includes(a))return;const o=(0,index_es.D6)("WC_METHOD_UNSUPPORTED",a);await this.sendError(n,i,o),this.logger.error(o)}catch(o){await this.sendError(n,i,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error((0,index_es.D6)("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!(0,index_es.EJ)(i)){const{message:s}=(0,index_es.Z7)("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(s)}if(!(0,index_es.jv)(i.uri)){const{message:s}=(0,index_es.Z7)("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(s)}},this.isValidPing=async i=>{if(!(0,index_es.EJ)(i)){const{message:n}=(0,index_es.Z7)("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!(0,index_es.EJ)(i)){const{message:n}=(0,index_es.Z7)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!(0,index_es.M_)(i,!1)){const{message:s}=(0,index_es.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=(0,index_es.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if((0,index_es.Bw)(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=(0,index_es.Z7)("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.pairings=new Nt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(index_es_g_message,(async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);isJsonRpcRequest(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):isJsonRpcResponse(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}))}registerExpirerEvents(){this.core.expirer.on(w_expired,(async e=>{const{topic:t}=(0,index_es.iP)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}class Lt extends h{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new events.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=O,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((i=>this.records.set(i.id,i))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const a={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n,expiry:(0,index_es.gn)(time_dist_cjs.THIRTY_DAYS)};this.records.set(a.id,a),this.events.emit(__created,a)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=isJsonRpcError(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(__updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach((n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(__deleted,n)}}))},this.exists=async(i,s)=>(this.isInitialized(),!!this.records.has(s)&&(await this.getRecord(s)).topic===i),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:formatJsonRpcRequest(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(__sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(__created,(e=>{const t=__created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(__updated,(e=>{const t=__updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(__deleted,(e=>{const t=__deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((e=>{(0,time_dist_cjs.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))}))}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ft extends E{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new events.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=O,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((i=>this.expirations.set(i.target,i))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const n=this.formatTarget(i),a={target:n,expiry:s};this.expirations.set(n,a),this.checkExpiry(n,a),this.events.emit(w_created,{target:n,expiration:a})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(w_deleted,{target:s,expiration:n})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return(0,index_es.Z4)(e);if("number"==typeof e)return(0,index_es.Gq)(e);const{message:t}=(0,index_es.Z7)("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(w_sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;(0,time_dist_cjs.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(w_expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(w_created,(e=>{const t=w_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(w_expired,(e=>{const t=w_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(w_deleted,(e=>{const t=w_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $t extends y{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=X,this.initialized=!1,this.init=async i=>{(0,index_es.b$)()||!(0,index_es.jU)()||(this.verifyUrl=i?.verifyUrl||ge,await this.createIframe())},this.register=async i=>{var s;if(this.initialized||await this.init(),this.iframe)try{null==(s=this.iframe.contentWindow)||s.postMessage(i.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${i.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async i=>{var s;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${i.attestationId}`);const n=this.startAbortTimer(time_dist_cjs.FIVE_SECONDS),a=await fetch(`${this.verifyUrl}/attestation/${i.attestationId}`,{signal:this.abortController.signal});return clearTimeout(n),200===a.status?null==(s=await a.json())?void 0:s.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise(((i,s)=>{if(document.getElementById(X))return i();const n=document.createElement("iframe");n.setAttribute("id",X),n.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),n.style.display="none",n.addEventListener("load",(()=>{this.initialized=!0,i()})),n.addEventListener("error",(a=>{s(a)})),document.body.append(n),this.iframe=n})),new Promise((i=>{setTimeout((()=>i("iframe load timeout")),(0,time_dist_cjs.toMiliseconds)(time_dist_cjs.ONE_SECOND/2))}))])}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i)}},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.verifyUrl=ge,this.abortController=new AbortController,this.isDevEnv=(0,index_es.UG)()&&process.env.IS_VITEST}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}startAbortTimer(e){return setTimeout((()=>this.abortController.abort()),(0,time_dist_cjs.toMiliseconds)(e))}}var _r=Object.defineProperty,Mt=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable,Kt=(r,e,t)=>e in r?_r(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kt=(r,e)=>{for(var t in e||(e={}))Rr.call(e,t)&&Kt(r,t,e[t]);if(Mt)for(var t of Mt(e))Tr.call(e,t)&&Kt(r,t,e[t]);return r};class Z extends n{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=W,this.events=new events.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||le;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:e?.logger||Je_logger}));this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.heartbeat=new cjs.HeartBeat,this.crypto=new It(this,this.logger,e?.keychain),this.history=new Lt(this,this.logger),this.expirer=new Ft(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new browser.ZP(kt(kt({},He),e?.storageOptions)),this.relayer=new Ot({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ut(this,this.logger),this.verify=new $t(this.projectId||"",this.logger)}static async init(e){const t=new Z(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",i),t}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Sr=Z,G_name="client",G_logger="error",te="Proposal expired",dist_index_es_C=time_dist_cjs.SEVEN_DAYS,index_es_O={wc_sessionPropose:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1104},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1106},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1112},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1115}}},$={min:time_dist_cjs.FIVE_MINUTES,max:time_dist_cjs.SEVEN_DAYS},index_es_oe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var index_es_Ze=Object.defineProperty,index_es_es=Object.defineProperties,index_es_ss=Object.getOwnPropertyDescriptors,index_es_ae=Object.getOwnPropertySymbols,index_es_ts=Object.prototype.hasOwnProperty,index_es_is=Object.prototype.propertyIsEnumerable,index_es_ce=(d,n,e)=>n in d?index_es_Ze(d,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[n]=e,index_es_w=(d,n)=>{for(var e in n||(n={}))index_es_ts.call(n,e)&&index_es_ce(d,e,n[e]);if(index_es_ae)for(var e of index_es_ae(n))index_es_is.call(n,e)&&index_es_ce(d,e,n[e]);return d},index_es_H=(d,n)=>index_es_es(d,index_es_ss(n));class index_es_ns extends S{constructor(n){super(n),this.name="engine",this.events=new(events_default()),this.initialized=!1,this.ignoredPayloadTypes=[index_es.rV],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(index_es_O)}),this.initialized=!0)},this.connect=async e=>{this.isInitialized();const s=index_es_H(index_es_w({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:t,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:o,relays:a}=s;let h,l=t,I=!1;if(l&&(I=this.client.core.pairing.pairings.get(l).active),!l||!I){const{topic:v,uri:y}=await this.client.core.pairing.create();l=v,h=y}const g=await this.client.core.crypto.generateKeyPair(),E=index_es_w({requiredNamespaces:i,optionalNamespaces:r,relays:a??[{protocol:"irn"}],proposer:{publicKey:g,metadata:this.client.metadata}},o&&{sessionProperties:o}),{reject:m,resolve:V,done:U}=(0,index_es.H1)(time_dist_cjs.FIVE_MINUTES,te);if(this.events.once((0,index_es.E0)("session_connect"),(async({error:v,session:y})=>{if(v)m(v);else if(y){y.self.publicKey=g;const F=index_es_H(index_es_w({},y),{requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces});await this.client.session.set(y.topic,F),await this.setExpiry(y.topic,y.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:y.peer.metadata}),V(F)}})),!l){const{message:v}=(0,index_es.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(v)}const A=await this.sendRequest(l,"wc_sessionPropose",E),le=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES);return await this.setProposal(A,index_es_w({id:A,expiry:le},E)),{uri:h,approval:U}},this.pair=async e=>(this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{this.isInitialized(),await this.isValidApprove(e);const{id:s,relayProtocol:t,namespaces:i,sessionProperties:r}=e,o=this.client.proposal.get(s);let{pairingTopic:a,proposer:l,requiredNamespaces:h,optionalNamespaces:I}=o;a=a||"",(0,index_es.L5)(h)||(h=(0,index_es.fc)(i,"approve()"));const g=await this.client.core.crypto.generateKeyPair(),E=l.publicKey,m=await this.client.core.crypto.generateSharedKey(g,E);a&&s&&(await this.client.core.pairing.updateMetadata({topic:a,metadata:l.metadata}),await this.sendResult(s,a,{relay:{protocol:t??"irn"},responderPublicKey:g}),await this.client.proposal.delete(s,(0,index_es.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:a}));const V=index_es_w({relay:{protocol:t??"irn"},namespaces:i,requiredNamespaces:h,optionalNamespaces:I,pairingTopic:a,controller:{publicKey:g,metadata:this.client.metadata},expiry:(0,index_es.gn)(dist_index_es_C)},r&&{sessionProperties:r});await this.client.core.relayer.subscribe(m),await this.sendRequest(m,"wc_sessionSettle",V);const U=index_es_H(index_es_w({},V),{topic:m,pairingTopic:a,acknowledged:!1,self:V.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:g});return await this.client.session.set(m,U),await this.setExpiry(m,(0,index_es.gn)(dist_index_es_C)),{topic:m,acknowledged:()=>new Promise((A=>setTimeout((()=>A(this.client.session.get(m))),500)))}},this.reject=async e=>{this.isInitialized(),await this.isValidReject(e);const{id:s,reason:t}=e,{pairingTopic:i}=this.client.proposal.get(s);i&&(await this.sendError(s,i,t),await this.client.proposal.delete(s,(0,index_es.D6)("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.isValidUpdate(e);const{topic:s,namespaces:t}=e,i=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:t}),{done:r,resolve:o,reject:a}=(0,index_es.H1)();return this.events.once((0,index_es.E0)("session_update",i),(({error:l})=>{l?a(l):o()})),await this.client.session.update(s,{namespaces:t}),{acknowledged:r}},this.extend=async e=>{this.isInitialized(),await this.isValidExtend(e);const{topic:s}=e,t=await this.sendRequest(s,"wc_sessionExtend",{}),{done:i,resolve:r,reject:o}=(0,index_es.H1)();return this.events.once((0,index_es.E0)("session_extend",t),(({error:a})=>{a?o(a):r()})),await this.setExpiry(s,(0,index_es.gn)(dist_index_es_C)),{acknowledged:i}},this.request=async e=>{this.isInitialized(),await this.isValidRequest(e);const{chainId:s,request:t,topic:i,expiry:r}=e,o=await this.sendRequest(i,"wc_sessionRequest",{request:t,chainId:s},r),{done:a,resolve:l,reject:h}=(0,index_es.H1)(r);this.events.once((0,index_es.E0)("session_request",o),(({error:g,result:E})=>{g?h(g):l(E)})),this.client.events.emit("session_request_sent",{topic:i,request:t,chainId:s,id:o});const I=await this.client.core.storage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");return(0,index_es.Hh)({id:o,topic:i,wcDeepLink:I}),await a()},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:s,response:t}=e,{id:i}=t;isJsonRpcResult(t)?await this.sendResult(i,s,t.result):isJsonRpcError(t)&&await this.sendError(i,s,t.error),this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:s}=e;if(this.client.session.keys.includes(s)){const t=await this.sendRequest(s,"wc_sessionPing",{}),{done:i,resolve:r,reject:o}=(0,index_es.H1)();this.events.once((0,index_es.E0)("session_ping",t),(({error:a})=>{a?o(a):r()})),await i()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async e=>{this.isInitialized(),await this.isValidEmit(e);const{topic:s,event:t,chainId:i}=e;await this.sendRequest(s,"wc_sessionEvent",{event:t,chainId:i})},this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:s}=e;if(this.client.session.keys.includes(s)){const t=getBigIntRpcId().toString();let i;const r=o=>{o?.id.toString()===t&&(this.client.core.relayer.events.removeListener(index_es_g_message_ack,r),i())};await Promise.all([new Promise((o=>{i=o,this.client.core.relayer.on(index_es_g_message_ack,r)})),this.sendRequest(s,"wc_sessionDelete",(0,index_es.D6)("USER_DISCONNECTED"),void 0,t)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((s=>(0,index_es.Ih)(s,e)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const s=this.client.core.pairing.pairings.get(e.pairingTopic),t=this.client.core.pairing.pairings.getAll().filter((i=>{var r,o;return(null==(r=i.peerMetadata)?void 0:r.url)&&(null==(o=i.peerMetadata)?void 0:o.url)===e.peer.metadata.url&&i.topic&&i.topic!==s.topic}));if(0===t.length)return;this.client.logger.info(`Cleaning up ${t.length} duplicate pairing(s)`),await Promise.all(t.map((i=>this.client.core.pairing.disconnect({topic:i.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(e,s)=>{const{self:t}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),this.client.session.delete(e,(0,index_es.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(t.publicKey)&&await this.client.core.crypto.deleteKeyPair(t.publicKey),this.client.core.crypto.keychain.has(e)&&await this.client.core.crypto.deleteSymKey(e),s||this.client.core.expirer.del(e)},this.deleteProposal=async(e,s)=>{await Promise.all([this.client.proposal.delete(e,(0,index_es.D6)("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,s,t=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,s),t?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,s)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:s}),this.client.core.expirer.set(e,s)},this.setProposal=async(e,s)=>{await this.client.proposal.set(e,s),this.client.core.expirer.set(e,s.expiry)},this.setPendingSessionRequest=async e=>{const s=index_es_O.wc_sessionRequest.req.ttl,{id:t,topic:i,params:r}=e;await this.client.pendingRequest.set(t,{id:t,topic:i,params:r}),s&&this.client.core.expirer.set(t,(0,index_es.gn)(s))},this.sendRequest=async(e,s,t,i,r)=>{const o=formatJsonRpcRequest(s,t);if((0,index_es.jU)()&&index_es_oe.includes(s)){const h=(0,index_es.rj)(JSON.stringify(o));await this.client.core.verify.register({attestationId:h})}const a=await this.client.core.crypto.encode(e,o),l=index_es_O[s].req;return i&&(l.ttl=i),r&&(l.id=r),this.client.core.history.set(e,o),this.client.core.relayer.publish(e,a,l),o.id},this.sendResult=async(e,s,t)=>{const i=formatJsonRpcResult(e,t),r=await this.client.core.crypto.encode(s,i),o=await this.client.core.history.get(s,e),a=index_es_O[o.request.method].res;this.client.core.relayer.publish(s,r,a),await this.client.core.history.resolve(i)},this.sendError=async(e,s,t)=>{const i=formatJsonRpcError(e,t),r=await this.client.core.crypto.encode(s,i),o=await this.client.core.history.get(s,e),a=index_es_O[o.request.method].res;this.client.core.relayer.publish(s,r,a),await this.client.core.history.resolve(i)},this.cleanup=async()=>{const e=[],s=[];this.client.session.getAll().forEach((t=>{(0,index_es.Bw)(t.expiry)&&e.push(t.topic)})),this.client.proposal.getAll().forEach((t=>{(0,index_es.Bw)(t.expiry)&&s.push(t.id)})),await Promise.all([...e.map((t=>this.deleteSession(t))),...s.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=e=>{const{topic:s,payload:t}=e,i=t.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(s,t);case"wc_sessionSettle":return this.onSessionSettleRequest(s,t);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,t);case"wc_sessionExtend":return this.onSessionExtendRequest(s,t);case"wc_sessionPing":return this.onSessionPingRequest(s,t);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,t);case"wc_sessionRequest":return this.onSessionRequest(s,t);case"wc_sessionEvent":return this.onSessionEventRequest(s,t);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async e=>{const{topic:s,payload:t}=e,i=(await this.client.core.history.get(s,t.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(s,t);case"wc_sessionSettle":return this.onSessionSettleResponse(s,t);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,t);case"wc_sessionExtend":return this.onSessionExtendResponse(s,t);case"wc_sessionPing":return this.onSessionPingResponse(s,t);case"wc_sessionRequest":return this.onSessionRequestResponse(s,t);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:s}=e,{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(t)},this.onSessionProposeRequest=async(e,s)=>{const{params:t,id:i}=s;try{this.isValidConnect(index_es_w({},s.params));const r=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES),o=index_es_w({id:i,pairingTopic:e,expiry:r},t);await this.setProposal(i,o);const a=(0,index_es.rj)(JSON.stringify(s)),l=await this.getVerifyContext(a,o.proposer.metadata);this.client.events.emit("session_proposal",{id:i,params:o,verifyContext:l})}catch(r){await this.sendError(i,e,r),this.client.logger.error(r)}},this.onSessionProposeResponse=async(e,s)=>{const{id:t}=s;if(isJsonRpcResult(s)){const{result:i}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const r=this.client.proposal.get(t);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:r});const o=r.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const l=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const h=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:e})}else isJsonRpcError(s)&&(await this.client.proposal.delete(t,(0,index_es.D6)("USER_DISCONNECTED")),this.events.emit((0,index_es.E0)("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidSessionSettleRequest(i);const{relay:r,controller:o,expiry:a,namespaces:l,requiredNamespaces:h,optionalNamespaces:I,sessionProperties:g,pairingTopic:E}=s.params,m=index_es_w({topic:e,relay:r,expiry:a,namespaces:l,acknowledged:!0,pairingTopic:E,requiredNamespaces:h,optionalNamespaces:I,controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},g&&{sessionProperties:g});await this.sendResult(s.id,e,!0),this.events.emit((0,index_es.E0)("session_connect"),{session:m}),this.cleanupDuplicatePairings(m)}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.onSessionSettleResponse=async(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,index_es.E0)("session_approve",t),{})):isJsonRpcError(s)&&(await this.client.session.delete(e,(0,index_es.D6)("USER_DISCONNECTED")),this.events.emit((0,index_es.E0)("session_approve",t),{error:s.error}))},this.onSessionUpdateRequest=async(e,s)=>{const{params:t,id:i}=s;try{this.isValidUpdate(index_es_w({topic:e},t)),await this.client.session.update(e,{namespaces:t.namespaces}),await this.sendResult(i,e,!0),this.client.events.emit("session_update",{id:i,topic:e,params:t})}catch(r){await this.sendError(i,e,r),this.client.logger.error(r)}},this.onSessionUpdateResponse=(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_update",t),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_update",t),{error:s.error})},this.onSessionExtendRequest=async(e,s)=>{const{id:t}=s;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,index_es.gn)(dist_index_es_C)),await this.sendResult(t,e,!0),this.client.events.emit("session_extend",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_extend",t),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_extend",t),{error:s.error})},this.onSessionPingRequest=async(e,s)=>{const{id:t}=s;try{this.isValidPing({topic:e}),await this.sendResult(t,e,!0),this.client.events.emit("session_ping",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionPingResponse=(e,s)=>{const{id:t}=s;setTimeout((()=>{isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_ping",t),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_ping",t),{error:s.error})}),500)},this.onSessionDeleteRequest=async(e,s)=>{const{id:t}=s;try{this.isValidDisconnect({topic:e,reason:s.params}),await Promise.all([new Promise((i=>{this.client.core.relayer.once(index_es_g_publish,(async()=>{i(await this.deleteSession(e))}))})),this.sendResult(t,e,!0)]),this.client.events.emit("session_delete",{id:t,topic:e})}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidRequest(index_es_w({topic:e},i)),await this.setPendingSessionRequest({id:t,topic:e,params:i});const r=(0,index_es.rj)(JSON.stringify(s)),o=this.client.session.get(e),a=await this.getVerifyContext(r,o.peer.metadata);this.client.events.emit("session_request",{id:t,topic:e,params:i,verifyContext:a})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.onSessionRequestResponse=(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_request",t),{result:s.result}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_request",t),{error:s.error})},this.onSessionEventRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidEmit(index_es_w({topic:e},i)),this.client.events.emit("session_event",{id:t,topic:e,params:i})}catch(r){await this.sendError(t,e,r),this.client.logger.error(r)}},this.isValidConnect=async e=>{if(!(0,index_es.EJ)(e)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(a)}const{pairingTopic:s,requiredNamespaces:t,optionalNamespaces:i,sessionProperties:r,relays:o}=e;if((0,index_es.o8)(s)||await this.isValidPairingTopic(s),!(0,index_es.PM)(o,!0)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(a)}!(0,index_es.o8)(t)&&0!==(0,index_es.L5)(t)&&this.validateNamespaces(t,"requiredNamespaces"),!(0,index_es.o8)(i)&&0!==(0,index_es.L5)(i)&&this.validateNamespaces(i,"optionalNamespaces"),(0,index_es.o8)(r)||this.validateSessionProps(r,"sessionProperties")},this.validateNamespaces=(e,s)=>{const t=(0,index_es.n)(e,"connect()",s);if(t)throw new Error(t.message)},this.isValidApprove=async e=>{if(!(0,index_es.EJ)(e))throw new Error((0,index_es.Z7)("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:s,namespaces:t,relayProtocol:i,sessionProperties:r}=e;await this.isValidProposalId(s);const o=this.client.proposal.get(s),a=(0,index_es.in)(t,"approve()");if(a)throw new Error(a.message);const l=(0,index_es.rF)(o.requiredNamespaces,t,"approve()");if(l)throw new Error(l.message);if(!(0,index_es.M_)(i,!0)){const{message:h}=(0,index_es.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}(0,index_es.o8)(r)||this.validateSessionProps(r,"sessionProperties")},this.isValidReject=async e=>{if(!(0,index_es.EJ)(e)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(i)}const{id:s,reason:t}=e;if(await this.isValidProposalId(s),!(0,index_es.$t)(t)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(t)}`);throw new Error(i)}},this.isValidSessionSettleRequest=e=>{if(!(0,index_es.EJ)(e)){const{message:l}=(0,index_es.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(l)}const{relay:s,controller:t,namespaces:i,expiry:r}=e;if(!(0,index_es.Z2)(s)){const{message:l}=(0,index_es.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const o=(0,index_es.Dd)(t,"onSessionSettleRequest()");if(o)throw new Error(o.message);const a=(0,index_es.in)(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);if((0,index_es.Bw)(r)){const{message:l}=(0,index_es.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async e=>{if(!(0,index_es.EJ)(e)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(a)}const{topic:s,namespaces:t}=e;await this.isValidSessionTopic(s);const i=this.client.session.get(s),r=(0,index_es.in)(t,"update()");if(r)throw new Error(r.message);const o=(0,index_es.rF)(i.requiredNamespaces,t,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async e=>{if(!(0,index_es.EJ)(e)){const{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionTopic(s)},this.isValidRequest=async e=>{if(!(0,index_es.EJ)(e)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(a)}const{topic:s,request:t,chainId:i,expiry:r}=e;await this.isValidSessionTopic(s);const{namespaces:o}=this.client.session.get(s);if(!(0,index_es.p8)(o,i)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(a)}if(!(0,index_es.hH)(t)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(t)}`);throw new Error(a)}if(!(0,index_es.al)(o,i,t.method)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() method: ${t.method}`);throw new Error(a)}if(r&&!(0,index_es.ON)(r,$)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() expiry: ${r}. Expiry must be a number (in seconds) between ${$.min} and ${$.max}`);throw new Error(a)}},this.isValidRespond=async e=>{if(!(0,index_es.EJ)(e)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(i)}const{topic:s,response:t}=e;if(await this.isValidSessionTopic(s),!(0,index_es.JT)(t)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(t)}`);throw new Error(i)}},this.isValidPing=async e=>{if(!(0,index_es.EJ)(e)){const{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async e=>{if(!(0,index_es.EJ)(e)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(o)}const{topic:s,event:t,chainId:i}=e;await this.isValidSessionTopic(s);const{namespaces:r}=this.client.session.get(s);if(!(0,index_es.p8)(r,i)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!(0,index_es.nf)(t)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(o)}if(!(0,index_es.sI)(r,i,t.name)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(o)}},this.isValidDisconnect=async e=>{if(!(0,index_es.EJ)(e)){const{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(e,s)=>{const t={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const i=await this.client.core.verify.resolve({attestationId:e,verifyUrl:s.verifyUrl});i&&(t.verified.origin=i,t.verified.validation=i===s.url?"VALID":"INVALID")}catch(i){this.client.logger.error(i)}return this.client.logger.info(`Verify context: ${JSON.stringify(t)}`),t},this.validateSessionProps=(e,s)=>{Object.values(e).forEach((t=>{if(!(0,index_es.M_)(t,!1)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(i)}}))}}isInitialized(){if(!this.initialized){const{message:n}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){this.client.core.relayer.on(index_es_g_message,(async n=>{const{topic:e,message:s}=n;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const t=await this.client.core.crypto.decode(e,s);isJsonRpcRequest(t)?(this.client.core.history.set(e,t),this.onRelayEventRequest({topic:e,payload:t})):isJsonRpcResponse(t)?(await this.client.core.history.resolve(t),await this.onRelayEventResponse({topic:e,payload:t}),this.client.core.history.delete(e,t.id)):this.onRelayEventUnknownPayload({topic:e,payload:t})}))}registerExpirerEvents(){this.client.core.expirer.on(w_expired,(async n=>{const{topic:e,id:s}=(0,index_es.iP)(n.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,(0,index_es.Z7)("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession(e,!0),this.client.events.emit("session_expire",{topic:e})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))}))}isValidPairingTopic(n){if(!(0,index_es.M_)(n,!1)){const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(e)}if((0,index_es.Bw)(this.client.core.pairing.pairings.get(n).expiry)){const{message:e}=(0,index_es.Z7)("EXPIRED",`pairing topic: ${n}`);throw new Error(e)}}async isValidSessionTopic(n){if(!(0,index_es.M_)(n,!1)){const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(e)}if(!this.client.session.keys.includes(n)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(e)}if((0,index_es.Bw)(this.client.session.get(n).expiry)){await this.deleteSession(n);const{message:e}=(0,index_es.Z7)("EXPIRED",`session topic: ${n}`);throw new Error(e)}}async isValidSessionOrPairingTopic(n){if(this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else{if(!this.client.core.pairing.pairings.keys.includes(n)){if((0,index_es.M_)(n,!1)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(e)}{const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(e)}}this.isValidPairingTopic(n)}}async isValidProposalId(n){if(!(0,index_es.Q0)(n)){const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(e)}if(!this.client.proposal.keys.includes(n)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(e)}if((0,index_es.Bw)(this.client.proposal.get(n).expiry)){await this.deleteProposal(n);const{message:e}=(0,index_es.Z7)("EXPIRED",`proposal id: ${n}`);throw new Error(e)}}}class index_es_rs extends Nt{constructor(n,e){super(n,e,"proposal","wc@2:client:"),this.core=n,this.logger=e}}class index_es_os extends Nt{constructor(n,e){super(n,e,"session","wc@2:client:"),this.core=n,this.logger=e}}class index_es_as extends Nt{constructor(n,e){super(n,e,"request","wc@2:client:",(s=>s.id)),this.core=n,this.logger=e}}class index_es_M extends b{constructor(n){super(n),this.protocol="wc",this.version=2,this.name=G_name,this.events=new events.EventEmitter,this.on=(s,t)=>this.events.on(s,t),this.once=(s,t)=>this.events.once(s,t),this.off=(s,t)=>this.events.off(s,t),this.removeListener=(s,t)=>this.events.removeListener(s,t),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(t){throw this.logger.error(t.message),t}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(t){throw this.logger.error(t.message),t}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(t){throw this.logger.error(t.message),t}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(t){throw this.logger.error(t.message),t}},this.update=async s=>{try{return await this.engine.update(s)}catch(t){throw this.logger.error(t.message),t}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(t){throw this.logger.error(t.message),t}},this.request=async s=>{try{return await this.engine.request(s)}catch(t){throw this.logger.error(t.message),t}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(t){throw this.logger.error(t.message),t}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(t){throw this.logger.error(t.message),t}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(t){throw this.logger.error(t.message),t}},this.find=s=>{try{return this.engine.find(s)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=n?.name||G_name,this.metadata=n?.metadata||(0,index_es.D)();const e=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:n?.logger||G_logger}));this.core=n?.core||new Sr(n),this.logger=(0,dist_cjs.generateChildLogger)(e,this.name),this.session=new index_es_os(this.core,this.logger),this.proposal=new index_es_rs(this.core,this.logger),this.pendingRequest=new index_es_as(this.core,this.logger),this.engine=new index_es_ns(this)}static async init(n){const e=new index_es_M(n);return await e.initialize(),e}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(n){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(n.message),n}}}var browser_ponyfill=__webpack_require__("./node_modules/cross-fetch/dist/browser-ponyfill.js"),browser_ponyfill_default=__webpack_require__.n(browser_ponyfill);const DEFAULT_FETCH_OPTS={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class HttpConnection{constructor(url,disableProviderPing=!1){if(this.url=url,this.disableProviderPing=disableProviderPing,this.events=new events.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(url))throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);this.url=url,this.disableProviderPing=disableProviderPing}get connected(){return this.isAvailable}get connecting(){return this.registering}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async open(url=this.url){await this.register(url)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(payload,context){this.isAvailable||await this.register();try{const body=safeJsonStringify(payload),res=await browser_ponyfill_default()(this.url,Object.assign(Object.assign({},DEFAULT_FETCH_OPTS),{body})),data=await res.json();this.onPayload({data})}catch(e){this.onError(payload.id,e)}}async register(url=this.url){if(!isHttpUrl(url))throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);if(this.registering){const currentMaxListeners=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=currentMaxListeners||this.events.listenerCount("open")>=currentMaxListeners)&&this.events.setMaxListeners(currentMaxListeners+1),new Promise(((resolve,reject)=>{this.events.once("register_error",(error=>{this.resetMaxListeners(),reject(error)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return reject(new Error("HTTP connection is missing or invalid"));resolve()}))}))}this.url=url,this.registering=!0;try{if(!this.disableProviderPing){const body=safeJsonStringify({id:1,jsonrpc:"2.0",method:"test",params:[]});await browser_ponyfill_default()(url,Object.assign(Object.assign({},DEFAULT_FETCH_OPTS),{body}))}this.onOpen()}catch(e){const error=this.parseError(e);throw this.events.emit("register_error",error),this.onClose(),error}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;const payload="string"==typeof e.data?esm_safeJsonParse(e.data):e.data;this.events.emit("payload",payload)}onError(id,e){const error=this.parseError(e),payload=formatJsonRpcError(id,error.message||error.toString());this.events.emit("payload",payload)}parseError(e,url=this.url){return parseConnectionError(e,url,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const jsonrpc_http_connection_dist_esm=HttpConnection,Ia="wc@2:universal_provider:",index_es_ot_DEFAULT_CHAIN_CHANGED="default_chain_changed";var index_es_pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:{},index_es_$i={exports:{}};!function(C,u){(function(){var i,F="Expected a function",Gt="__lodash_hash_undefined__",At="__lodash_placeholder__",qn=128,ct=1/0,kn=9007199254740991,Hn=4294967295,Ma=[["ary",qn],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],yt="[object Arguments]",ve="[object Array]",Kt="[object Boolean]",Yt="[object Date]",_e="[object Error]",me="[object Function]",Bi="[object GeneratorFunction]",yn="[object Map]",Zt="[object Number]",Bn="[object Object]",Gi="[object Promise]",Jt="[object RegExp]",Sn="[object Set]",Xt="[object String]",we="[object Symbol]",Qt="[object WeakMap]",Vt="[object ArrayBuffer]",St="[object DataView]",dr="[object Float32Array]",gr="[object Float64Array]",vr="[object Int8Array]",_r="[object Int16Array]",mr="[object Int32Array]",wr="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Ar="[object Uint16Array]",Cr="[object Uint32Array]",Za=/\b__p \+= '';/g,Ja=/\b(__p \+=) '' \+/g,Xa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zi=/&(?:amp|lt|gt|quot|#39);/g,Ki=/[&<>"']/g,Qa=RegExp(zi.source),Va=RegExp(Ki.source),ka=/<%-([\s\S]+?)%>/g,ja=/<%([\s\S]+?)%>/g,Yi=/<%=([\s\S]+?)%>/g,no=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,to=/^\w*$/,eo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,ro=RegExp(Ir.source),xr=/^\s+/,io=/\s/,so=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,uo=/\{\n\/\* \[wrapped with (.+)\] \*/,ao=/,? & /,oo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fo=/[()=,{}\[\]\/\s]/,co=/\\(\\)?/g,ho=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zi=/\w*$/,lo=/^[-+]0x[0-9a-f]+$/i,po=/^0b[01]+$/i,go=/^\[object .+?Constructor\]$/,vo=/^0o[0-7]+$/i,_o=/^(?:0|[1-9]\d*)$/,mo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pe=/($^)/,wo=/['\n\r\u2028\u2029\\]/g,Ae="\\ud800-\\udfff",Ji="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xi="\\u2700-\\u27bf",Qi="a-z\\xdf-\\xf6\\xf8-\\xff",Vi="A-Z\\xc0-\\xd6\\xd8-\\xde",ki="\\ufe0e\\ufe0f",ji="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Er="['’]",So="["+Ae+"]",ns="["+ji+"]",Ce="["+Ji+"]",ts="\\d+",Oo="["+Xi+"]",es="["+Qi+"]",rs="[^"+Ae+ji+ts+Xi+Qi+Vi+"]",yr="\\ud83c[\\udffb-\\udfff]",is="[^"+Ae+"]",Sr="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+Vi+"]",us="(?:"+es+"|"+rs+")",bo="(?:"+Ot+"|"+rs+")",as="(?:['’](?:d|ll|m|re|s|t|ve))?",os="(?:['’](?:D|LL|M|RE|S|T|VE))?",fs="(?:"+Ce+"|"+yr+")"+"?",cs="["+ki+"]?",hs=cs+fs+("(?:\\u200d(?:"+[is,Sr,Or].join("|")+")"+cs+fs+")*"),No="(?:"+[Oo,Sr,Or].join("|")+")"+hs,Ho="(?:"+[is+Ce+"?",Ce,Sr,Or,So].join("|")+")",$o=RegExp(Er,"g"),Uo=RegExp(Ce,"g"),Rr=RegExp(yr+"(?="+yr+")|"+Ho+hs,"g"),Wo=RegExp([Ot+"?"+es+"+"+as+"(?="+[ns,Ot,"$"].join("|")+")",bo+"+"+os+"(?="+[ns,Ot+us,"$"].join("|")+")",Ot+"?"+us+"+"+as,Ot+"+"+os,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ts,No].join("|"),"g"),Fo=RegExp("[\\u200d"+Ae+Ji+ki+"]"),Mo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bo=-1,B={};B[dr]=B[gr]=B[vr]=B[_r]=B[mr]=B[wr]=B[Pr]=B[Ar]=B[Cr]=!0,B[yt]=B[ve]=B[Vt]=B[Kt]=B[St]=B[Yt]=B[_e]=B[me]=B[yn]=B[Zt]=B[Bn]=B[Jt]=B[Sn]=B[Xt]=B[Qt]=!1;var q={};q[yt]=q[ve]=q[Vt]=q[St]=q[Kt]=q[Yt]=q[dr]=q[gr]=q[vr]=q[_r]=q[mr]=q[yn]=q[Zt]=q[Bn]=q[Jt]=q[Sn]=q[Xt]=q[we]=q[wr]=q[Pr]=q[Ar]=q[Cr]=!0,q[_e]=q[me]=q[Qt]=!1;var Yo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zo=parseFloat,Jo=parseInt,ls="object"==typeof index_es_pe&&index_es_pe&&index_es_pe.Object===Object&&index_es_pe,Xo="object"==typeof self&&self&&self.Object===Object&&self,k=ls||Xo||Function("return this")(),br=u&&!u.nodeType&&u,ht=br&&C&&!C.nodeType&&C,ps=ht&&ht.exports===br,Tr=ps&&ls.process,_n=function(){try{return ht&&ht.require&&ht.require("util").types||Tr&&Tr.binding&&Tr.binding("util")}catch{}}(),ds=_n&&_n.isArrayBuffer,gs=_n&&_n.isDate,vs=_n&&_n.isMap,_s=_n&&_n.isRegExp,ms=_n&&_n.isSet,ws=_n&&_n.isTypedArray;function cn(h,g,d){switch(d.length){case 0:return h.call(g);case 1:return h.call(g,d[0]);case 2:return h.call(g,d[0],d[1]);case 3:return h.call(g,d[0],d[1],d[2])}return h.apply(g,d)}function Qo(h,g,d,P){for(var S=-1,$=null==h?0:h.length;++S<$;){var X=h[S];g(P,X,d(X),h)}return P}function mn(h,g){for(var d=-1,P=null==h?0:h.length;++d<P&&!1!==g(h[d],d,h););return h}function Vo(h,g){for(var d=null==h?0:h.length;d--&&!1!==g(h[d],d,h););return h}function Ps(h,g){for(var d=-1,P=null==h?0:h.length;++d<P;)if(!g(h[d],d,h))return!1;return!0}function jn(h,g){for(var d=-1,P=null==h?0:h.length,S=0,$=[];++d<P;){var X=h[d];g(X,d,h)&&($[S++]=X)}return $}function Ie(h,g){return!!(null==h?0:h.length)&&Rt(h,g,0)>-1}function Lr(h,g,d){for(var P=-1,S=null==h?0:h.length;++P<S;)if(d(g,h[P]))return!0;return!1}function G(h,g){for(var d=-1,P=null==h?0:h.length,S=Array(P);++d<P;)S[d]=g(h[d],d,h);return S}function nt(h,g){for(var d=-1,P=g.length,S=h.length;++d<P;)h[S+d]=g[d];return h}function Dr(h,g,d,P){var S=-1,$=null==h?0:h.length;for(P&&$&&(d=h[++S]);++S<$;)d=g(d,h[S],S,h);return d}function ko(h,g,d,P){var S=null==h?0:h.length;for(P&&S&&(d=h[--S]);S--;)d=g(d,h[S],S,h);return d}function Nr(h,g){for(var d=-1,P=null==h?0:h.length;++d<P;)if(g(h[d],d,h))return!0;return!1}var jo=Hr("length");function As(h,g,d){var P;return d(h,(function(S,$,X){if(g(S,$,X))return P=$,!1})),P}function xe(h,g,d,P){for(var S=h.length,$=d+(P?1:-1);P?$--:++$<S;)if(g(h[$],$,h))return $;return-1}function Rt(h,g,d){return g==g?function df(h,g,d){for(var P=d-1,S=h.length;++P<S;)if(h[P]===g)return P;return-1}(h,g,d):xe(h,Cs,d)}function ef(h,g,d,P){for(var S=d-1,$=h.length;++S<$;)if(P(h[S],g))return S;return-1}function Cs(h){return h!=h}function Is(h,g){var d=null==h?0:h.length;return d?Ur(h,g)/d:NaN}function Hr(h){return function(g){return null==g?i:g[h]}}function $r(h){return function(g){return null==h?i:h[g]}}function xs(h,g,d,P,S){return S(h,(function($,X,M){d=P?(P=!1,$):g(d,$,X,M)})),d}function Ur(h,g){for(var d,P=-1,S=h.length;++P<S;){var $=g(h[P]);$!==i&&(d=d===i?$:d+$)}return d}function Wr(h,g){for(var d=-1,P=Array(h);++d<h;)P[d]=g(d);return P}function Es(h){return h&&h.slice(0,Rs(h)+1).replace(xr,"")}function hn(h){return function(g){return h(g)}}function Fr(h,g){return G(g,(function(d){return h[d]}))}function kt(h,g){return h.has(g)}function ys(h,g){for(var d=-1,P=h.length;++d<P&&Rt(g,h[d],0)>-1;);return d}function Ss(h,g){for(var d=h.length;d--&&Rt(g,h[d],0)>-1;);return d}var af=$r({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),of=$r({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ff(h){return"\\"+Yo[h]}function bt(h){return Fo.test(h)}function Mr(h){var g=-1,d=Array(h.size);return h.forEach((function(P,S){d[++g]=[S,P]})),d}function Os(h,g){return function(d){return h(g(d))}}function tt(h,g){for(var d=-1,P=h.length,S=0,$=[];++d<P;){var X=h[d];(X===g||X===At)&&(h[d]=At,$[S++]=d)}return $}function Ee(h){var g=-1,d=Array(h.size);return h.forEach((function(P){d[++g]=P})),d}function Tt(h){return bt(h)?function _f(h){for(var g=Rr.lastIndex=0;Rr.test(h);)++g;return g}(h):jo(h)}function On(h){return bt(h)?function mf(h){return h.match(Rr)||[]}(h):function nf(h){return h.split("")}(h)}function Rs(h){for(var g=h.length;g--&&io.test(h.charAt(g)););return g}var vf=$r({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Lt=function h(g){var d=(g=null==g?k:Lt.defaults(k.Object(),g,Lt.pick(k,qo))).Array,P=g.Date,S=g.Error,$=g.Function,X=g.Math,M=g.Object,qr=g.RegExp,Af=g.String,wn=g.TypeError,ye=d.prototype,Cf=$.prototype,Dt=M.prototype,Se=g["__core-js_shared__"],Oe=Cf.toString,W=Dt.hasOwnProperty,If=0,bs=function(){var n=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Re=Dt.toString,xf=Oe.call(M),Ef=k._,yf=qr("^"+Oe.call(W).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=ps?g.Buffer:i,et=g.Symbol,Te=g.Uint8Array,Ts=be?be.allocUnsafe:i,Le=Os(M.getPrototypeOf,M),Ls=M.create,Ds=Dt.propertyIsEnumerable,De=ye.splice,Ns=et?et.isConcatSpreadable:i,jt=et?et.iterator:i,lt=et?et.toStringTag:i,Ne=function(){try{var n=_t(M,"defineProperty");return n({},"",{}),n}catch{}}(),Sf=g.clearTimeout!==k.clearTimeout&&g.clearTimeout,Of=P&&P.now!==k.Date.now&&P.now,Rf=g.setTimeout!==k.setTimeout&&g.setTimeout,He=X.ceil,$e=X.floor,Br=M.getOwnPropertySymbols,bf=be?be.isBuffer:i,Hs=g.isFinite,Tf=ye.join,Lf=Os(M.keys,M),Q=X.max,nn=X.min,Df=P.now,Nf=g.parseInt,$s=X.random,Hf=ye.reverse,Gr=_t(g,"DataView"),ne=_t(g,"Map"),zr=_t(g,"Promise"),Nt=_t(g,"Set"),te=_t(g,"WeakMap"),ee=_t(M,"create"),Ue=te&&new te,Ht={},$f=mt(Gr),Uf=mt(ne),Wf=mt(zr),Ff=mt(Nt),Mf=mt(te),We=et?et.prototype:i,re=We?We.valueOf:i,Us=We?We.toString:i;function a(n){if(K(n)&&!O(n)&&!(n instanceof N)){if(n instanceof Pn)return n;if(W.call(n,"__wrapped__"))return Wu(n)}return new Pn(n)}var $t=function(){function n(){}return function(t){if(!z(t))return{};if(Ls)return Ls(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function Fe(){}function Pn(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function N(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Hn,this.__views__=[]}function pt(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Gn(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function zn(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function dt(n){var t=-1,e=null==n?0:n.length;for(this.__data__=new zn;++t<e;)this.add(n[t])}function Rn(n){var t=this.__data__=new Gn(n);this.size=t.size}function Ws(n,t){var e=O(n),r=!e&&wt(n),s=!e&&!r&&at(n),o=!e&&!r&&!s&&Mt(n),f=e||r||s||o,c=f?Wr(n.length,Af):[],l=c.length;for(var v in n)(t||W.call(n,v))&&(!f||!("length"==v||s&&("offset"==v||"parent"==v)||o&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||Jn(v,l)))&&c.push(v);return c}function Fs(n){var t=n.length;return t?n[ti(0,t-1)]:i}function lc(n,t){return je(un(n),gt(t,0,n.length))}function pc(n){return je(un(n))}function Kr(n,t,e){(e!==i&&!bn(n[t],e)||e===i&&!(t in n))&&Kn(n,t,e)}function ie(n,t,e){var r=n[t];(!W.call(n,t)||!bn(r,e)||e===i&&!(t in n))&&Kn(n,t,e)}function Me(n,t){for(var e=n.length;e--;)if(bn(n[e][0],t))return e;return-1}function dc(n,t,e,r){return rt(n,(function(s,o,f){t(r,s,e(s),f)})),r}function Ms(n,t){return n&&Un(t,V(t),n)}function Kn(n,t,e){"__proto__"==t&&Ne?Ne(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Yr(n,t){for(var e=-1,r=t.length,s=d(r),o=null==n;++e<r;)s[e]=o?i:yi(n,t[e]);return s}function gt(n,t,e){return n==n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function An(n,t,e,r,s,o){var f,c=1&t,l=2&t,v=4&t;if(e&&(f=s?e(n,r,s,o):e(n)),f!==i)return f;if(!z(n))return n;var _=O(n);if(_){if(f=function rh(n){var t=n.length,e=new n.constructor(t);return t&&"string"==typeof n[0]&&W.call(n,"index")&&(e.index=n.index,e.input=n.input),e}(n),!c)return un(n,f)}else{var m=tn(n),w=m==me||m==Bi;if(at(n))return cu(n,c);if(m==Bn||m==yt||w&&!s){if(f=l||w?{}:Ru(n),!c)return l?function Yc(n,t){return Un(n,Su(n),t)}(n,function gc(n,t){return n&&Un(t,on(t),n)}(f,n)):function Kc(n,t){return Un(n,gi(n),t)}(n,Ms(f,n))}else{if(!q[m])return s?n:{};f=function ih(n,t,e){var r=n.constructor;switch(t){case Vt:return oi(n);case Kt:case Yt:return new r(+n);case St:return function qc(n,t){var e=t?oi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}(n,e);case dr:case gr:case vr:case _r:case mr:case wr:case Pr:case Ar:case Cr:return hu(n,e);case yn:return new r;case Zt:case Xt:return new r(n);case Jt:return function Bc(n){var t=new n.constructor(n.source,Zi.exec(n));return t.lastIndex=n.lastIndex,t}(n);case Sn:return new r;case we:return function Gc(n){return re?M(re.call(n)):{}}(n)}}(n,m,c)}}o||(o=new Rn);var A=o.get(n);if(A)return A;o.set(n,f),ia(n)?n.forEach((function(y){f.add(An(y,t,e,y,n,o))})):ea(n)&&n.forEach((function(y,L){f.set(L,An(y,t,e,L,n,o))}));var b=_?i:(v?l?li:hi:l?on:V)(n);return mn(b||n,(function(y,L){b&&(y=n[L=y]),ie(f,L,An(y,t,e,L,n,o))})),f}function qs(n,t,e){var r=e.length;if(null==n)return!r;for(n=M(n);r--;){var s=e[r],o=t[s],f=n[s];if(f===i&&!(s in n)||!o(f))return!1}return!0}function Bs(n,t,e){if("function"!=typeof n)throw new wn(F);return he((function(){n.apply(i,e)}),t)}function se(n,t,e,r){var s=-1,o=Ie,f=!0,c=n.length,l=[],v=t.length;if(!c)return l;e&&(t=G(t,hn(e))),r?(o=Lr,f=!1):t.length>=200&&(o=kt,f=!1,t=new dt(t));n:for(;++s<c;){var _=n[s],m=null==e?_:e(_);if(_=r||0!==_?_:0,f&&m==m){for(var w=v;w--;)if(t[w]===m)continue n;l.push(_)}else o(t,m,r)||l.push(_)}return l}a.templateSettings={escape:ka,evaluate:ja,interpolate:Yi,variable:"",imports:{_:a}},a.prototype=Fe.prototype,a.prototype.constructor=a,Pn.prototype=$t(Fe.prototype),Pn.prototype.constructor=Pn,N.prototype=$t(Fe.prototype),N.prototype.constructor=N,pt.prototype.clear=function zf(){this.__data__=ee?ee(null):{},this.size=0},pt.prototype.delete=function Kf(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},pt.prototype.get=function Yf(n){var t=this.__data__;if(ee){var e=t[n];return e===Gt?i:e}return W.call(t,n)?t[n]:i},pt.prototype.has=function Zf(n){var t=this.__data__;return ee?t[n]!==i:W.call(t,n)},pt.prototype.set=function Jf(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=ee&&t===i?Gt:t,this},Gn.prototype.clear=function Xf(){this.__data__=[],this.size=0},Gn.prototype.delete=function Qf(n){var t=this.__data__,e=Me(t,n);return!(e<0)&&(e==t.length-1?t.pop():De.call(t,e,1),--this.size,!0)},Gn.prototype.get=function Vf(n){var t=this.__data__,e=Me(t,n);return e<0?i:t[e][1]},Gn.prototype.has=function kf(n){return Me(this.__data__,n)>-1},Gn.prototype.set=function jf(n,t){var e=this.__data__,r=Me(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this},zn.prototype.clear=function nc(){this.size=0,this.__data__={hash:new pt,map:new(ne||Gn),string:new pt}},zn.prototype.delete=function tc(n){var t=ke(this,n).delete(n);return this.size-=t?1:0,t},zn.prototype.get=function ec(n){return ke(this,n).get(n)},zn.prototype.has=function rc(n){return ke(this,n).has(n)},zn.prototype.set=function ic(n,t){var e=ke(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this},dt.prototype.add=dt.prototype.push=function sc(n){return this.__data__.set(n,Gt),this},dt.prototype.has=function uc(n){return this.__data__.has(n)},Rn.prototype.clear=function ac(){this.__data__=new Gn,this.size=0},Rn.prototype.delete=function oc(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e},Rn.prototype.get=function fc(n){return this.__data__.get(n)},Rn.prototype.has=function cc(n){return this.__data__.has(n)},Rn.prototype.set=function hc(n,t){var e=this.__data__;if(e instanceof Gn){var r=e.__data__;if(!ne||r.length<199)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new zn(r)}return e.set(n,t),this.size=e.size,this};var rt=gu($n),Gs=gu(Jr,!0);function _c(n,t){var e=!0;return rt(n,(function(r,s,o){return e=!!t(r,s,o)})),e}function qe(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],f=t(o);if(null!=f&&(c===i?f==f&&!pn(f):e(f,c)))var c=f,l=o}return l}function zs(n,t){var e=[];return rt(n,(function(r,s,o){t(r,s,o)&&e.push(r)})),e}function j(n,t,e,r,s){var o=-1,f=n.length;for(e||(e=uh),s||(s=[]);++o<f;){var c=n[o];t>0&&e(c)?t>1?j(c,t-1,e,r,s):nt(s,c):r||(s[s.length]=c)}return s}var Zr=vu(),Ks=vu(!0);function $n(n,t){return n&&Zr(n,t,V)}function Jr(n,t){return n&&Ks(n,t,V)}function Be(n,t){return jn(t,(function(e){return Xn(n[e])}))}function vt(n,t){for(var e=0,r=(t=st(t,n)).length;null!=n&&e<r;)n=n[Wn(t[e++])];return e&&e==r?n:i}function Ys(n,t,e){var r=t(n);return O(n)?r:nt(r,e(n))}function en(n){return null==n?n===i?"[object Undefined]":"[object Null]":lt&&lt in M(n)?function nh(n){var t=W.call(n,lt),e=n[lt];try{n[lt]=i;var r=!0}catch{}var s=Re.call(n);return r&&(t?n[lt]=e:delete n[lt]),s}(n):function ph(n){return Re.call(n)}(n)}function Xr(n,t){return n>t}function wc(n,t){return null!=n&&W.call(n,t)}function Pc(n,t){return null!=n&&t in M(n)}function Qr(n,t,e){for(var r=e?Lr:Ie,s=n[0].length,o=n.length,f=o,c=d(o),l=1/0,v=[];f--;){var _=n[f];f&&t&&(_=G(_,hn(t))),l=nn(_.length,l),c[f]=!e&&(t||s>=120&&_.length>=120)?new dt(f&&_):i}_=n[0];var m=-1,w=c[0];n:for(;++m<s&&v.length<l;){var A=_[m],E=t?t(A):A;if(A=e||0!==A?A:0,!(w?kt(w,E):r(v,E,e))){for(f=o;--f;){var b=c[f];if(!(b?kt(b,E):r(n[f],E,e)))continue n}w&&w.push(E),v.push(A)}}return v}function ue(n,t,e){var r=null==(n=Du(n,t=st(t,n)))?n:n[Wn(In(t))];return null==r?i:cn(r,n,e)}function Zs(n){return K(n)&&en(n)==yt}function ae(n,t,e,r,s){return n===t||(null==n||null==t||!K(n)&&!K(t)?n!=n&&t!=t:function Ec(n,t,e,r,s,o){var f=O(n),c=O(t),l=f?ve:tn(n),v=c?ve:tn(t);l=l==yt?Bn:l,v=v==yt?Bn:v;var _=l==Bn,m=v==Bn,w=l==v;if(w&&at(n)){if(!at(t))return!1;f=!0,_=!1}if(w&&!_)return o||(o=new Rn),f||Mt(n)?yu(n,t,e,r,s,o):function kc(n,t,e,r,s,o,f){switch(e){case St:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case Vt:return!(n.byteLength!=t.byteLength||!o(new Te(n),new Te(t)));case Kt:case Yt:case Zt:return bn(+n,+t);case _e:return n.name==t.name&&n.message==t.message;case Jt:case Xt:return n==t+"";case yn:var c=Mr;case Sn:var l=1&r;if(c||(c=Ee),n.size!=t.size&&!l)return!1;var v=f.get(n);if(v)return v==t;r|=2,f.set(n,t);var _=yu(c(n),c(t),r,s,o,f);return f.delete(n),_;case we:if(re)return re.call(n)==re.call(t)}return!1}(n,t,l,e,r,s,o);if(!(1&e)){var A=_&&W.call(n,"__wrapped__"),E=m&&W.call(t,"__wrapped__");if(A||E){var b=A?n.value():n,y=E?t.value():t;return o||(o=new Rn),s(b,y,e,r,o)}}return!!w&&(o||(o=new Rn),function jc(n,t,e,r,s,o){var f=1&e,c=hi(n),l=c.length,v=hi(t),_=v.length;if(l!=_&&!f)return!1;for(var m=l;m--;){var w=c[m];if(!(f?w in t:W.call(t,w)))return!1}var A=o.get(n),E=o.get(t);if(A&&E)return A==t&&E==n;var b=!0;o.set(n,t),o.set(t,n);for(var y=f;++m<l;){var L=n[w=c[m]],H=t[w];if(r)var dn=f?r(H,L,w,t,n,o):r(L,H,w,n,t,o);if(!(dn===i?L===H||s(L,H,e,r,o):dn)){b=!1;break}y||(y="constructor"==w)}if(b&&!y){var sn=n.constructor,gn=t.constructor;sn!=gn&&"constructor"in n&&"constructor"in t&&!("function"==typeof sn&&sn instanceof sn&&"function"==typeof gn&&gn instanceof gn)&&(b=!1)}return o.delete(n),o.delete(t),b}(n,t,e,r,s,o))}(n,t,e,r,ae,s))}function Vr(n,t,e,r){var s=e.length,o=s,f=!r;if(null==n)return!o;for(n=M(n);s--;){var c=e[s];if(f&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++s<o;){var l=(c=e[s])[0],v=n[l],_=c[1];if(f&&c[2]){if(v===i&&!(l in n))return!1}else{var m=new Rn;if(r)var w=r(v,_,l,n,t,m);if(!(w===i?ae(_,v,3,r,m):w))return!1}}return!0}function Js(n){return!(!z(n)||function oh(n){return!!bs&&bs in n}(n))&&(Xn(n)?yf:go).test(mt(n))}function Xs(n){return"function"==typeof n?n:null==n?fn:"object"==typeof n?O(n)?ks(n[0],n[1]):Vs(n):_a(n)}function kr(n){if(!ce(n))return Lf(n);var t=[];for(var e in M(n))W.call(n,e)&&"constructor"!=e&&t.push(e);return t}function bc(n){if(!z(n))return function lh(n){var t=[];if(null!=n)for(var e in M(n))t.push(e);return t}(n);var t=ce(n),e=[];for(var r in n)"constructor"==r&&(t||!W.call(n,r))||e.push(r);return e}function jr(n,t){return n<t}function Qs(n,t){var e=-1,r=an(n)?d(n.length):[];return rt(n,(function(s,o,f){r[++e]=t(s,o,f)})),r}function Vs(n){var t=di(n);return 1==t.length&&t[0][2]?Tu(t[0][0],t[0][1]):function(e){return e===n||Vr(e,n,t)}}function ks(n,t){return vi(n)&&bu(t)?Tu(Wn(n),t):function(e){var r=yi(e,n);return r===i&&r===t?Si(e,n):ae(t,r,3)}}function Ge(n,t,e,r,s){n!==t&&Zr(t,(function(o,f){if(s||(s=new Rn),z(o))!function Tc(n,t,e,r,s,o,f){var c=mi(n,e),l=mi(t,e),v=f.get(l);if(v)return void Kr(n,e,v);var _=o?o(c,l,e+"",n,t,f):i,m=_===i;if(m){var w=O(l),A=!w&&at(l),E=!w&&!A&&Mt(l);_=l,w||A||E?O(c)?_=c:Y(c)?_=un(c):A?(m=!1,_=cu(l,!0)):E?(m=!1,_=hu(l,!0)):_=[]:le(l)||wt(l)?(_=c,wt(c)?_=aa(c):(!z(c)||Xn(c))&&(_=Ru(l))):m=!1}m&&(f.set(l,_),s(_,l,r,o,f),f.delete(l)),Kr(n,e,_)}(n,t,f,e,Ge,r,s);else{var c=r?r(mi(n,f),o,f+"",n,t,s):i;c===i&&(c=o),Kr(n,f,c)}}),on)}function js(n,t){var e=n.length;if(e)return Jn(t+=t<0?e:0,e)?n[t]:i}function nu(n,t,e){t=t.length?G(t,(function(o){return O(o)?function(f){return vt(f,1===o.length?o[0]:o)}:o})):[fn];var r=-1;t=G(t,hn(x()));var s=Qs(n,(function(o,f,c){var l=G(t,(function(v){return v(o)}));return{criteria:l,index:++r,value:o}}));return function rf(h,g){var d=h.length;for(h.sort(g);d--;)h[d]=h[d].value;return h}(s,(function(o,f){return function zc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,f=s.length,c=e.length;++r<f;){var l=lu(s[r],o[r]);if(l)return r>=c?l:l*("desc"==e[r]?-1:1)}return n.index-t.index}(o,f,e)}))}function tu(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var f=t[r],c=vt(n,f);e(c,f)&&oe(o,st(f,n),c)}return o}function ni(n,t,e,r){var s=r?ef:Rt,o=-1,f=t.length,c=n;for(n===t&&(t=un(t)),e&&(c=G(n,hn(e)));++o<f;)for(var l=0,v=t[o],_=e?e(v):v;(l=s(c,_,l,r))>-1;)c!==n&&De.call(c,l,1),De.call(n,l,1);return n}function eu(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;Jn(s)?De.call(n,s,1):ii(n,s)}}return n}function ti(n,t){return n+$e($s()*(t-n+1))}function ei(n,t){var e="";if(!n||t<1||t>kn)return e;do{t%2&&(e+=n),(t=$e(t/2))&&(n+=n)}while(t);return e}function T(n,t){return wi(Lu(n,t,fn),n+"")}function Hc(n){return Fs(qt(n))}function $c(n,t){var e=qt(n);return je(e,gt(t,0,e.length))}function oe(n,t,e,r){if(!z(n))return n;for(var s=-1,o=(t=st(t,n)).length,f=o-1,c=n;null!=c&&++s<o;){var l=Wn(t[s]),v=e;if("__proto__"===l||"constructor"===l||"prototype"===l)return n;if(s!=f){var _=c[l];(v=r?r(_,l,c):i)===i&&(v=z(_)?_:Jn(t[s+1])?[]:{})}ie(c,l,v),c=c[l]}return n}var ru=Ue?function(n,t){return Ue.set(n,t),n}:fn,Uc=Ne?function(n,t){return Ne(n,"toString",{configurable:!0,enumerable:!1,value:Ri(t),writable:!0})}:fn;function Wc(n){return je(qt(n))}function Cn(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),(e=e>s?s:e)<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=d(s);++r<s;)o[r]=n[r+t];return o}function Fc(n,t){var e;return rt(n,(function(r,s,o){return!(e=t(r,s,o))})),!!e}function ze(n,t,e){var r=0,s=null==n?r:n.length;if("number"==typeof t&&t==t&&s<=2147483647){for(;r<s;){var o=r+s>>>1,f=n[o];null!==f&&!pn(f)&&(e?f<=t:f<t)?r=o+1:s=o}return s}return ri(n,t,fn,e)}function ri(n,t,e,r){var s=0,o=null==n?0:n.length;if(0===o)return 0;for(var f=(t=e(t))!=t,c=null===t,l=pn(t),v=t===i;s<o;){var _=$e((s+o)/2),m=e(n[_]),w=m!==i,A=null===m,E=m==m,b=pn(m);if(f)var y=r||E;else y=v?E&&(r||w):c?E&&w&&(r||!A):l?E&&w&&!A&&(r||!b):!A&&!b&&(r?m<=t:m<t);y?s=_+1:o=_}return nn(o,4294967294)}function iu(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var f=n[e],c=t?t(f):f;if(!e||!bn(c,l)){var l=c;o[s++]=0===f?0:f}}return o}function su(n){return"number"==typeof n?n:pn(n)?NaN:+n}function ln(n){if("string"==typeof n)return n;if(O(n))return G(n,ln)+"";if(pn(n))return Us?Us.call(n):"";var t=n+"";return"0"==t&&1/n==-ct?"-0":t}function it(n,t,e){var r=-1,s=Ie,o=n.length,f=!0,c=[],l=c;if(e)f=!1,s=Lr;else if(o>=200){var v=t?null:Qc(n);if(v)return Ee(v);f=!1,s=kt,l=new dt}else l=t?[]:c;n:for(;++r<o;){var _=n[r],m=t?t(_):_;if(_=e||0!==_?_:0,f&&m==m){for(var w=l.length;w--;)if(l[w]===m)continue n;t&&l.push(m),c.push(_)}else s(l,m,e)||(l!==c&&l.push(m),c.push(_))}return c}function ii(n,t){return null==(n=Du(n,t=st(t,n)))||delete n[Wn(In(t))]}function uu(n,t,e,r){return oe(n,t,e(vt(n,t)),r)}function Ke(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?Cn(n,r?0:o,r?o+1:s):Cn(n,r?o+1:0,r?s:o)}function au(n,t){var e=n;return e instanceof N&&(e=e.value()),Dr(t,(function(r,s){return s.func.apply(s.thisArg,nt([r],s.args))}),e)}function si(n,t,e){var r=n.length;if(r<2)return r?it(n[0]):[];for(var s=-1,o=d(r);++s<r;)for(var f=n[s],c=-1;++c<r;)c!=s&&(o[s]=se(o[s]||f,n[c],t,e));return it(j(o,1),t,e)}function ou(n,t,e){for(var r=-1,s=n.length,o=t.length,f={};++r<s;){var c=r<o?t[r]:i;e(f,n[r],c)}return f}function ui(n){return Y(n)?n:[]}function ai(n){return"function"==typeof n?n:fn}function st(n,t){return O(n)?n:vi(n,t)?[n]:Uu(U(n))}var Mc=T;function ut(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:Cn(n,t,e)}var fu=Sf||function(n){return k.clearTimeout(n)};function cu(n,t){if(t)return n.slice();var e=n.length,r=Ts?Ts(e):new n.constructor(e);return n.copy(r),r}function oi(n){var t=new n.constructor(n.byteLength);return new Te(t).set(new Te(n)),t}function hu(n,t){var e=t?oi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function lu(n,t){if(n!==t){var e=n!==i,r=null===n,s=n==n,o=pn(n),f=t!==i,c=null===t,l=t==t,v=pn(t);if(!c&&!v&&!o&&n>t||o&&f&&l&&!c&&!v||r&&f&&l||!e&&l||!s)return 1;if(!r&&!o&&!v&&n<t||v&&e&&s&&!r&&!o||c&&e&&s||!f&&s||!l)return-1}return 0}function pu(n,t,e,r){for(var s=-1,o=n.length,f=e.length,c=-1,l=t.length,v=Q(o-f,0),_=d(l+v),m=!r;++c<l;)_[c]=t[c];for(;++s<f;)(m||s<o)&&(_[e[s]]=n[s]);for(;v--;)_[c++]=n[s++];return _}function du(n,t,e,r){for(var s=-1,o=n.length,f=-1,c=e.length,l=-1,v=t.length,_=Q(o-c,0),m=d(_+v),w=!r;++s<_;)m[s]=n[s];for(var A=s;++l<v;)m[A+l]=t[l];for(;++f<c;)(w||s<o)&&(m[A+e[f]]=n[s++]);return m}function un(n,t){var e=-1,r=n.length;for(t||(t=d(r));++e<r;)t[e]=n[e];return t}function Un(n,t,e,r){var s=!e;e||(e={});for(var o=-1,f=t.length;++o<f;){var c=t[o],l=r?r(e[c],n[c],c,e,n):i;l===i&&(l=n[c]),s?Kn(e,c,l):ie(e,c,l)}return e}function Ye(n,t){return function(e,r){var s=O(e)?Qo:dc,o=t?t():{};return s(e,n,x(r,2),o)}}function Ut(n){return T((function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,f=s>2?e[2]:i;for(o=n.length>3&&"function"==typeof o?(s--,o):i,f&&rn(e[0],e[1],f)&&(o=s<3?i:o,s=1),t=M(t);++r<s;){var c=e[r];c&&n(t,c,r,o)}return t}))}function gu(n,t){return function(e,r){if(null==e)return e;if(!an(e))return n(e,r);for(var s=e.length,o=t?s:-1,f=M(e);(t?o--:++o<s)&&!1!==r(f[o],o,f););return e}}function vu(n){return function(t,e,r){for(var s=-1,o=M(t),f=r(t),c=f.length;c--;){var l=f[n?c:++s];if(!1===e(o[l],l,o))break}return t}}function _u(n){return function(t){var e=bt(t=U(t))?On(t):i,r=e?e[0]:t.charAt(0),s=e?ut(e,1).join(""):t.slice(1);return r[n]()+s}}function Wt(n){return function(t){return Dr(ga(da(t).replace($o,"")),n,"")}}function fe(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=$t(n.prototype),r=n.apply(e,t);return z(r)?r:e}}function mu(n){return function(t,e,r){var s=M(t);if(!an(t)){var o=x(e,3);t=V(t),e=function(c){return o(s[c],c,s)}}var f=n(t,e,r);return f>-1?s[o?t[f]:f]:i}}function wu(n){return Zn((function(t){var e=t.length,r=e,s=Pn.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new wn(F);if(s&&!f&&"wrapper"==Ve(o))var f=new Pn([],!0)}for(r=f?r:e;++r<e;){var c=Ve(o=t[r]),l="wrapper"==c?pi(o):i;f=l&&_i(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?f[Ve(l[0])].apply(f,l[3]):1==o.length&&_i(o)?f[c]():f.thru(o)}return function(){var v=arguments,_=v[0];if(f&&1==v.length&&O(_))return f.plant(_).value();for(var m=0,w=e?t[m].apply(this,v):_;++m<e;)w=t[m].call(this,w);return w}}))}function Ze(n,t,e,r,s,o,f,c,l,v){var _=t&qn,m=1&t,w=2&t,A=24&t,E=512&t,b=w?i:fe(n);return function y(){for(var L=arguments.length,H=d(L),dn=L;dn--;)H[dn]=arguments[dn];if(A)var sn=Ft(y),gn=function uf(h,g){for(var d=h.length,P=0;d--;)h[d]===g&&++P;return P}(H,sn);if(r&&(H=pu(H,r,s,A)),o&&(H=du(H,o,f,A)),L-=gn,A&&L<v){var Z=tt(H,sn);return Cu(n,t,Ze,y.placeholder,e,H,Z,c,l,v-L)}var Tn=m?e:this,Vn=w?Tn[n]:n;return L=H.length,c?H=function dh(n,t){for(var e=n.length,r=nn(t.length,e),s=un(n);r--;){var o=t[r];n[r]=Jn(o,e)?s[o]:i}return n}(H,c):E&&L>1&&H.reverse(),_&&l<L&&(H.length=l),this&&this!==k&&this instanceof y&&(Vn=b||fe(Vn)),Vn.apply(Tn,H)}}function Pu(n,t){return function(e,r){return function Cc(n,t,e,r){return $n(n,(function(s,o,f){t(r,e(s),o,f)})),r}(e,n,t(r),{})}}function Je(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;"string"==typeof e||"string"==typeof r?(e=ln(e),r=ln(r)):(e=su(e),r=su(r)),s=n(e,r)}return s}}function fi(n){return Zn((function(t){return t=G(t,hn(x())),T((function(e){var r=this;return n(t,(function(s){return cn(s,r,e)}))}))}))}function Xe(n,t){var e=(t=t===i?" ":ln(t)).length;if(e<2)return e?ei(t,n):t;var r=ei(t,He(n/Tt(t)));return bt(t)?ut(On(r),0,n).join(""):r.slice(0,n)}function Au(n){return function(t,e,r){return r&&"number"!=typeof r&&rn(t,e,r)&&(e=r=i),t=Qn(t),e===i?(e=t,t=0):e=Qn(e),function Nc(n,t,e,r){for(var s=-1,o=Q(He((t-n)/(e||1)),0),f=d(o);o--;)f[r?o:++s]=n,n+=e;return f}(t,e,r=r===i?t<e?1:-1:Qn(r),n)}}function Qe(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=xn(t),e=xn(e)),n(t,e)}}function Cu(n,t,e,r,s,o,f,c,l,v){var _=8&t;t|=_?32:64,4&(t&=~(_?64:32))||(t&=-4);var b=[n,t,s,_?o:i,_?f:i,_?i:o,_?i:f,c,l,v],y=e.apply(i,b);return _i(n)&&Nu(y,b),y.placeholder=r,Hu(y,n,t)}function ci(n){var t=X[n];return function(e,r){if(e=xn(e),(r=null==r?0:nn(R(r),292))&&Hs(e)){var s=(U(e)+"e").split("e");return+((s=(U(t(s[0]+"e"+(+s[1]+r)))+"e").split("e"))[0]+"e"+(+s[1]-r))}return t(e)}}var Qc=Nt&&1/Ee(new Nt([,-0]))[1]==ct?function(n){return new Nt(n)}:Li;function Iu(n){return function(t){var e=tn(t);return e==yn?Mr(t):e==Sn?function pf(h){var g=-1,d=Array(h.size);return h.forEach((function(P){d[++g]=[P,P]})),d}(t):function sf(h,g){return G(g,(function(d){return[d,h[d]]}))}(t,n(t))}}function Yn(n,t,e,r,s,o,f,c){var l=2&t;if(!l&&"function"!=typeof n)throw new wn(F);var v=r?r.length:0;if(v||(t&=-97,r=s=i),f=f===i?f:Q(R(f),0),c=c===i?c:R(c),v-=s?s.length:0,64&t){var _=r,m=s;r=s=i}var w=l?i:pi(n),A=[n,t,e,r,s,_,m,o,f,c];if(w&&function hh(n,t){var e=n[1],r=t[1],s=e|r,o=s<131,f=r==qn&&8==e||r==qn&&256==e&&n[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==e;if(!o&&!f)return n;1&r&&(n[2]=t[2],s|=1&e?0:4);var c=t[3];if(c){var l=n[3];n[3]=l?pu(l,c,t[4]):c,n[4]=l?tt(n[3],At):t[4]}return c=t[5],c&&(l=n[5],n[5]=l?du(l,c,t[6]):c,n[6]=l?tt(n[5],At):t[6]),c=t[7],c&&(n[7]=c),r&qn&&(n[8]=null==n[8]?t[8]:nn(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}(A,w),n=A[0],t=A[1],e=A[2],r=A[3],s=A[4],!(c=A[9]=A[9]===i?l?0:n.length:Q(A[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||16==t?function Jc(n,t,e){var r=fe(n);return function s(){for(var o=arguments.length,f=d(o),c=o,l=Ft(s);c--;)f[c]=arguments[c];var v=o<3&&f[0]!==l&&f[o-1]!==l?[]:tt(f,l);return(o-=v.length)<e?Cu(n,t,Ze,s.placeholder,i,f,v,i,i,e-o):cn(this&&this!==k&&this instanceof s?r:n,this,f)}}(n,t,c):32!=t&&33!=t||s.length?Ze.apply(i,A):function Xc(n,t,e,r){var s=1&t,o=fe(n);return function f(){for(var c=-1,l=arguments.length,v=-1,_=r.length,m=d(_+l),w=this&&this!==k&&this instanceof f?o:n;++v<_;)m[v]=r[v];for(;l--;)m[v++]=arguments[++c];return cn(w,s?e:this,m)}}(n,t,e,r);else var E=function Zc(n,t,e){var r=1&t,s=fe(n);return function o(){return(this&&this!==k&&this instanceof o?s:n).apply(r?e:this,arguments)}}(n,t,e);return Hu((w?ru:Nu)(E,A),n,t)}function xu(n,t,e,r){return n===i||bn(n,Dt[e])&&!W.call(r,e)?t:n}function Eu(n,t,e,r,s,o){return z(n)&&z(t)&&(o.set(t,n),Ge(n,t,i,Eu,o),o.delete(t)),n}function Vc(n){return le(n)?i:n}function yu(n,t,e,r,s,o){var f=1&e,c=n.length,l=t.length;if(c!=l&&!(f&&l>c))return!1;var v=o.get(n),_=o.get(t);if(v&&_)return v==t&&_==n;var m=-1,w=!0,A=2&e?new dt:i;for(o.set(n,t),o.set(t,n);++m<c;){var E=n[m],b=t[m];if(r)var y=f?r(b,E,m,t,n,o):r(E,b,m,n,t,o);if(y!==i){if(y)continue;w=!1;break}if(A){if(!Nr(t,(function(L,H){if(!kt(A,H)&&(E===L||s(E,L,e,r,o)))return A.push(H)}))){w=!1;break}}else if(E!==b&&!s(E,b,e,r,o)){w=!1;break}}return o.delete(n),o.delete(t),w}function Zn(n){return wi(Lu(n,i,qu),n+"")}function hi(n){return Ys(n,V,gi)}function li(n){return Ys(n,on,Su)}var pi=Ue?function(n){return Ue.get(n)}:Li;function Ve(n){for(var t=n.name+"",e=Ht[t],r=W.call(Ht,t)?e.length:0;r--;){var s=e[r],o=s.func;if(null==o||o==n)return s.name}return t}function Ft(n){return(W.call(a,"placeholder")?a:n).placeholder}function x(){var n=a.iteratee||bi;return n=n===bi?Xs:n,arguments.length?n(arguments[0],arguments[1]):n}function ke(n,t){var e=n.__data__;return function ah(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}(t)?e["string"==typeof t?"string":"hash"]:e.map}function di(n){for(var t=V(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,bu(s)]}return t}function _t(n,t){var e=function cf(h,g){return null==h?i:h[g]}(n,t);return Js(e)?e:i}var gi=Br?function(n){return null==n?[]:(n=M(n),jn(Br(n),(function(t){return Ds.call(n,t)})))}:Di,Su=Br?function(n){for(var t=[];n;)nt(t,gi(n)),n=Le(n);return t}:Di,tn=en;function Ou(n,t,e){for(var r=-1,s=(t=st(t,n)).length,o=!1;++r<s;){var f=Wn(t[r]);if(!(o=null!=n&&e(n,f)))break;n=n[f]}return o||++r!=s?o:!!(s=null==n?0:n.length)&&sr(s)&&Jn(f,s)&&(O(n)||wt(n))}function Ru(n){return"function"!=typeof n.constructor||ce(n)?{}:$t(Le(n))}function uh(n){return O(n)||wt(n)||!!(Ns&&n&&n[Ns])}function Jn(n,t){var e=typeof n;return!!(t=t??kn)&&("number"==e||"symbol"!=e&&_o.test(n))&&n>-1&&n%1==0&&n<t}function rn(n,t,e){if(!z(e))return!1;var r=typeof t;return!!("number"==r?an(e)&&Jn(t,e.length):"string"==r&&t in e)&&bn(e[t],n)}function vi(n,t){if(O(n))return!1;var e=typeof n;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=n&&!pn(n))||(to.test(n)||!no.test(n)||null!=t&&n in M(t))}function _i(n){var t=Ve(n),e=a[t];if("function"!=typeof e||!(t in N.prototype))return!1;if(n===e)return!0;var r=pi(e);return!!r&&n===r[0]}(Gr&&tn(new Gr(new ArrayBuffer(1)))!=St||ne&&tn(new ne)!=yn||zr&&tn(zr.resolve())!=Gi||Nt&&tn(new Nt)!=Sn||te&&tn(new te)!=Qt)&&(tn=function(n){var t=en(n),e=t==Bn?n.constructor:i,r=e?mt(e):"";if(r)switch(r){case $f:return St;case Uf:return yn;case Wf:return Gi;case Ff:return Sn;case Mf:return Qt}return t});var fh=Se?Xn:Ni;function ce(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||Dt)}function bu(n){return n==n&&!z(n)}function Tu(n,t){return function(e){return null!=e&&(e[n]===t&&(t!==i||n in M(e)))}}function Lu(n,t,e){return t=Q(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Q(r.length-t,0),f=d(o);++s<o;)f[s]=r[t+s];s=-1;for(var c=d(t+1);++s<t;)c[s]=r[s];return c[t]=e(f),cn(n,this,c)}}function Du(n,t){return t.length<2?n:vt(n,Cn(t,0,-1))}function mi(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var Nu=$u(ru),he=Rf||function(n,t){return k.setTimeout(n,t)},wi=$u(Uc);function Hu(n,t,e){var r=t+"";return wi(n,function sh(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(so,"{\n/* [wrapped with "+t+"] */\n")}(r,function gh(n,t){return mn(Ma,(function(e){var r="_."+e[0];t&e[1]&&!Ie(n,r)&&n.push(r)})),n.sort()}(function eh(n){var t=n.match(uo);return t?t[1].split(ao):[]}(r),e)))}function $u(n){var t=0,e=0;return function(){var r=Df(),s=16-(r-e);if(e=r,s>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(i,arguments)}}function je(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=ti(e,s),f=n[o];n[o]=n[e],n[e]=f}return n.length=t,n}var Uu=function ch(n){var t=rr(n,(function(r){return 500===e.size&&e.clear(),r})),e=t.cache;return t}((function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(eo,(function(e,r,s,o){t.push(s?o.replace(co,"$1"):r||e)})),t}));function Wn(n){if("string"==typeof n||pn(n))return n;var t=n+"";return"0"==t&&1/n==-ct?"-0":t}function mt(n){if(null!=n){try{return Oe.call(n)}catch{}try{return n+""}catch{}}return""}function Wu(n){if(n instanceof N)return n.clone();var t=new Pn(n.__wrapped__,n.__chain__);return t.__actions__=un(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var wh=T((function(n,t){return Y(n)?se(n,j(t,1,Y,!0)):[]})),Ph=T((function(n,t){var e=In(t);return Y(e)&&(e=i),Y(n)?se(n,j(t,1,Y,!0),x(e,2)):[]})),Ah=T((function(n,t){var e=In(t);return Y(e)&&(e=i),Y(n)?se(n,j(t,1,Y,!0),i,e):[]}));function Fu(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=null==e?0:R(e);return s<0&&(s=Q(r+s,0)),xe(n,x(t,3),s)}function Mu(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=R(e),s=e<0?Q(r+s,0):nn(s,r-1)),xe(n,x(t,3),s,!0)}function qu(n){return(null==n?0:n.length)?j(n,1):[]}function Bu(n){return n&&n.length?n[0]:i}var Lh=T((function(n){var t=G(n,ui);return t.length&&t[0]===n[0]?Qr(t):[]})),Dh=T((function(n){var t=In(n),e=G(n,ui);return t===In(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Qr(e,x(t,2)):[]})),Nh=T((function(n){var t=In(n),e=G(n,ui);return(t="function"==typeof t?t:i)&&e.pop(),e.length&&e[0]===n[0]?Qr(e,i,t):[]}));function In(n){var t=null==n?0:n.length;return t?n[t-1]:i}var Wh=T(Gu);function Gu(n,t){return n&&n.length&&t&&t.length?ni(n,t):n}var qh=Zn((function(n,t){var e=null==n?0:n.length,r=Yr(n,t);return eu(n,G(t,(function(s){return Jn(s,e)?+s:s})).sort(lu)),r}));function Pi(n){return null==n?n:Hf.call(n)}var rl=T((function(n){return it(j(n,1,Y,!0))})),il=T((function(n){var t=In(n);return Y(t)&&(t=i),it(j(n,1,Y,!0),x(t,2))})),sl=T((function(n){var t=In(n);return t="function"==typeof t?t:i,it(j(n,1,Y,!0),i,t)}));function Ai(n){if(!n||!n.length)return[];var t=0;return n=jn(n,(function(e){if(Y(e))return t=Q(e.length,t),!0})),Wr(t,(function(e){return G(n,Hr(e))}))}function zu(n,t){if(!n||!n.length)return[];var e=Ai(n);return null==t?e:G(e,(function(r){return cn(t,i,r)}))}var fl=T((function(n,t){return Y(n)?se(n,t):[]})),cl=T((function(n){return si(jn(n,Y))})),hl=T((function(n){var t=In(n);return Y(t)&&(t=i),si(jn(n,Y),x(t,2))})),ll=T((function(n){var t=In(n);return t="function"==typeof t?t:i,si(jn(n,Y),i,t)})),pl=T(Ai);var vl=T((function(n){var t=n.length,e=t>1?n[t-1]:i;return e="function"==typeof e?(n.pop(),e):i,zu(n,e)}));function Ku(n){var t=a(n);return t.__chain__=!0,t}function nr(n,t){return t(n)}var ml=Zn((function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return Yr(o,n)};return!(t>1||this.__actions__.length)&&r instanceof N&&Jn(e)?((r=r.slice(e,+e+(t?1:0))).__actions__.push({func:nr,args:[s],thisArg:i}),new Pn(r,this.__chain__).thru((function(o){return t&&!o.length&&o.push(i),o}))):this.thru(s)}));var yl=Ye((function(n,t,e){W.call(n,e)?++n[e]:Kn(n,e,1)}));var Rl=mu(Fu),bl=mu(Mu);function Yu(n,t){return(O(n)?mn:rt)(n,x(t,3))}function Zu(n,t){return(O(n)?Vo:Gs)(n,x(t,3))}var Nl=Ye((function(n,t,e){W.call(n,e)?n[e].push(t):Kn(n,e,[t])}));var $l=T((function(n,t,e){var r=-1,s="function"==typeof t,o=an(n)?d(n.length):[];return rt(n,(function(f){o[++r]=s?cn(t,f,e):ue(f,t,e)})),o})),Ul=Ye((function(n,t,e){Kn(n,e,t)}));function tr(n,t){return(O(n)?G:Qs)(n,x(t,3))}var Fl=Ye((function(n,t,e){n[e?0:1].push(t)}),(function(){return[[],[]]}));var Jl=T((function(n,t){if(null==n)return[];var e=t.length;return e>1&&rn(n,t[0],t[1])?t=[]:e>2&&rn(t[0],t[1],t[2])&&(t=[t[0]]),nu(n,j(t,1),[])})),er=Of||function(){return k.Date.now()};function Ju(n,t,e){return t=e?i:t,t=n&&null==t?n.length:t,Yn(n,qn,i,i,i,i,t)}function Xu(n,t){var e;if("function"!=typeof t)throw new wn(F);return n=R(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Ci=T((function(n,t,e){var r=1;if(e.length){var s=tt(e,Ft(Ci));r|=32}return Yn(n,r,t,e,s)})),Qu=T((function(n,t,e){var r=3;if(e.length){var s=tt(e,Ft(Qu));r|=32}return Yn(t,r,n,e,s)}));function ju(n,t,e){var r,s,o,f,c,l,v=0,_=!1,m=!1,w=!0;if("function"!=typeof n)throw new wn(F);function A(Z){var Tn=r,Vn=s;return r=s=i,v=Z,f=n.apply(Vn,Tn)}function y(Z){var Tn=Z-l;return l===i||Tn>=t||Tn<0||m&&Z-v>=o}function L(){var Z=er();if(y(Z))return H(Z);c=he(L,function b(Z){var ma=t-(Z-l);return m?nn(ma,o-(Z-v)):ma}(Z))}function H(Z){return c=i,w&&r?A(Z):(r=s=i,f)}function gn(){var Z=er(),Tn=y(Z);if(r=arguments,s=this,l=Z,Tn){if(c===i)return function E(Z){return v=Z,c=he(L,t),_?A(Z):f}(l);if(m)return fu(c),c=he(L,t),A(l)}return c===i&&(c=he(L,t)),f}return t=xn(t)||0,z(e)&&(_=!!e.leading,o=(m="maxWait"in e)?Q(xn(e.maxWait)||0,t):o,w="trailing"in e?!!e.trailing:w),gn.cancel=function dn(){c!==i&&fu(c),v=0,r=l=s=c=i},gn.flush=function sn(){return c===i?f:H(er())},gn}var Ql=T((function(n,t){return Bs(n,1,t)})),Vl=T((function(n,t,e){return Bs(n,xn(t)||0,e)}));function rr(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new wn(F);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var f=n.apply(this,r);return e.cache=o.set(s,f)||o,f};return e.cache=new(rr.Cache||zn),e}function ir(n){if("function"!=typeof n)throw new wn(F);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}rr.Cache=zn;var np=Mc((function(n,t){var e=(t=1==t.length&&O(t[0])?G(t[0],hn(x())):G(j(t,1),hn(x()))).length;return T((function(r){for(var s=-1,o=nn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return cn(n,this,r)}))})),Ii=T((function(n,t){var e=tt(t,Ft(Ii));return Yn(n,32,i,t,e)})),na=T((function(n,t){var e=tt(t,Ft(na));return Yn(n,64,i,t,e)})),tp=Zn((function(n,t){return Yn(n,256,i,i,i,t)}));function bn(n,t){return n===t||n!=n&&t!=t}var pp=Qe(Xr),dp=Qe((function(n,t){return n>=t})),wt=Zs(function(){return arguments}())?Zs:function(n){return K(n)&&W.call(n,"callee")&&!Ds.call(n,"callee")},O=d.isArray,gp=ds?hn(ds):function Ic(n){return K(n)&&en(n)==Vt};function an(n){return null!=n&&sr(n.length)&&!Xn(n)}function Y(n){return K(n)&&an(n)}var at=bf||Ni,_p=gs?hn(gs):function xc(n){return K(n)&&en(n)==Yt};function xi(n){if(!K(n))return!1;var t=en(n);return t==_e||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!le(n)}function Xn(n){if(!z(n))return!1;var t=en(n);return t==me||t==Bi||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ta(n){return"number"==typeof n&&n==R(n)}function sr(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=kn}function z(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function K(n){return null!=n&&"object"==typeof n}var ea=vs?hn(vs):function yc(n){return K(n)&&tn(n)==yn};function ra(n){return"number"==typeof n||K(n)&&en(n)==Zt}function le(n){if(!K(n)||en(n)!=Bn)return!1;var t=Le(n);if(null===t)return!0;var e=W.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&Oe.call(e)==xf}var Ei=_s?hn(_s):function Sc(n){return K(n)&&en(n)==Jt};var ia=ms?hn(ms):function Oc(n){return K(n)&&tn(n)==Sn};function ur(n){return"string"==typeof n||!O(n)&&K(n)&&en(n)==Xt}function pn(n){return"symbol"==typeof n||K(n)&&en(n)==we}var Mt=ws?hn(ws):function Rc(n){return K(n)&&sr(n.length)&&!!B[en(n)]};var Dp=Qe(jr),Np=Qe((function(n,t){return n<=t}));function sa(n){if(!n)return[];if(an(n))return ur(n)?On(n):un(n);if(jt&&n[jt])return function lf(h){for(var g,d=[];!(g=h.next()).done;)d.push(g.value);return d}(n[jt]());var t=tn(n);return(t==yn?Mr:t==Sn?Ee:qt)(n)}function Qn(n){return n?(n=xn(n))===ct||n===-ct?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function R(n){var t=Qn(n),e=t%1;return t==t?e?t-e:t:0}function ua(n){return n?gt(R(n),0,Hn):0}function xn(n){if("number"==typeof n)return n;if(pn(n))return NaN;if(z(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=z(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=Es(n);var e=po.test(n);return e||vo.test(n)?Jo(n.slice(2),e?2:8):lo.test(n)?NaN:+n}function aa(n){return Un(n,on(n))}function U(n){return null==n?"":ln(n)}var $p=Ut((function(n,t){if(ce(t)||an(t))Un(t,V(t),n);else for(var e in t)W.call(t,e)&&ie(n,e,t[e])})),oa=Ut((function(n,t){Un(t,on(t),n)})),ar=Ut((function(n,t,e,r){Un(t,on(t),n,r)})),Up=Ut((function(n,t,e,r){Un(t,V(t),n,r)})),Wp=Zn(Yr);var Mp=T((function(n,t){n=M(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&rn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],f=on(o),c=-1,l=f.length;++c<l;){var v=f[c],_=n[v];(_===i||bn(_,Dt[v])&&!W.call(n,v))&&(n[v]=o[v])}return n})),qp=T((function(n){return n.push(i,Eu),cn(fa,i,n)}));function yi(n,t,e){var r=null==n?i:vt(n,t);return r===i?e:r}function Si(n,t){return null!=n&&Ou(n,t,Pc)}var Vp=Pu((function(n,t,e){null!=t&&"function"!=typeof t.toString&&(t=Re.call(t)),n[t]=e}),Ri(fn)),kp=Pu((function(n,t,e){null!=t&&"function"!=typeof t.toString&&(t=Re.call(t)),W.call(n,t)?n[t].push(e):n[t]=[e]}),x),jp=T(ue);function V(n){return an(n)?Ws(n):kr(n)}function on(n){return an(n)?Ws(n,!0):bc(n)}var ed=Ut((function(n,t,e){Ge(n,t,e)})),fa=Ut((function(n,t,e,r){Ge(n,t,e,r)})),rd=Zn((function(n,t){var e={};if(null==n)return e;var r=!1;t=G(t,(function(o){return o=st(o,n),r||(r=o.length>1),o})),Un(n,li(n),e),r&&(e=An(e,7,Vc));for(var s=t.length;s--;)ii(e,t[s]);return e}));var sd=Zn((function(n,t){return null==n?{}:function Lc(n,t){return tu(n,t,(function(e,r){return Si(n,r)}))}(n,t)}));function ca(n,t){if(null==n)return{};var e=G(li(n),(function(r){return[r]}));return t=x(t),tu(n,e,(function(r,s){return t(r,s[0])}))}var ha=Iu(V),la=Iu(on);function qt(n){return null==n?[]:Fr(n,V(n))}var _d=Wt((function(n,t,e){return t=t.toLowerCase(),n+(e?pa(t):t)}));function pa(n){return Oi(U(n).toLowerCase())}function da(n){return(n=U(n))&&n.replace(mo,af).replace(Uo,"")}var Ad=Wt((function(n,t,e){return n+(e?"-":"")+t.toLowerCase()})),Cd=Wt((function(n,t,e){return n+(e?" ":"")+t.toLowerCase()})),Id=_u("toLowerCase");var bd=Wt((function(n,t,e){return n+(e?"_":"")+t.toLowerCase()}));var Ld=Wt((function(n,t,e){return n+(e?" ":"")+Oi(t)}));var Bd=Wt((function(n,t,e){return n+(e?" ":"")+t.toUpperCase()})),Oi=_u("toUpperCase");function ga(n,t,e){return n=U(n),(t=e?i:t)===i?function hf(h){return Mo.test(h)}(n)?function wf(h){return h.match(Wo)||[]}(n):function tf(h){return h.match(oo)||[]}(n):n.match(t)||[]}var va=T((function(n,t){try{return cn(n,i,t)}catch(e){return xi(e)?e:new S(e)}})),Gd=Zn((function(n,t){return mn(t,(function(e){e=Wn(e),Kn(n,e,Ci(n[e],n))})),n}));function Ri(n){return function(){return n}}var Zd=wu(),Jd=wu(!0);function fn(n){return n}function bi(n){return Xs("function"==typeof n?n:An(n,1))}var Vd=T((function(n,t){return function(e){return ue(e,n,t)}})),kd=T((function(n,t){return function(e){return ue(n,e,t)}}));function Ti(n,t,e){var r=V(t),s=Be(t,r);null==e&&(!z(t)||!s.length&&r.length)&&(e=t,t=n,n=this,s=Be(t,V(t)));var o=!(z(e)&&"chain"in e&&!e.chain),f=Xn(n);return mn(s,(function(c){var l=t[c];n[c]=l,f&&(n.prototype[c]=function(){var v=this.__chain__;if(o||v){var _=n(this.__wrapped__);return(_.__actions__=un(this.__actions__)).push({func:l,args:arguments,thisArg:n}),_.__chain__=v,_}return l.apply(n,nt([this.value()],arguments))})})),n}function Li(){}var tg=fi(G),eg=fi(Ps),rg=fi(Nr);function _a(n){return vi(n)?Hr(Wn(n)):function Dc(n){return function(t){return vt(t,n)}}(n)}var sg=Au(),ug=Au(!0);function Di(){return[]}function Ni(){return!1}var pg=Je((function(n,t){return n+t}),0),dg=ci("ceil"),gg=Je((function(n,t){return n/t}),1),vg=ci("floor");var Ig=Je((function(n,t){return n*t}),1),xg=ci("round"),Eg=Je((function(n,t){return n-t}),0);return a.after=function Xl(n,t){if("function"!=typeof t)throw new wn(F);return n=R(n),function(){if(--n<1)return t.apply(this,arguments)}},a.ary=Ju,a.assign=$p,a.assignIn=oa,a.assignInWith=ar,a.assignWith=Up,a.at=Wp,a.before=Xu,a.bind=Ci,a.bindAll=Gd,a.bindKey=Qu,a.castArray=function ap(){if(!arguments.length)return[];var n=arguments[0];return O(n)?n:[n]},a.chain=Ku,a.chunk=function vh(n,t,e){t=(e?rn(n,t,e):t===i)?1:Q(R(t),0);var r=null==n?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,f=d(He(r/t));s<r;)f[o++]=Cn(n,s,s+=t);return f},a.compact=function _h(n){for(var t=-1,e=null==n?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s},a.concat=function mh(){var n=arguments.length;if(!n)return[];for(var t=d(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return nt(O(e)?un(e):[e],j(t,1))},a.cond=function zd(n){var t=null==n?0:n.length,e=x();return n=t?G(n,(function(r){if("function"!=typeof r[1])throw new wn(F);return[e(r[0]),r[1]]})):[],T((function(r){for(var s=-1;++s<t;){var o=n[s];if(cn(o[0],this,r))return cn(o[1],this,r)}}))},a.conforms=function Kd(n){return function vc(n){var t=V(n);return function(e){return qs(e,n,t)}}(An(n,1))},a.constant=Ri,a.countBy=yl,a.create=function Fp(n,t){var e=$t(n);return null==t?e:Ms(e,t)},a.curry=function Vu(n,t,e){var r=Yn(n,8,i,i,i,i,i,t=e?i:t);return r.placeholder=Vu.placeholder,r},a.curryRight=function ku(n,t,e){var r=Yn(n,16,i,i,i,i,i,t=e?i:t);return r.placeholder=ku.placeholder,r},a.debounce=ju,a.defaults=Mp,a.defaultsDeep=qp,a.defer=Ql,a.delay=Vl,a.difference=wh,a.differenceBy=Ph,a.differenceWith=Ah,a.drop=function Ch(n,t,e){var r=null==n?0:n.length;return r?Cn(n,(t=e||t===i?1:R(t))<0?0:t,r):[]},a.dropRight=function Ih(n,t,e){var r=null==n?0:n.length;return r?Cn(n,0,(t=r-(t=e||t===i?1:R(t)))<0?0:t):[]},a.dropRightWhile=function xh(n,t){return n&&n.length?Ke(n,x(t,3),!0,!0):[]},a.dropWhile=function Eh(n,t){return n&&n.length?Ke(n,x(t,3),!0):[]},a.fill=function yh(n,t,e,r){var s=null==n?0:n.length;return s?(e&&"number"!=typeof e&&rn(n,t,e)&&(e=0,r=s),function mc(n,t,e,r){var s=n.length;for((e=R(e))<0&&(e=-e>s?0:s+e),(r=r===i||r>s?s:R(r))<0&&(r+=s),r=e>r?0:ua(r);e<r;)n[e++]=t;return n}(n,t,e,r)):[]},a.filter=function Ol(n,t){return(O(n)?jn:zs)(n,x(t,3))},a.flatMap=function Tl(n,t){return j(tr(n,t),1)},a.flatMapDeep=function Ll(n,t){return j(tr(n,t),ct)},a.flatMapDepth=function Dl(n,t,e){return e=e===i?1:R(e),j(tr(n,t),e)},a.flatten=qu,a.flattenDeep=function Sh(n){return(null==n?0:n.length)?j(n,ct):[]},a.flattenDepth=function Oh(n,t){return(null==n?0:n.length)?j(n,t=t===i?1:R(t)):[]},a.flip=function kl(n){return Yn(n,512)},a.flow=Zd,a.flowRight=Jd,a.fromPairs=function Rh(n){for(var t=-1,e=null==n?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r},a.functions=function Jp(n){return null==n?[]:Be(n,V(n))},a.functionsIn=function Xp(n){return null==n?[]:Be(n,on(n))},a.groupBy=Nl,a.initial=function Th(n){return(null==n?0:n.length)?Cn(n,0,-1):[]},a.intersection=Lh,a.intersectionBy=Dh,a.intersectionWith=Nh,a.invert=Vp,a.invertBy=kp,a.invokeMap=$l,a.iteratee=bi,a.keyBy=Ul,a.keys=V,a.keysIn=on,a.map=tr,a.mapKeys=function nd(n,t){var e={};return t=x(t,3),$n(n,(function(r,s,o){Kn(e,t(r,s,o),r)})),e},a.mapValues=function td(n,t){var e={};return t=x(t,3),$n(n,(function(r,s,o){Kn(e,s,t(r,s,o))})),e},a.matches=function Xd(n){return Vs(An(n,1))},a.matchesProperty=function Qd(n,t){return ks(n,An(t,1))},a.memoize=rr,a.merge=ed,a.mergeWith=fa,a.method=Vd,a.methodOf=kd,a.mixin=Ti,a.negate=ir,a.nthArg=function ng(n){return n=R(n),T((function(t){return js(t,n)}))},a.omit=rd,a.omitBy=function id(n,t){return ca(n,ir(x(t)))},a.once=function jl(n){return Xu(2,n)},a.orderBy=function Wl(n,t,e,r){return null==n?[]:(O(t)||(t=null==t?[]:[t]),O(e=r?i:e)||(e=null==e?[]:[e]),nu(n,t,e))},a.over=tg,a.overArgs=np,a.overEvery=eg,a.overSome=rg,a.partial=Ii,a.partialRight=na,a.partition=Fl,a.pick=sd,a.pickBy=ca,a.property=_a,a.propertyOf=function ig(n){return function(t){return null==n?i:vt(n,t)}},a.pull=Wh,a.pullAll=Gu,a.pullAllBy=function Fh(n,t,e){return n&&n.length&&t&&t.length?ni(n,t,x(e,2)):n},a.pullAllWith=function Mh(n,t,e){return n&&n.length&&t&&t.length?ni(n,t,i,e):n},a.pullAt=qh,a.range=sg,a.rangeRight=ug,a.rearg=tp,a.reject=function Bl(n,t){return(O(n)?jn:zs)(n,ir(x(t,3)))},a.remove=function Bh(n,t){var e=[];if(!n||!n.length)return e;var r=-1,s=[],o=n.length;for(t=x(t,3);++r<o;){var f=n[r];t(f,r,n)&&(e.push(f),s.push(r))}return eu(n,s),e},a.rest=function ep(n,t){if("function"!=typeof n)throw new wn(F);return T(n,t=t===i?t:R(t))},a.reverse=Pi,a.sampleSize=function zl(n,t,e){return t=(e?rn(n,t,e):t===i)?1:R(t),(O(n)?lc:$c)(n,t)},a.set=function ad(n,t,e){return null==n?n:oe(n,t,e)},a.setWith=function od(n,t,e,r){return r="function"==typeof r?r:i,null==n?n:oe(n,t,e,r)},a.shuffle=function Kl(n){return(O(n)?pc:Wc)(n)},a.slice=function Gh(n,t,e){var r=null==n?0:n.length;return r?(e&&"number"!=typeof e&&rn(n,t,e)?(t=0,e=r):(t=null==t?0:R(t),e=e===i?r:R(e)),Cn(n,t,e)):[]},a.sortBy=Jl,a.sortedUniq=function Qh(n){return n&&n.length?iu(n):[]},a.sortedUniqBy=function Vh(n,t){return n&&n.length?iu(n,x(t,2)):[]},a.split=function Td(n,t,e){return e&&"number"!=typeof e&&rn(n,t,e)&&(t=e=i),(e=e===i?Hn:e>>>0)?(n=U(n))&&("string"==typeof t||null!=t&&!Ei(t))&&(!(t=ln(t))&&bt(n))?ut(On(n),0,e):n.split(t,e):[]},a.spread=function rp(n,t){if("function"!=typeof n)throw new wn(F);return t=null==t?0:Q(R(t),0),T((function(e){var r=e[t],s=ut(e,0,t);return r&&nt(s,r),cn(n,this,s)}))},a.tail=function kh(n){var t=null==n?0:n.length;return t?Cn(n,1,t):[]},a.take=function jh(n,t,e){return n&&n.length?Cn(n,0,(t=e||t===i?1:R(t))<0?0:t):[]},a.takeRight=function nl(n,t,e){var r=null==n?0:n.length;return r?Cn(n,(t=r-(t=e||t===i?1:R(t)))<0?0:t,r):[]},a.takeRightWhile=function tl(n,t){return n&&n.length?Ke(n,x(t,3),!1,!0):[]},a.takeWhile=function el(n,t){return n&&n.length?Ke(n,x(t,3)):[]},a.tap=function _l(n,t){return t(n),n},a.throttle=function ip(n,t,e){var r=!0,s=!0;if("function"!=typeof n)throw new wn(F);return z(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),ju(n,t,{leading:r,maxWait:t,trailing:s})},a.thru=nr,a.toArray=sa,a.toPairs=ha,a.toPairsIn=la,a.toPath=function hg(n){return O(n)?G(n,Wn):pn(n)?[n]:un(Uu(U(n)))},a.toPlainObject=aa,a.transform=function fd(n,t,e){var r=O(n),s=r||at(n)||Mt(n);if(t=x(t,4),null==e){var o=n&&n.constructor;e=s?r?new o:[]:z(n)&&Xn(o)?$t(Le(n)):{}}return(s?mn:$n)(n,(function(f,c,l){return t(e,f,c,l)})),e},a.unary=function sp(n){return Ju(n,1)},a.union=rl,a.unionBy=il,a.unionWith=sl,a.uniq=function ul(n){return n&&n.length?it(n):[]},a.uniqBy=function al(n,t){return n&&n.length?it(n,x(t,2)):[]},a.uniqWith=function ol(n,t){return t="function"==typeof t?t:i,n&&n.length?it(n,i,t):[]},a.unset=function cd(n,t){return null==n||ii(n,t)},a.unzip=Ai,a.unzipWith=zu,a.update=function hd(n,t,e){return null==n?n:uu(n,t,ai(e))},a.updateWith=function ld(n,t,e,r){return r="function"==typeof r?r:i,null==n?n:uu(n,t,ai(e),r)},a.values=qt,a.valuesIn=function pd(n){return null==n?[]:Fr(n,on(n))},a.without=fl,a.words=ga,a.wrap=function up(n,t){return Ii(ai(t),n)},a.xor=cl,a.xorBy=hl,a.xorWith=ll,a.zip=pl,a.zipObject=function dl(n,t){return ou(n||[],t||[],ie)},a.zipObjectDeep=function gl(n,t){return ou(n||[],t||[],oe)},a.zipWith=vl,a.entries=ha,a.entriesIn=la,a.extend=oa,a.extendWith=ar,Ti(a,a),a.add=pg,a.attempt=va,a.camelCase=_d,a.capitalize=pa,a.ceil=dg,a.clamp=function dd(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=(e=xn(e))==e?e:0),t!==i&&(t=(t=xn(t))==t?t:0),gt(xn(n),t,e)},a.clone=function op(n){return An(n,4)},a.cloneDeep=function cp(n){return An(n,5)},a.cloneDeepWith=function hp(n,t){return An(n,5,t="function"==typeof t?t:i)},a.cloneWith=function fp(n,t){return An(n,4,t="function"==typeof t?t:i)},a.conformsTo=function lp(n,t){return null==t||qs(n,t,V(t))},a.deburr=da,a.defaultTo=function Yd(n,t){return null==n||n!=n?t:n},a.divide=gg,a.endsWith=function md(n,t,e){n=U(n),t=ln(t);var r=n.length,s=e=e===i?r:gt(R(e),0,r);return(e-=t.length)>=0&&n.slice(e,s)==t},a.eq=bn,a.escape=function wd(n){return(n=U(n))&&Va.test(n)?n.replace(Ki,of):n},a.escapeRegExp=function Pd(n){return(n=U(n))&&ro.test(n)?n.replace(Ir,"\\$&"):n},a.every=function Sl(n,t,e){var r=O(n)?Ps:_c;return e&&rn(n,t,e)&&(t=i),r(n,x(t,3))},a.find=Rl,a.findIndex=Fu,a.findKey=function Bp(n,t){return As(n,x(t,3),$n)},a.findLast=bl,a.findLastIndex=Mu,a.findLastKey=function Gp(n,t){return As(n,x(t,3),Jr)},a.floor=vg,a.forEach=Yu,a.forEachRight=Zu,a.forIn=function zp(n,t){return null==n?n:Zr(n,x(t,3),on)},a.forInRight=function Kp(n,t){return null==n?n:Ks(n,x(t,3),on)},a.forOwn=function Yp(n,t){return n&&$n(n,x(t,3))},a.forOwnRight=function Zp(n,t){return n&&Jr(n,x(t,3))},a.get=yi,a.gt=pp,a.gte=dp,a.has=function Qp(n,t){return null!=n&&Ou(n,t,wc)},a.hasIn=Si,a.head=Bu,a.identity=fn,a.includes=function Hl(n,t,e,r){n=an(n)?n:qt(n),e=e&&!r?R(e):0;var s=n.length;return e<0&&(e=Q(s+e,0)),ur(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&Rt(n,t,e)>-1},a.indexOf=function bh(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=null==e?0:R(e);return s<0&&(s=Q(r+s,0)),Rt(n,t,s)},a.inRange=function gd(n,t,e){return t=Qn(t),e===i?(e=t,t=0):e=Qn(e),function Ac(n,t,e){return n>=nn(t,e)&&n<Q(t,e)}(n=xn(n),t,e)},a.invoke=jp,a.isArguments=wt,a.isArray=O,a.isArrayBuffer=gp,a.isArrayLike=an,a.isArrayLikeObject=Y,a.isBoolean=function vp(n){return!0===n||!1===n||K(n)&&en(n)==Kt},a.isBuffer=at,a.isDate=_p,a.isElement=function mp(n){return K(n)&&1===n.nodeType&&!le(n)},a.isEmpty=function wp(n){if(null==n)return!0;if(an(n)&&(O(n)||"string"==typeof n||"function"==typeof n.splice||at(n)||Mt(n)||wt(n)))return!n.length;var t=tn(n);if(t==yn||t==Sn)return!n.size;if(ce(n))return!kr(n).length;for(var e in n)if(W.call(n,e))return!1;return!0},a.isEqual=function Pp(n,t){return ae(n,t)},a.isEqualWith=function Ap(n,t,e){var r=(e="function"==typeof e?e:i)?e(n,t):i;return r===i?ae(n,t,i,e):!!r},a.isError=xi,a.isFinite=function Cp(n){return"number"==typeof n&&Hs(n)},a.isFunction=Xn,a.isInteger=ta,a.isLength=sr,a.isMap=ea,a.isMatch=function Ip(n,t){return n===t||Vr(n,t,di(t))},a.isMatchWith=function xp(n,t,e){return e="function"==typeof e?e:i,Vr(n,t,di(t),e)},a.isNaN=function Ep(n){return ra(n)&&n!=+n},a.isNative=function yp(n){if(fh(n))throw new S("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Js(n)},a.isNil=function Op(n){return null==n},a.isNull=function Sp(n){return null===n},a.isNumber=ra,a.isObject=z,a.isObjectLike=K,a.isPlainObject=le,a.isRegExp=Ei,a.isSafeInteger=function Rp(n){return ta(n)&&n>=-kn&&n<=kn},a.isSet=ia,a.isString=ur,a.isSymbol=pn,a.isTypedArray=Mt,a.isUndefined=function bp(n){return n===i},a.isWeakMap=function Tp(n){return K(n)&&tn(n)==Qt},a.isWeakSet=function Lp(n){return K(n)&&"[object WeakSet]"==en(n)},a.join=function Hh(n,t){return null==n?"":Tf.call(n,t)},a.kebabCase=Ad,a.last=In,a.lastIndexOf=function $h(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=(s=R(e))<0?Q(r+s,0):nn(s,r-1)),t==t?function gf(h,g,d){for(var P=d+1;P--;)if(h[P]===g)return P;return P}(n,t,s):xe(n,Cs,s,!0)},a.lowerCase=Cd,a.lowerFirst=Id,a.lt=Dp,a.lte=Np,a.max=function _g(n){return n&&n.length?qe(n,fn,Xr):i},a.maxBy=function mg(n,t){return n&&n.length?qe(n,x(t,2),Xr):i},a.mean=function wg(n){return Is(n,fn)},a.meanBy=function Pg(n,t){return Is(n,x(t,2))},a.min=function Ag(n){return n&&n.length?qe(n,fn,jr):i},a.minBy=function Cg(n,t){return n&&n.length?qe(n,x(t,2),jr):i},a.stubArray=Di,a.stubFalse=Ni,a.stubObject=function ag(){return{}},a.stubString=function og(){return""},a.stubTrue=function fg(){return!0},a.multiply=Ig,a.nth=function Uh(n,t){return n&&n.length?js(n,R(t)):i},a.noConflict=function jd(){return k._===this&&(k._=Ef),this},a.noop=Li,a.now=er,a.pad=function xd(n,t,e){n=U(n);var r=(t=R(t))?Tt(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Xe($e(s),e)+n+Xe(He(s),e)},a.padEnd=function Ed(n,t,e){n=U(n);var r=(t=R(t))?Tt(n):0;return t&&r<t?n+Xe(t-r,e):n},a.padStart=function yd(n,t,e){n=U(n);var r=(t=R(t))?Tt(n):0;return t&&r<t?Xe(t-r,e)+n:n},a.parseInt=function Sd(n,t,e){return e||null==t?t=0:t&&(t=+t),Nf(U(n).replace(xr,""),t||0)},a.random=function vd(n,t,e){if(e&&"boolean"!=typeof e&&rn(n,t,e)&&(t=e=i),e===i&&("boolean"==typeof t?(e=t,t=i):"boolean"==typeof n&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Qn(n),t===i?(t=n,n=0):t=Qn(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=$s();return nn(n+s*(t-n+Zo("1e-"+((s+"").length-1))),t)}return ti(n,t)},a.reduce=function Ml(n,t,e){var r=O(n)?Dr:xs,s=arguments.length<3;return r(n,x(t,4),e,s,rt)},a.reduceRight=function ql(n,t,e){var r=O(n)?ko:xs,s=arguments.length<3;return r(n,x(t,4),e,s,Gs)},a.repeat=function Od(n,t,e){return t=(e?rn(n,t,e):t===i)?1:R(t),ei(U(n),t)},a.replace=function Rd(){var n=arguments,t=U(n[0]);return n.length<3?t:t.replace(n[1],n[2])},a.result=function ud(n,t,e){var r=-1,s=(t=st(t,n)).length;for(s||(s=1,n=i);++r<s;){var o=null==n?i:n[Wn(t[r])];o===i&&(r=s,o=e),n=Xn(o)?o.call(n):o}return n},a.round=xg,a.runInContext=h,a.sample=function Gl(n){return(O(n)?Fs:Hc)(n)},a.size=function Yl(n){if(null==n)return 0;if(an(n))return ur(n)?Tt(n):n.length;var t=tn(n);return t==yn||t==Sn?n.size:kr(n).length},a.snakeCase=bd,a.some=function Zl(n,t,e){var r=O(n)?Nr:Fc;return e&&rn(n,t,e)&&(t=i),r(n,x(t,3))},a.sortedIndex=function zh(n,t){return ze(n,t)},a.sortedIndexBy=function Kh(n,t,e){return ri(n,t,x(e,2))},a.sortedIndexOf=function Yh(n,t){var e=null==n?0:n.length;if(e){var r=ze(n,t);if(r<e&&bn(n[r],t))return r}return-1},a.sortedLastIndex=function Zh(n,t){return ze(n,t,!0)},a.sortedLastIndexBy=function Jh(n,t,e){return ri(n,t,x(e,2),!0)},a.sortedLastIndexOf=function Xh(n,t){if(null==n?0:n.length){var r=ze(n,t,!0)-1;if(bn(n[r],t))return r}return-1},a.startCase=Ld,a.startsWith=function Dd(n,t,e){return n=U(n),e=null==e?0:gt(R(e),0,n.length),t=ln(t),n.slice(e,e+t.length)==t},a.subtract=Eg,a.sum=function yg(n){return n&&n.length?Ur(n,fn):0},a.sumBy=function Sg(n,t){return n&&n.length?Ur(n,x(t,2)):0},a.template=function Nd(n,t,e){var r=a.templateSettings;e&&rn(n,t,e)&&(t=i),n=U(n),t=ar({},t,r,xu);var c,l,s=ar({},t.imports,r.imports,xu),o=V(s),f=Fr(s,o),v=0,_=t.interpolate||Pe,m="__p += '",w=qr((t.escape||Pe).source+"|"+_.source+"|"+(_===Yi?ho:Pe).source+"|"+(t.evaluate||Pe).source+"|$","g"),A="//# sourceURL="+(W.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bo+"]")+"\n";n.replace(w,(function(y,L,H,dn,sn,gn){return H||(H=dn),m+=n.slice(v,gn).replace(wo,ff),L&&(c=!0,m+="' +\n__e("+L+") +\n'"),sn&&(l=!0,m+="';\n"+sn+";\n__p += '"),H&&(m+="' +\n((__t = ("+H+")) == null ? '' : __t) +\n'"),v=gn+y.length,y})),m+="';\n";var E=W.call(t,"variable")&&t.variable;if(E){if(fo.test(E))throw new S("Invalid `variable` option passed into `_.template`")}else m="with (obj) {\n"+m+"\n}\n";m=(l?m.replace(Za,""):m).replace(Ja,"$1").replace(Xa,"$1;"),m="function("+(E||"obj")+") {\n"+(E?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var b=va((function(){return $(o,A+"return "+m).apply(i,f)}));if(b.source=m,xi(b))throw b;return b},a.times=function cg(n,t){if((n=R(n))<1||n>kn)return[];var e=Hn,r=nn(n,Hn);t=x(t),n-=Hn;for(var s=Wr(r,t);++e<n;)t(e);return s},a.toFinite=Qn,a.toInteger=R,a.toLength=ua,a.toLower=function Hd(n){return U(n).toLowerCase()},a.toNumber=xn,a.toSafeInteger=function Hp(n){return n?gt(R(n),-kn,kn):0===n?n:0},a.toString=U,a.toUpper=function $d(n){return U(n).toUpperCase()},a.trim=function Ud(n,t,e){if((n=U(n))&&(e||t===i))return Es(n);if(!n||!(t=ln(t)))return n;var r=On(n),s=On(t);return ut(r,ys(r,s),Ss(r,s)+1).join("")},a.trimEnd=function Wd(n,t,e){if((n=U(n))&&(e||t===i))return n.slice(0,Rs(n)+1);if(!n||!(t=ln(t)))return n;var r=On(n);return ut(r,0,Ss(r,On(t))+1).join("")},a.trimStart=function Fd(n,t,e){if((n=U(n))&&(e||t===i))return n.replace(xr,"");if(!n||!(t=ln(t)))return n;var r=On(n);return ut(r,ys(r,On(t))).join("")},a.truncate=function Md(n,t){var e=30,r="...";if(z(t)){var s="separator"in t?t.separator:s;e="length"in t?R(t.length):e,r="omission"in t?ln(t.omission):r}var o=(n=U(n)).length;if(bt(n)){var f=On(n);o=f.length}if(e>=o)return n;var c=e-Tt(r);if(c<1)return r;var l=f?ut(f,0,c).join(""):n.slice(0,c);if(s===i)return l+r;if(f&&(c+=l.length-c),Ei(s)){if(n.slice(c).search(s)){var v,_=l;for(s.global||(s=qr(s.source,U(Zi.exec(s))+"g")),s.lastIndex=0;v=s.exec(_);)var m=v.index;l=l.slice(0,m===i?c:m)}}else if(n.indexOf(ln(s),c)!=c){var w=l.lastIndexOf(s);w>-1&&(l=l.slice(0,w))}return l+r},a.unescape=function qd(n){return(n=U(n))&&Qa.test(n)?n.replace(zi,vf):n},a.uniqueId=function lg(n){var t=++If;return U(n)+t},a.upperCase=Bd,a.upperFirst=Oi,a.each=Yu,a.eachRight=Zu,a.first=Bu,Ti(a,function(){var n={};return $n(a,(function(t,e){W.call(a.prototype,e)||(n[e]=t)})),n}(),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(n){a[n].placeholder=a})),mn(["drop","take"],(function(n,t){N.prototype[n]=function(e){e=e===i?1:Q(R(e),0);var r=this.__filtered__&&!t?new N(this):this.clone();return r.__filtered__?r.__takeCount__=nn(e,r.__takeCount__):r.__views__.push({size:nn(e,Hn),type:n+(r.__dir__<0?"Right":"")}),r},N.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}})),mn(["filter","map","takeWhile"],(function(n,t){var e=t+1,r=1==e||3==e;N.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:x(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}})),mn(["head","last"],(function(n,t){var e="take"+(t?"Right":"");N.prototype[n]=function(){return this[e](1).value()[0]}})),mn(["initial","tail"],(function(n,t){var e="drop"+(t?"":"Right");N.prototype[n]=function(){return this.__filtered__?new N(this):this[e](1)}})),N.prototype.compact=function(){return this.filter(fn)},N.prototype.find=function(n){return this.filter(n).head()},N.prototype.findLast=function(n){return this.reverse().find(n)},N.prototype.invokeMap=T((function(n,t){return"function"==typeof n?new N(this):this.map((function(e){return ue(e,n,t)}))})),N.prototype.reject=function(n){return this.filter(ir(x(n)))},N.prototype.slice=function(n,t){n=R(n);var e=this;return e.__filtered__&&(n>0||t<0)?new N(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(e=(t=R(t))<0?e.dropRight(-t):e.take(t-n)),e)},N.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},N.prototype.toArray=function(){return this.take(Hn)},$n(N.prototype,(function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=a[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);s&&(a.prototype[t]=function(){var f=this.__wrapped__,c=r?[1]:arguments,l=f instanceof N,v=c[0],_=l||O(f),m=function(L){var H=s.apply(a,nt([L],c));return r&&w?H[0]:H};_&&e&&"function"==typeof v&&1!=v.length&&(l=_=!1);var w=this.__chain__,A=!!this.__actions__.length,E=o&&!w,b=l&&!A;if(!o&&_){f=b?f:new N(this);var y=n.apply(f,c);return y.__actions__.push({func:nr,args:[m],thisArg:i}),new Pn(y,w)}return E&&b?n.apply(this,c):(y=this.thru(m),E?r?y.value()[0]:y.value():y)})})),mn(["pop","push","shift","sort","splice","unshift"],(function(n){var t=ye[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);a.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(O(o)?o:[],s)}return this[e]((function(f){return t.apply(O(f)?f:[],s)}))}})),$n(N.prototype,(function(n,t){var e=a[t];if(e){var r=e.name+"";W.call(Ht,r)||(Ht[r]=[]),Ht[r].push({name:t,func:e})}})),Ht[Ze(i,2).name]=[{name:"wrapper",func:i}],N.prototype.clone=function qf(){var n=new N(this.__wrapped__);return n.__actions__=un(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=un(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=un(this.__views__),n},N.prototype.reverse=function Bf(){if(this.__filtered__){var n=new N(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},N.prototype.value=function Gf(){var n=this.__wrapped__.value(),t=this.__dir__,e=O(n),r=t<0,s=e?n.length:0,o=function th(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],f=o.size;switch(o.type){case"drop":n+=f;break;case"dropRight":t-=f;break;case"take":t=nn(t,n+f);break;case"takeRight":n=Q(n,t-f)}}return{start:n,end:t}}(0,s,this.__views__),f=o.start,c=o.end,l=c-f,v=r?c:f-1,_=this.__iteratees__,m=_.length,w=0,A=nn(l,this.__takeCount__);if(!e||!r&&s==l&&A==l)return au(n,this.__actions__);var E=[];n:for(;l--&&w<A;){for(var b=-1,y=n[v+=t];++b<m;){var L=_[b],H=L.iteratee,dn=L.type,sn=H(y);if(2==dn)y=sn;else if(!sn){if(1==dn)continue n;break n}}E[w++]=y}return E},a.prototype.at=ml,a.prototype.chain=function wl(){return Ku(this)},a.prototype.commit=function Pl(){return new Pn(this.value(),this.__chain__)},a.prototype.next=function Al(){this.__values__===i&&(this.__values__=sa(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?i:this.__values__[this.__index__++]}},a.prototype.plant=function Il(n){for(var t,e=this;e instanceof Fe;){var r=Wu(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t},a.prototype.reverse=function xl(){var n=this.__wrapped__;if(n instanceof N){var t=n;return this.__actions__.length&&(t=new N(this)),(t=t.reverse()).__actions__.push({func:nr,args:[Pi],thisArg:i}),new Pn(t,this.__chain__)}return this.thru(Pi)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function El(){return au(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,jt&&(a.prototype[jt]=function Cl(){return this}),a}();ht?((ht.exports=Lt)._=Lt,br._=Lt):k._=Lt}).call(index_es_pe)}(index_es_$i,index_es_$i.exports);var Fg=Object.defineProperty,Mg=Object.defineProperties,qg=Object.getOwnPropertyDescriptors,xa=Object.getOwnPropertySymbols,Bg=Object.prototype.hasOwnProperty,Gg=Object.prototype.propertyIsEnumerable,Ea=(C,u,i)=>u in C?Fg(C,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):C[u]=i,index_es_fr=(C,u)=>{for(var i in u||(u={}))Bg.call(u,i)&&Ea(C,i,u[i]);if(xa)for(var i of xa(u))Gg.call(u,i)&&Ea(C,i,u[i]);return C},zg=(C,u)=>Mg(C,qg(u));function En(C,u,i){let p;const I=Ui(C);return u.rpcMap&&(p=u.rpcMap[I]),p||(p=`https://rpc.walletconnect.com/v1?chainId=eip155:${I}&projectId=${i}`),p}function Ui(C){return C.includes("eip155")?Number(C.split(":")[1]):Number(C)}function ya(C){return C.map((u=>`${u.split(":")[0]}:${u.split(":")[1]}`))}function Sa(C){var u,i,p,I;const D={};if(!(0,index_es.L5)(C))return D;for(const[F,Fn]of Object.entries(C)){const Gt=(0,index_es.gp)(F)?[F]:Fn.chains,lr=Fn.methods||[],At=Fn.events||[],Ln=Fn.rpcMap||{},Mn=(0,index_es.M)(F);D[Mn]=zg(index_es_fr(index_es_fr({},D[Mn]),Fn),{chains:(0,index_es.eG)(Gt,null==(u=D[Mn])?void 0:u.chains),methods:(0,index_es.eG)(lr,null==(i=D[Mn])?void 0:i.methods),events:(0,index_es.eG)(At,null==(p=D[Mn])?void 0:p.events),rpcMap:index_es_fr(index_es_fr({},Ln),null==(I=D[Mn])?void 0:I.rpcMap)})}return D}function Zg(C){return C.includes(":")?C.split(":")[2]:C}function Jg(C){const u={};for(const[i,p]of Object.entries(C)){const I=p.methods||[],D=p.events||[],F=p.accounts||[],Fn=(0,index_es.gp)(i)?[i]:p.chains?p.chains:ya(p.accounts);u[i]={chains:Fn,methods:I,events:D,accounts:F}}return u}const Oa={},dist_index_es_J=C=>Oa[C],index_es_Wi=(C,u)=>{Oa[C]=u};class Xg{constructor(u){this.name="polkadot",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(this.chainId=u,!this.httpProviders[u]){const p=i||En(`${this.name}:${u}`,this.namespace);if(!p)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,p)}this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const u=this.namespace.accounts;return u&&u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2]))||[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var p;u[i]=this.createHttpProvider(i,null==(p=this.namespace.rpcMap)?void 0:p[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProvider(u,i){const p=i||En(u,this.namespace);return typeof p>"u"?void 0:new JsonRpcProvider(new jsonrpc_http_connection_dist_esm(p,dist_index_es_J("disableProviderPing")))}}class Qg{constructor(u){this.name="eip155",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(u){switch(u.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(u);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(u.request.method)?await this.client.request(u):this.getHttpProvider().request(u.request)}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}setDefaultChain(u,i){const p=Ui(u);if(!this.httpProviders[p]){const I=i||En(`${this.name}:${p}`,this.namespace,this.client.core.projectId);if(!I)throw new Error(`No RPC url provided for chainId: ${p}`);this.setHttpProvider(p,I)}this.chainId=p,this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${p}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}createHttpProvider(u,i){const p=i||En(`${this.name}:${u}`,this.namespace,this.client.core.projectId);return typeof p>"u"?void 0:new JsonRpcProvider(new HttpConnection(p,dist_index_es_J("disableProviderPing")))}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var p;const I=Ui(i);u[I]=this.createHttpProvider(I,null==(p=this.namespace.rpcMap)?void 0:p[i])})),u}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}getHttpProvider(){const u=this.chainId,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}async handleSwitchChain(u){var i,p;let I=u.request.params?null==(i=u.request.params[0])?void 0:i.chainId:"0x0";I=I.startsWith("0x")?I:`0x${I}`;const D=parseInt(I,16);if(this.isChainApproved(D))this.setDefaultChain(`${D}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${D}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:u.topic,request:{method:u.request.method,params:[{chainId:I}]},chainId:null==(p=this.namespace.chains)?void 0:p[0]}),this.setDefaultChain(`${D}`)}return null}isChainApproved(u){return this.namespace.chains.includes(`${this.name}:${u}`)}}class Vg{constructor(u){this.name="solana",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(!this.httpProviders[u]){const p=i||En(`${this.name}:${u}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,p)}this.chainId=u,this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var p;u[i]=this.createHttpProvider(i,null==(p=this.namespace.rpcMap)?void 0:p[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProvider(u,i){const p=i||En(u,this.namespace,this.client.core.projectId);return typeof p>"u"?void 0:new JsonRpcProvider(new jsonrpc_http_connection_dist_esm(p,dist_index_es_J("disableProviderPing")))}}class kg{constructor(u){this.name="cosmos",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(this.chainId=u,!this.httpProviders[u]){const p=i||En(`${this.name}:${u}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,p)}this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var p;u[i]=this.createHttpProvider(i,null==(p=this.namespace.rpcMap)?void 0:p[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProvider(u,i){const p=i||En(u,this.namespace,this.client.core.projectId);return typeof p>"u"?void 0:new JsonRpcProvider(new jsonrpc_http_connection_dist_esm(p,dist_index_es_J("disableProviderPing")))}}class jg{constructor(u){this.name="cip34",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(this.chainId=u,!this.httpProviders[u]){const p=i||this.getCardanoRPCUrl(u);if(!p)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,p)}this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{const p=this.getCardanoRPCUrl(i);u[i]=this.createHttpProvider(i,p)})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}getCardanoRPCUrl(u){const i=this.namespace.rpcMap;if(i)return i[u]}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProvider(u,i){const p=i||this.getCardanoRPCUrl(u);return typeof p>"u"?void 0:new JsonRpcProvider(new jsonrpc_http_connection_dist_esm(p,dist_index_es_J("disableProviderPing")))}}class nv{constructor(u){this.name="elrond",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(!this.httpProviders[u]){const p=i||En(`${this.name}:${u}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,p)}this.chainId=u,this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var p;u[i]=this.createHttpProvider(i,null==(p=this.namespace.rpcMap)?void 0:p[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProvider(u,i){const p=i||En(u,this.namespace,this.client.core.projectId);return typeof p>"u"?void 0:new JsonRpcProvider(new jsonrpc_http_connection_dist_esm(p,dist_index_es_J("disableProviderPing")))}}class tv{constructor(u){this.name="multiversx",this.namespace=u.namespace,this.events=dist_index_es_J("events"),this.client=dist_index_es_J("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(!this.httpProviders[u]){const p=i||En(`${this.name}:${u}`,this.namespace,this.client.core.projectId);if(!p)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,p)}this.chainId=u,this.events.emit(index_es_ot_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var p;u[i]=this.createHttpProvider(i,null==(p=this.namespace.rpcMap)?void 0:p[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const p=this.createHttpProvider(u,i);p&&(this.httpProviders[u]=p)}createHttpProvider(u,i){const p=i||En(u,this.namespace,this.client.core.projectId);return typeof p>"u"?void 0:new JsonRpcProvider(new jsonrpc_http_connection_dist_esm(p,dist_index_es_J("disableProviderPing")))}}var ev=Object.defineProperty,rv=Object.defineProperties,iv=Object.getOwnPropertyDescriptors,Ra=Object.getOwnPropertySymbols,sv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,ba=(C,u,i)=>u in C?ev(C,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):C[u]=i,index_es_cr=(C,u)=>{for(var i in u||(u={}))sv.call(u,i)&&ba(C,i,u[i]);if(Ra)for(var i of Ra(u))uv.call(u,i)&&ba(C,i,u[i]);return C},index_es_Fi=(C,u)=>rv(C,iv(u));class index_es_hr{constructor(u){this.events=new(events_default()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=u,this.logger=typeof u?.logger<"u"&&"string"!=typeof u?.logger?u.logger:(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:u?.logger||"error"})),this.disableProviderPing=u?.disableProviderPing||!1}static async init(u){const i=new index_es_hr(u);return await i.initialize(),i}async request(u,i){const[p,I]=this.validateChain(i);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(p).request({request:index_es_cr({},u),chainId:`${p}:${I}`,topic:this.session.topic})}sendAsync(u,i,p){this.request(u,p).then((I=>i(null,I))).catch((I=>i(I,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var u;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(u=this.session)?void 0:u.topic,reason:(0,index_es.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(u){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(u),await this.cleanupPendingPairings(),!u.skipPairing)return await this.pair(u.pairingTopic)}on(u,i){this.events.on(u,i)}once(u,i){this.events.once(u,i)}removeListener(u,i){this.events.removeListener(u,i)}off(u,i){this.events.off(u,i)}get isWalletConnect(){return!0}async pair(u){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:p,approval:I}=await this.client.connect({pairingTopic:u,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});p&&(this.uri=p,this.events.emit("display_uri",p)),await I().then((D=>{this.session=D,this.namespaces||(this.namespaces=Jg(D.namespaces),this.persist("namespaces",this.namespaces))})).catch((D=>{if(D.message!==te)throw D;i++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(u,i){try{if(!this.session)return;const[p,I]=this.validateChain(u);this.getProvider(p).setDefaultChain(I,i)}catch(p){if(!/Please call connect/.test(p.message))throw p}}async cleanupPendingPairings(u={}){this.logger.info("Cleaning up inactive pairings...");const i=this.client.pairing.getAll();if((0,index_es.qt)(i)){for(const p of i)u.deletePairings?this.client.core.expirer.set(p.topic,0):await this.client.core.relayer.subscriber.unsubscribe(p.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const u=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[u]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await index_es_M.init({logger:this.providerOpts.logger||"error",relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const u=[...new Set(Object.keys(this.session.namespaces).map((i=>(0,index_es.M)(i))))];index_es_Wi("client",this.client),index_es_Wi("events",this.events),index_es_Wi("disableProviderPing",this.disableProviderPing),u.forEach((i=>{if(!this.session)return;const p=function Kg(C,u){const i=Object.keys(u.namespaces).filter((I=>I.includes(C)));if(!i.length)return[];const p=[];return i.forEach((I=>{const D=u.namespaces[I].accounts;p.push(...D)})),p}(i,this.session),I=ya(p),D=function Yg(C={},u={}){const i=Sa(C),p=Sa(u);return index_es_$i.exports.merge(i,p)}(this.namespaces,this.optionalNamespaces),F=index_es_Fi(index_es_cr({},D[i]),{accounts:p,chains:I});switch(i){case"eip155":this.rpcProviders[i]=new Qg({namespace:F});break;case"solana":this.rpcProviders[i]=new Vg({namespace:F});break;case"cosmos":this.rpcProviders[i]=new kg({namespace:F});break;case"polkadot":this.rpcProviders[i]=new Xg({namespace:F});break;case"cip34":this.rpcProviders[i]=new jg({namespace:F});break;case"elrond":this.rpcProviders[i]=new nv({namespace:F});break;case"multiversx":this.rpcProviders[i]=new tv({namespace:F})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(u=>{this.events.emit("session_ping",u)})),this.client.on("session_event",(u=>{const{params:i}=u,{event:p}=i;if("accountsChanged"===p.name){const I=p.data;I&&(0,index_es.qt)(I)&&this.events.emit("accountsChanged",I.map(Zg))}else"chainChanged"===p.name?this.onChainChanged(i.chainId):this.events.emit(p.name,p.data);this.events.emit("session_event",u)})),this.client.on("session_update",(({topic:u,params:i})=>{var p;const{namespaces:I}=i,D=null==(p=this.client)?void 0:p.session.get(u);this.session=index_es_Fi(index_es_cr({},D),{namespaces:I}),this.onSessionUpdate(),this.events.emit("session_update",{topic:u,params:i})})),this.client.on("session_delete",(async u=>{await this.cleanup(),this.events.emit("session_delete",u),this.events.emit("disconnect",index_es_Fi(index_es_cr({},(0,index_es.D6)("USER_DISCONNECTED")),{data:u.topic}))})),this.on(index_es_ot_DEFAULT_CHAIN_CHANGED,(u=>{this.onChainChanged(u,!0)}))}getProvider(u){if(!this.rpcProviders[u])throw new Error(`Provider not found: ${u}`);return this.rpcProviders[u]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((u=>{var i;this.getProvider(u).updateNamespace(null==(i=this.session)?void 0:i.namespaces[u])}))}setNamespaces(u){const{namespaces:i,optionalNamespaces:p,sessionProperties:I}=u;i&&Object.keys(i).length&&(this.namespaces=i),p&&Object.keys(p).length&&(this.optionalNamespaces=p),this.sessionProperties=I,this.persist("namespaces",i),this.persist("optionalNamespaces",p)}validateChain(u){const[i,p]=u?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,p];if(i&&!Object.keys(this.namespaces||{}).map((F=>(0,index_es.M)(F))).includes(i))throw new Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&p)return[i,p];const I=(0,index_es.M)(Object.keys(this.namespaces)[0]);return[I,this.rpcProviders[I].getDefaultChain()]}async requestAccounts(){const[u]=this.validateChain();return await this.getProvider(u).requestAccounts()}onChainChanged(u,i=!1){var p;if(!this.namespaces)return;const[I,D]=this.validateChain(u);i||this.getProvider(I).setDefaultChain(D),(null!=(p=this.namespaces[I])?p:this.namespaces[`${I}:${D}`]).defaultChain=D,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",D)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(u,i){this.client.core.storage.setItem(`${Ia}/${u}`,i)}async getFromStore(u){return await this.client.core.storage.getItem(`${Ia}/${u}`)}}const av=index_es_hr,index_es_u=["eth_sendTransaction","personal_sign"],index_es_E=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],index_es_m=["chainChanged","accountsChanged"],index_es_=["message","disconnect","connect"];var N=Object.defineProperty,q=Object.defineProperties,D=Object.getOwnPropertyDescriptors,index_es_y=Object.getOwnPropertySymbols,index_es_U=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,dist_index_es_O=(a,t,s)=>t in a?N(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,dist_index_es_p=(a,t)=>{for(var s in t||(t={}))index_es_U.call(t,s)&&dist_index_es_O(a,s,t[s]);if(index_es_y)for(var s of index_es_y(t))Q.call(t,s)&&dist_index_es_O(a,s,t[s]);return a},dist_index_es_M=(a,t)=>q(a,D(t));function dist_index_es_g(a){return Number(a[0].split(":")[1])}function f(a){return`0x${a.toString(16)}`}class index_es_v{constructor(){this.events=new events.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(t,s)=>(this.events.on(t,s),this),this.once=(t,s)=>(this.events.once(t,s),this),this.removeListener=(t,s)=>(this.events.removeListener(t,s),this),this.off=(t,s)=>(this.events.off(t,s),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const s=new index_es_v;return await s.initialize(t),s}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,s){this.signer.sendAsync(t,s,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:s,optional:i}=function index_es_L(a){const{chains:t,optionalChains:s,methods:i,optionalMethods:n,events:e,optionalEvents:h,rpcMap:c}=a;if(!(0,index_es.qt)(t))throw new Error("Invalid chains");const o={chains:t,methods:i||index_es_u,events:e||index_es_m,rpcMap:dist_index_es_p({},t.length?{[dist_index_es_g(t)]:c[dist_index_es_g(t)]}:{})},r=e?.filter((l=>!index_es_m.includes(l))),d=i?.filter((l=>!index_es_u.includes(l)));if(!(s||h||n||null!=r&&r.length||null!=d&&d.length))return{required:t.length?o:void 0};const I={chains:[...new Set(r?.length&&d?.length||!s?o.chains.concat(s||[]):s)],methods:[...new Set(o.methods.concat(null!=n&&n.length?n:index_es_E))],events:[...new Set(o.events.concat(h||index_es_))],rpcMap:c};return{required:t.length?o:void 0,optional:s.length?I:void 0}}(this.rpc);try{const n=await new Promise((async(h,c)=>{var o;this.rpc.showQrModal&&(null==(o=this.modal)||o.subscribeModal((r=>{!r.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(dist_index_es_M(dist_index_es_p({namespaces:dist_index_es_p({},s&&{[this.namespace]:s})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t?.pairingTopic})).then((r=>{h(r)})).catch((r=>{c(new Error(r.message))}))}));if(!n)return;this.setChainIds(this.rpc.chains);const e=(0,index_es.gu)(n.namespaces,[this.namespace]);this.setAccounts(e),this.events.emit("connect",{chainId:f(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:s}=t,{event:i}=s;"accountsChanged"===i.name?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===i.name?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const s=parseInt(t);this.chainId=s,this.events.emit("chainChanged",f(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",dist_index_es_M(dist_index_es_p({},(0,index_es.D6)("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var s,i;this.rpc.showQrModal&&(null==(s=this.modal)||s.closeModal(),null==(i=this.modal)||i.openModal({uri:t})),this.events.emit("display_uri",t)}))}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const s=t.filter((i=>this.isCompatibleChainId(i))).map((i=>this.parseChainId(i)));s.length&&(this.chainId=s[0],this.events.emit("chainChanged",f(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const s=this.parseChainId(t);this.chainId=s,this.switchEthereumChain(s)}}parseAccountId(t){const[s,i,n]=t.split(":");return{chainId:`${s}:${i}`,address:n}}setAccounts(t){this.accounts=t.filter((s=>this.parseChainId(this.parseAccountId(s).chainId)===this.chainId)).map((s=>this.parseAccountId(s).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var s,i;const n=null!=(s=t?.chains)?s:[],e=null!=(i=t?.optionalChains)?i:[],h=n.concat(e);if(!h.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const c=n.length?t?.methods||index_es_u:[],o=n.length?t?.events||index_es_m:[],r=t?.optionalMethods||[],d=t?.optionalEvents||[],C=t?.rpcMap||this.buildRpcMap(h,t.projectId),I=t?.qrModalOptions||void 0;return{chains:n?.map((l=>this.formatChainId(l))),optionalChains:e.map((l=>this.formatChainId(l))),methods:c,events:o,optionalMethods:r,optionalEvents:d,rpcMap:C,showQrModal:!(null==t||!t.showQrModal),qrModalOptions:I,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,s){const i={};return t.forEach((n=>{i[n]=this.getRpcUrl(n,s)})),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?dist_index_es_g(this.rpc.chains):dist_index_es_g(this.rpc.optionalChains),this.signer=await av.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let s;try{const{WalletConnectModal:i}=await __webpack_require__.e(6416).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@walletconnect/modal/dist/index.js"));s=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(s)try{this.modal=new s(dist_index_es_p({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:s,optionalChains:i,rpcMap:n}=t;s&&(0,index_es.qt)(s)&&(this.rpc.chains=s.map((e=>this.formatChainId(e))),s.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))),i&&(0,index_es.qt)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map((e=>this.formatChainId(e))),i.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})))}getRpcUrl(t,s){var i;return(null==(i=this.rpc.rpcMap)?void 0:i[t])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${t}&projectId=${s||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),s=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:s?.accounts),this.setAccounts(s?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map((s=>this.parseAccount(s)))}}const index_es_G=index_es_v},"./node_modules/@walletconnect/events/dist/esm/events.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>IEvents});class IEvents{}},"./node_modules/@walletconnect/events/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{IEvents:()=>_events__WEBPACK_IMPORTED_MODULE_0__.q});var _events__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@walletconnect/events/dist/esm/events.js")},"./node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HEARTBEAT_EVENTS=exports.HEARTBEAT_INTERVAL=void 0;const time_1=__webpack_require__("./node_modules/@walletconnect/time/dist/cjs/index.js");exports.HEARTBEAT_INTERVAL=time_1.FIVE_SECONDS,exports.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},"./node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js"),exports)},"./node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeartBeat=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js"),events_1=__webpack_require__("./node_modules/events/events.js"),time_1=__webpack_require__("./node_modules/@walletconnect/time/dist/cjs/index.js"),types_1=__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js"),constants_1=__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js");class HeartBeat extends types_1.IHeartBeat{constructor(opts){super(opts),this.events=new events_1.EventEmitter,this.interval=constants_1.HEARTBEAT_INTERVAL,this.interval=(null==opts?void 0:opts.interval)||constants_1.HEARTBEAT_INTERVAL}static init(opts){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const heartbeat=new HeartBeat(opts);return yield heartbeat.init(),heartbeat}))}init(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}initialize(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),time_1.toMiliseconds(this.interval))}))}pulse(){this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse)}}exports.HeartBeat=HeartBeat},"./node_modules/@walletconnect/heartbeat/dist/cjs/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js");tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js"),exports)},"./node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IHeartBeat=void 0;const events_1=__webpack_require__("./node_modules/@walletconnect/events/dist/esm/index.js");class IHeartBeat extends events_1.IEvents{constructor(opts){super()}}exports.IHeartBeat=IHeartBeat},"./node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js"),exports)},"./node_modules/@walletconnect/jsonrpc-ws-connection/node_modules/ws/browser.js":module=>{"use strict";module.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},"./node_modules/@walletconnect/keyvaluestorage/dist/cjs/browser/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js"),safe_json_utils_1=__webpack_require__("./node_modules/safe-json-utils/dist/cjs/index.js"),localStorage_1=tslib_1.__importDefault(__webpack_require__("./node_modules/@walletconnect/keyvaluestorage/dist/cjs/browser/lib/localStorage.js")),shared_1=__webpack_require__("./node_modules/@walletconnect/keyvaluestorage/dist/cjs/shared/index.js");class KeyValueStorage{constructor(){this.localStorage=localStorage_1.default}getKeys(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return Object.keys(this.localStorage)}))}getEntries(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return Object.entries(this.localStorage).map(shared_1.parseEntry)}))}getItem(key){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const item=this.localStorage.getItem(key);if(null!==item)return safe_json_utils_1.safeJsonParse(item)}))}setItem(key,value){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.localStorage.setItem(key,safe_json_utils_1.safeJsonStringify(value))}))}removeItem(key){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.localStorage.removeItem(key)}))}}exports.ZP=KeyValueStorage},"./node_modules/@walletconnect/keyvaluestorage/dist/cjs/browser/lib/localStorage.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";!function(){let db;function LocalStorage(){}db=LocalStorage,db.prototype.getItem=function(key){return this.hasOwnProperty(key)?String(this[key]):null},db.prototype.setItem=function(key,val){this[key]=String(val)},db.prototype.removeItem=function(key){delete this[key]},db.prototype.clear=function(){const self=this;Object.keys(self).forEach((function(key){self[key]=void 0,delete self[key]}))},db.prototype.key=function(i){return i=i||0,Object.keys(this)[i]},db.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),void 0!==__webpack_require__.g&&__webpack_require__.g.localStorage?module.exports=__webpack_require__.g.localStorage:"undefined"!=typeof window&&window.localStorage?module.exports=window.localStorage:module.exports=new LocalStorage}()},"./node_modules/@walletconnect/keyvaluestorage/dist/cjs/shared/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js");tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/keyvaluestorage/dist/cjs/shared/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/keyvaluestorage/dist/cjs/shared/utils.js"),exports)},"./node_modules/@walletconnect/keyvaluestorage/dist/cjs/shared/types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IKeyValueStorage=void 0;exports.IKeyValueStorage=class IKeyValueStorage{}},"./node_modules/@walletconnect/keyvaluestorage/dist/cjs/shared/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseEntry=void 0;const safe_json_utils_1=__webpack_require__("./node_modules/safe-json-utils/dist/cjs/index.js");exports.parseEntry=function parseEntry(entry){var _a;return[entry[0],safe_json_utils_1.safeJsonParse(null!==(_a=entry[1])&&void 0!==_a?_a:"")]}},"./node_modules/@walletconnect/logger/dist/cjs/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PINO_CUSTOM_CONTEXT_KEY=exports.PINO_LOGGER_DEFAULTS=void 0,exports.PINO_LOGGER_DEFAULTS={level:"info"},exports.PINO_CUSTOM_CONTEXT_KEY="custom_context"},"./node_modules/@walletconnect/logger/dist/cjs/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pino=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js"),pino_1=tslib_1.__importDefault(__webpack_require__("./node_modules/pino/browser.js"));Object.defineProperty(exports,"pino",{enumerable:!0,get:function(){return pino_1.default}}),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/constants.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/utils.js"),exports)},"./node_modules/@walletconnect/logger/dist/cjs/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateChildLogger=exports.formatChildLoggerContext=exports.getLoggerContext=exports.setBrowserLoggerContext=exports.getBrowserLoggerContext=exports.getDefaultLoggerOptions=void 0;const constants_1=__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/constants.js");function getBrowserLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]||""}function setBrowserLoggerContext(logger,context,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]=context,logger}function getLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){let context="";return context=void 0===logger.bindings?getBrowserLoggerContext(logger,customContextKey):logger.bindings().context||"",context}function formatChildLoggerContext(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){const parentContext=getLoggerContext(logger,customContextKey);return parentContext.trim()?`${parentContext}/${childContext}`:childContext}exports.getDefaultLoggerOptions=function getDefaultLoggerOptions(opts){return Object.assign(Object.assign({},opts),{level:(null==opts?void 0:opts.level)||constants_1.PINO_LOGGER_DEFAULTS.level})},exports.getBrowserLoggerContext=getBrowserLoggerContext,exports.setBrowserLoggerContext=setBrowserLoggerContext,exports.getLoggerContext=getLoggerContext,exports.formatChildLoggerContext=formatChildLoggerContext,exports.generateChildLogger=function generateChildLogger(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){const context=formatChildLoggerContext(logger,childContext,customContextKey);return setBrowserLoggerContext(logger.child({context}),context,customContextKey)}},"./node_modules/@walletconnect/relay-auth/dist/esm/types.js":()=>{},"./node_modules/cross-fetch/dist/browser-ponyfill.js":function(module,exports){var global="undefined"!=typeof self?self:this,__self__=function(){function F(){this.fetch=!1,this.DOMException=global.DOMException}return F.prototype=global,new F}();!function(self){!function(exports){var support_searchParams="URLSearchParams"in self,support_iterable="Symbol"in self&&"iterator"in Symbol,support_blob="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),support_formData="FormData"in self,support_arrayBuffer="ArrayBuffer"in self;if(support_arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value}}};return support_iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach((function(value,name){this.append(name,value)}),this):Array.isArray(headers)?headers.forEach((function(header){this.append(header[0],header[1])}),this):headers&&Object.getOwnPropertyNames(headers).forEach((function(name){this.append(name,headers[name])}),this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function fileReaderReady(reader){return new Promise((function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}}))}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:support_blob&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:support_formData&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():support_arrayBuffer&&support_blob&&function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}(body)?(this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))?this._bodyArrayBuffer=bufferClone(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support_blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support_formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value},Headers.prototype.delete=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach((function(value,name){items.push(name)})),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach((function(value){items.push(value)})),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach((function(value,name){items.push([name,value])})),iteratorFor(items)},support_iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(input,options){var body=(options=options||{}).body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"same-origin",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.signal=options.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach((function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}})),form}function Response(bodyInit,options){options||(options={}),this.type="default",this.status=void 0===options.status?200:options.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status,headers:{location:url}})},exports.DOMException=self.DOMException;try{new exports.DOMException}catch(err){exports.DOMException=function(message,name){this.message=message,this.name=name;var error=Error(message);this.stack=error.stack},exports.DOMException.prototype=Object.create(Error.prototype),exports.DOMException.prototype.constructor=exports.DOMException}function fetch(input,init){return new Promise((function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted)return reject(new exports.DOMException("Aborted","AbortError"));var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}xhr.onload=function(){var rawHeaders,headers,options={status:xhr.status,statusText:xhr.statusText,headers:(rawHeaders=xhr.getAllResponseHeaders()||"",headers=new Headers,rawHeaders.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}})),headers)};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.onabort=function(){reject(new exports.DOMException("Aborted","AbortError"))},xhr.open(request.method,request.url,!0),"include"===request.credentials?xhr.withCredentials=!0:"omit"===request.credentials&&(xhr.withCredentials=!1),"responseType"in xhr&&support_blob&&(xhr.responseType="blob"),request.headers.forEach((function(value,name){xhr.setRequestHeader(name,value)})),request.signal&&(request.signal.addEventListener("abort",abortXhr),xhr.onreadystatechange=function(){4===xhr.readyState&&request.signal.removeEventListener("abort",abortXhr)}),xhr.send(void 0===request._bodyInit?null:request._bodyInit)}))}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response),exports.Headers=Headers,exports.Request=Request,exports.Response=Response,exports.fetch=fetch,Object.defineProperty(exports,"__esModule",{value:!0})}({})}(__self__),__self__.fetch.ponyfill=!0,delete __self__.fetch.polyfill;var ctx=__self__;(exports=ctx.fetch).default=ctx.fetch,exports.fetch=ctx.fetch,exports.Headers=ctx.Headers,exports.Request=ctx.Request,exports.Response=ctx.Response,module.exports=exports},"./node_modules/events/events.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ReflectOwnKeys,console=__webpack_require__("./node_modules/console-browserify/index.js"),R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)};var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,module.exports.once=function once(emitter,name){return new Promise((function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver),reject(err)}function resolver(){"function"==typeof emitter.removeListener&&emitter.removeListener("error",errorListener),resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:!0}),"error"!==name&&function addErrorHandlerIfEventEmitter(emitter,handler,flags){"function"==typeof emitter.on&&eventTargetAgnosticAddListener(emitter,"error",handler,flags)}(emitter,errorListener,{once:!0})}))},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}function _getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing;if(checkListener(listener),void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]),void 0===existing)existing=events[type]=listener,++target._eventsCount;else if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),(m=_getMaxListeners(target))>0&&existing.length>m&&!existing.warned){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,function ProcessEmitWarning(warning){console&&console.warn&&console.warn(warning)}(w)}return target}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target,type,listener},wrapped=onceWrapper.bind(state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(void 0===events)return[];var evlistener=events[type];return void 0===evlistener?[]:"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function unwrapListeners(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length)}function listenerCount(type){var events=this._events;if(void 0!==events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(void 0!==evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if("function"==typeof emitter.on)flags.once?emitter.once(name,listener):emitter.on(name,listener);else{if("function"!=typeof emitter.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter);emitter.addEventListener(name,(function wrapListener(arg){flags.once&&emitter.removeEventListener(name,wrapListener),listener(arg)}))}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function emit(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){var er;if(args.length>0&&(er=args[0]),er instanceof Error)throw er;var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw err.context=er,err}var handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)ReflectApply(handler,this,args);else{var len=handler.length,listeners=arrayClone(handler,len);for(i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return!0},EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function once(type,listener){return checkListener(listener),this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){return checkListener(listener),this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(checkListener(listener),void 0===(events=this._events))return this;if(void 0===(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]),this;if(0===arguments.length){var key,keys=Object.keys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]}},"./node_modules/lodash.isequal/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=function overArg(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(!function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:function stubArray(){return[]},getTag=baseGetTag;function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function baseUnary(func){return function(value){return func(value)}}(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keys(object){return function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},"./node_modules/pino/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const format=__webpack_require__("./node_modules/quick-format-unescaped/index.js");module.exports=pino;const _console=function pfGlobalThisOrFallback(){function defd(o){return void 0!==o&&o}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return defd(self)||defd(window)||defd(this)||{}}}().console||{},stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function asErrValue(err){const obj={type:err.constructor.name,msg:err.message,stack:err.stack};for(const key in err)void 0===obj[key]&&(obj[key]=err[key]);return obj}};function pino(opts){(opts=opts||{}).browser=opts.browser||{};const transmit=opts.browser.transmit;if(transmit&&"function"!=typeof transmit.send)throw Error("pino: transmit option must have a send function");const proto=opts.browser.write||_console;opts.browser.write&&(opts.browser.asObject=!0);const serializers=opts.serializers||{},serialize=function shouldSerialize(serialize,serializers){if(Array.isArray(serialize))return serialize.filter((function(k){return"!stdSerializers.err"!==k}));return!0===serialize&&Object.keys(serializers)}(opts.browser.serialize,serializers);let stdErrSerialize=opts.browser.serialize;Array.isArray(opts.browser.serialize)&&opts.browser.serialize.indexOf("!stdSerializers.err")>-1&&(stdErrSerialize=!1);"function"==typeof proto&&(proto.error=proto.fatal=proto.warn=proto.info=proto.debug=proto.trace=proto),!1===opts.enabled&&(opts.level="silent");const level=opts.level||"info",logger=Object.create(proto);logger.log||(logger.log=noop),Object.defineProperty(logger,"levelVal",{get:function getLevelVal(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(logger,"level",{get:function getLevel(){return this._level},set:function setLevel(level){if("silent"!==level&&!this.levels.values[level])throw Error("unknown level "+level);this._level=level,set(setOpts,logger,"error","log"),set(setOpts,logger,"fatal","error"),set(setOpts,logger,"warn","error"),set(setOpts,logger,"info","log"),set(setOpts,logger,"debug","log"),set(setOpts,logger,"trace","log")}});const setOpts={transmit,serialize,asObject:opts.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:getTimeFunction(opts)};return logger.levels=pino.levels,logger.level=level,logger.setMaxListeners=logger.getMaxListeners=logger.emit=logger.addListener=logger.on=logger.prependListener=logger.once=logger.prependOnceListener=logger.removeListener=logger.removeAllListeners=logger.listeners=logger.listenerCount=logger.eventNames=logger.write=logger.flush=noop,logger.serializers=serializers,logger._serialize=serialize,logger._stdErrSerialize=stdErrSerialize,logger.child=function child(bindings,childOptions){if(!bindings)throw new Error("missing bindings for child Pino");childOptions=childOptions||{},serialize&&bindings.serializers&&(childOptions.serializers=bindings.serializers);const childOptionsSerializers=childOptions.serializers;if(serialize&&childOptionsSerializers){var childSerializers=Object.assign({},serializers,childOptionsSerializers),childSerialize=!0===opts.browser.serialize?Object.keys(childSerializers):serialize;delete bindings.serializers,applySerializers([bindings],childSerialize,childSerializers,this._stdErrSerialize)}function Child(parent){this._childLevel=1+(0|parent._childLevel),this.error=bind(parent,bindings,"error"),this.fatal=bind(parent,bindings,"fatal"),this.warn=bind(parent,bindings,"warn"),this.info=bind(parent,bindings,"info"),this.debug=bind(parent,bindings,"debug"),this.trace=bind(parent,bindings,"trace"),childSerializers&&(this.serializers=childSerializers,this._serialize=childSerialize),transmit&&(this._logEvent=createLogEventShape([].concat(parent._logEvent.bindings,bindings)))}return Child.prototype=this,new Child(this)},transmit&&(logger._logEvent=createLogEventShape()),logger}function set(opts,logger,level,fallback){const proto=Object.getPrototypeOf(logger);logger[level]=logger.levelVal>logger.levels.values[level]?noop:proto[level]?proto[level]:_console[level]||_console[fallback]||noop,function wrap(opts,logger,level){if(!opts.transmit&&logger[level]===noop)return;logger[level]=(write=logger[level],function LOG(){const ts=opts.timestamp(),args=new Array(arguments.length),proto=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_console?_console:this;for(var i=0;i<args.length;i++)args[i]=arguments[i];if(opts.serialize&&!opts.asObject&&applySerializers(args,this._serialize,this.serializers,this._stdErrSerialize),opts.asObject?write.call(proto,function asObject(logger,level,args,ts){logger._serialize&&applySerializers(args,logger._serialize,logger.serializers,logger._stdErrSerialize);const argsCloned=args.slice();let msg=argsCloned[0];const o={};ts&&(o.time=ts),o.level=pino.levels.values[level];let lvl=1+(0|logger._childLevel);if(lvl<1&&(lvl=1),null!==msg&&"object"==typeof msg){for(;lvl--&&"object"==typeof argsCloned[0];)Object.assign(o,argsCloned.shift());msg=argsCloned.length?format(argsCloned.shift(),argsCloned):void 0}else"string"==typeof msg&&(msg=format(argsCloned.shift(),argsCloned));return void 0!==msg&&(o.msg=msg),o}(this,level,args,ts)):write.apply(proto,args),opts.transmit){const transmitLevel=opts.transmit.level||logger.level,transmitValue=pino.levels.values[transmitLevel],methodValue=pino.levels.values[level];if(methodValue<transmitValue)return;!function transmit(logger,opts,args){const send=opts.send,ts=opts.ts,methodLevel=opts.methodLevel,methodValue=opts.methodValue,val=opts.val,bindings=logger._logEvent.bindings;applySerializers(args,logger._serialize||Object.keys(logger.serializers),logger.serializers,void 0===logger._stdErrSerialize||logger._stdErrSerialize),logger._logEvent.ts=ts,logger._logEvent.messages=args.filter((function(arg){return-1===bindings.indexOf(arg)})),logger._logEvent.level.label=methodLevel,logger._logEvent.level.value=methodValue,send(methodLevel,logger._logEvent,val),logger._logEvent=createLogEventShape(bindings)}(this,{ts,methodLevel:level,methodValue,transmitLevel,transmitValue:pino.levels.values[opts.transmit.level||logger.level],send:opts.transmit.send,val:logger.levelVal},args)}});var write}(opts,logger,level)}function applySerializers(args,serialize,serializers,stdErrSerialize){for(const i in args)if(stdErrSerialize&&args[i]instanceof Error)args[i]=pino.stdSerializers.err(args[i]);else if("object"==typeof args[i]&&!Array.isArray(args[i]))for(const k in args[i])serialize&&serialize.indexOf(k)>-1&&k in serializers&&(args[i][k]=serializers[k](args[i][k]))}function bind(parent,bindings,level){return function(){const args=new Array(1+arguments.length);args[0]=bindings;for(var i=1;i<args.length;i++)args[i]=arguments[i-1];return parent[level].apply(this,args)}}function createLogEventShape(bindings){return{ts:0,messages:[],bindings:bindings||[],level:{label:"",value:0}}}function getTimeFunction(opts){return"function"==typeof opts.timestamp?opts.timestamp:!1===opts.timestamp?nullTime:epochTime}function mock(){return{}}function passthrough(a){return a}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers=stdSerializers,pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function unixTime(){return Math.round(Date.now()/1e3)},isoTime:function isoTime(){return new Date(Date.now()).toISOString()}})},"./node_modules/quick-format-unescaped/index.js":module=>{"use strict";function tryStringify(o){try{return JSON.stringify(o)}catch(e){return'"[Circular]"'}}module.exports=function format(f,args,opts){var ss=opts&&opts.stringify||tryStringify;if("object"==typeof f&&null!==f){var len=args.length+1;if(1===len)return f;var objects=new Array(len);objects[0]=ss(f);for(var index=1;index<len;index++)objects[index]=ss(args[index]);return objects.join(" ")}if("string"!=typeof f)return f;var argLen=args.length;if(0===argLen)return f;for(var str="",a=0,lastPos=-1,flen=f&&f.length||0,i=0;i<flen;){if(37===f.charCodeAt(i)&&i+1<flen){switch(lastPos=lastPos>-1?lastPos:0,f.charCodeAt(i+1)){case 100:case 102:if(a>=argLen)break;if(null==args[a])break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=Number(args[a]),lastPos=i+2,i++;break;case 105:if(a>=argLen)break;if(null==args[a])break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=Math.floor(Number(args[a])),lastPos=i+2,i++;break;case 79:case 111:case 106:if(a>=argLen)break;if(void 0===args[a])break;lastPos<i&&(str+=f.slice(lastPos,i));var type=typeof args[a];if("string"===type){str+="'"+args[a]+"'",lastPos=i+2,i++;break}if("function"===type){str+=args[a].name||"<anonymous>",lastPos=i+2,i++;break}str+=ss(args[a]),lastPos=i+2,i++;break;case 115:if(a>=argLen)break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=String(args[a]),lastPos=i+2,i++;break;case 37:lastPos<i&&(str+=f.slice(lastPos,i)),str+="%",lastPos=i+2,i++,a--}++a}++i}if(-1===lastPos)return f;lastPos<flen&&(str+=f.slice(lastPos));return str}},"./node_modules/safe-json-utils/dist/cjs/index.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.safeJsonParse=function safeJsonParse(value){if("string"!=typeof value)throw new Error("Cannot safe json parse value of type "+typeof value);try{return JSON.parse(value)}catch(_a){return value}},exports.safeJsonStringify=function safeJsonStringify(value){return"string"==typeof value?value:JSON.stringify(value,((key,value)=>void 0===value?null:value))}}}]);