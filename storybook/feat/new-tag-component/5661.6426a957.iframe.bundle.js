/*! For license information please see 5661.6426a957.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkmatters_web=self.webpackChunkmatters_web||[]).push([[5661],{"./node_modules/@stablelib/ed25519/lib/ed25519.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.Xx=exports._w=exports.aP=exports.KS=exports.jQ=void 0;const random_1=__webpack_require__("./node_modules/@stablelib/random/lib/random.js"),sha512_1=__webpack_require__("./node_modules/@stablelib/sha512/lib/sha512.js"),wipe_1=__webpack_require__("./node_modules/@stablelib/wipe/lib/wipe.js");function gf(init){const r=new Float64Array(16);if(init)for(let i=0;i<init.length;i++)r[i]=init[i];return r}exports.jQ=64,exports.KS=64,exports.aP=32;new Uint8Array(32)[0]=9;const gf0=gf(),gf1=gf([1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function set25519(r,a){for(let i=0;i<16;i++)r[i]=0|a[i]}function car25519(o){let c=1;for(let i=0;i<16;i++){let v=o[i]+c+65535;c=Math.floor(v/65536),o[i]=v-65536*c}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){const c=~(b-1);for(let i=0;i<16;i++){const t=c&(p[i]^q[i]);p[i]^=t,q[i]^=t}}function pack25519(o,n){const m=gf(),t=gf();for(let i=0;i<16;i++)t[i]=n[i];car25519(t),car25519(t),car25519(t);for(let j=0;j<2;j++){m[0]=t[0]-65517;for(let i=1;i<15;i++)m[i]=t[i]-65535-(m[i-1]>>16&1),m[i-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1);const b=m[15]>>16&1;m[14]&=65535,sel25519(t,m,1-b)}for(let i=0;i<16;i++)o[2*i]=255&t[i],o[2*i+1]=t[i]>>8}function verify32(x,y){let d=0;for(let i=0;i<32;i++)d|=x[i]^y[i];return(1&d-1>>>8)-1}function neq25519(a,b){const c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,a),pack25519(d,b),verify32(c,d)}function par25519(a){const d=new Uint8Array(32);return pack25519(d,a),1&d[0]}function add(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]+b[i]}function sub(o,a,b){for(let i=0;i<16;i++)o[i]=a[i]-b[i]}function mul(o,a,b){let v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0],t0+=v*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,v=a[1],t1+=v*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,v=a[2],t2+=v*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,v=a[3],t3+=v*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,v=a[4],t4+=v*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,v=a[5],t5+=v*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,v=a[6],t6+=v*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,v=a[7],t7+=v*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,v=a[8],t8+=v*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,v=a[9],t9+=v*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,v=a[10],t10+=v*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,v=a[11],t11+=v*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,v=a[12],t12+=v*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,v=a[13],t13+=v*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,v=a[14],t14+=v*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,v=a[15],t15+=v*b0,t16+=v*b1,t17+=v*b2,t18+=v*b3,t19+=v*b4,t20+=v*b5,t21+=v*b6,t22+=v*b7,t23+=v*b8,t24+=v*b9,t25+=v*b10,t26+=v*b11,t27+=v*b12,t28+=v*b13,t29+=v*b14,t30+=v*b15,t0+=38*t16,t1+=38*t17,t2+=38*t18,t3+=38*t19,t4+=38*t20,t5+=38*t21,t6+=38*t22,t7+=38*t23,t8+=38*t24,t9+=38*t25,t10+=38*t26,t11+=38*t27,t12+=38*t28,t13+=38*t29,t14+=38*t30,c=1,v=t0+c+65535,c=Math.floor(v/65536),t0=v-65536*c,v=t1+c+65535,c=Math.floor(v/65536),t1=v-65536*c,v=t2+c+65535,c=Math.floor(v/65536),t2=v-65536*c,v=t3+c+65535,c=Math.floor(v/65536),t3=v-65536*c,v=t4+c+65535,c=Math.floor(v/65536),t4=v-65536*c,v=t5+c+65535,c=Math.floor(v/65536),t5=v-65536*c,v=t6+c+65535,c=Math.floor(v/65536),t6=v-65536*c,v=t7+c+65535,c=Math.floor(v/65536),t7=v-65536*c,v=t8+c+65535,c=Math.floor(v/65536),t8=v-65536*c,v=t9+c+65535,c=Math.floor(v/65536),t9=v-65536*c,v=t10+c+65535,c=Math.floor(v/65536),t10=v-65536*c,v=t11+c+65535,c=Math.floor(v/65536),t11=v-65536*c,v=t12+c+65535,c=Math.floor(v/65536),t12=v-65536*c,v=t13+c+65535,c=Math.floor(v/65536),t13=v-65536*c,v=t14+c+65535,c=Math.floor(v/65536),t14=v-65536*c,v=t15+c+65535,c=Math.floor(v/65536),t15=v-65536*c,t0+=c-1+37*(c-1),c=1,v=t0+c+65535,c=Math.floor(v/65536),t0=v-65536*c,v=t1+c+65535,c=Math.floor(v/65536),t1=v-65536*c,v=t2+c+65535,c=Math.floor(v/65536),t2=v-65536*c,v=t3+c+65535,c=Math.floor(v/65536),t3=v-65536*c,v=t4+c+65535,c=Math.floor(v/65536),t4=v-65536*c,v=t5+c+65535,c=Math.floor(v/65536),t5=v-65536*c,v=t6+c+65535,c=Math.floor(v/65536),t6=v-65536*c,v=t7+c+65535,c=Math.floor(v/65536),t7=v-65536*c,v=t8+c+65535,c=Math.floor(v/65536),t8=v-65536*c,v=t9+c+65535,c=Math.floor(v/65536),t9=v-65536*c,v=t10+c+65535,c=Math.floor(v/65536),t10=v-65536*c,v=t11+c+65535,c=Math.floor(v/65536),t11=v-65536*c,v=t12+c+65535,c=Math.floor(v/65536),t12=v-65536*c,v=t13+c+65535,c=Math.floor(v/65536),t13=v-65536*c,v=t14+c+65535,c=Math.floor(v/65536),t14=v-65536*c,v=t15+c+65535,c=Math.floor(v/65536),t15=v-65536*c,t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function square(o,a){mul(o,a,a)}function inv25519(o,i){const c=gf();let a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)square(c,c),2!==a&&4!==a&&mul(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function edadd(p,q){const a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();sub(a,p[1],p[0]),sub(t,q[1],q[0]),mul(a,a,t),add(b,p[0],p[1]),add(t,q[0],q[1]),mul(b,b,t),mul(c,p[3],q[3]),mul(c,c,D2),mul(d,p[2],q[2]),add(d,d,d),sub(e,b,a),sub(f,d,c),add(g,d,c),add(h,b,a),mul(p[0],e,f),mul(p[1],h,g),mul(p[2],g,f),mul(p[3],e,h)}function cswap(p,q,b){for(let i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){const tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]),mul(tx,p[0],zi),mul(ty,p[1],zi),pack25519(r,ty),r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0);for(let i=255;i>=0;--i){const b=s[i/8|0]>>(7&i)&1;cswap(p,q,b),edadd(q,p),edadd(p,p),cswap(p,q,b)}}function scalarbase(p,s){const q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),mul(q[3],X,Y),scalarmult(p,q,s)}function generateKeyPairFromSeed(seed){if(seed.length!==exports.aP)throw new Error(`ed25519: seed must be ${exports.aP} bytes`);const d=(0,sha512_1.hash)(seed);d[0]&=248,d[31]&=127,d[31]|=64;const publicKey=new Uint8Array(32),p=[gf(),gf(),gf(),gf()];scalarbase(p,d),pack(publicKey,p);const secretKey=new Uint8Array(64);return secretKey.set(seed),secretKey.set(publicKey,32),{publicKey,secretKey}}exports._w=generateKeyPairFromSeed;const L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){let carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=Math.floor((x[j]+128)/256),x[j]-=256*carry;x[j]+=carry,x[i]=0}for(carry=0,j=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=255&x[i]}function reduce(r){const x=new Float64Array(64);for(let i=0;i<64;i++)x[i]=r[i];for(let i=0;i<64;i++)r[i]=0;modL(r,x)}function unpackneg(r,p){const t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();return set25519(r[2],gf1),function unpack25519(o,n){for(let i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}(r[1],p),square(num,r[1]),mul(den,num,D),sub(num,num,r[2]),add(den,r[2],den),square(den2,den),square(den4,den2),mul(den6,den4,den2),mul(t,den6,num),mul(t,t,den),function pow2523(o,i){const c=gf();let a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--)square(c,c),1!==a&&mul(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}(t,t),mul(t,t,num),mul(t,t,den),mul(t,t,den),mul(r[0],t,den),square(chk,r[0]),mul(chk,chk,den),neq25519(chk,num)&&mul(r[0],r[0],I),square(chk,r[0]),mul(chk,chk,den),neq25519(chk,num)?-1:(par25519(r[0])===p[31]>>7&&sub(r[0],gf0,r[0]),mul(r[3],r[0],r[1]),0)}exports.Xx=function sign(secretKey,message){const x=new Float64Array(64),p=[gf(),gf(),gf(),gf()],d=(0,sha512_1.hash)(secretKey.subarray(0,32));d[0]&=248,d[31]&=127,d[31]|=64;const signature=new Uint8Array(64);signature.set(d.subarray(32),32);const hs=new sha512_1.SHA512;hs.update(signature.subarray(32)),hs.update(message);const r=hs.digest();hs.clean(),reduce(r),scalarbase(p,r),pack(signature,p),hs.reset(),hs.update(signature.subarray(0,32)),hs.update(secretKey.subarray(32)),hs.update(message);const h=hs.digest();reduce(h);for(let i=0;i<32;i++)x[i]=r[i];for(let i=0;i<32;i++)for(let j=0;j<32;j++)x[i+j]+=h[i]*d[j];return modL(signature.subarray(32),x),signature}},"./node_modules/@stablelib/sha512/lib/sha512.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binary_1=__webpack_require__("./node_modules/@stablelib/binary/lib/binary.js"),wipe_1=__webpack_require__("./node_modules/@stablelib/wipe/lib/wipe.js");exports.DIGEST_LENGTH=64,exports.BLOCK_SIZE=128;var SHA512=function(){function SHA512(){this.digestLength=exports.DIGEST_LENGTH,this.blockSize=exports.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){wipe_1.wipe(this._buffer),wipe_1.wipe(this._tempHi),wipe_1.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(data,dataLength){if(void 0===dataLength&&(dataLength=data.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var dataPos=0;if(this._bytesHashed+=dataLength,this._bufferLength>0){for(;this._bufferLength<exports.BLOCK_SIZE&&dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(dataLength>=this.blockSize&&(dataPos=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,data,dataPos,dataLength),dataLength%=this.blockSize);dataLength>0;)this._buffer[this._bufferLength++]=data[dataPos++],dataLength--;return this},SHA512.prototype.finish=function(out){if(!this._finished){var bytesHashed=this._bytesHashed,left=this._bufferLength,bitLenHi=bytesHashed/536870912|0,bitLenLo=bytesHashed<<3,padLength=bytesHashed%128<112?128:256;this._buffer[left]=128;for(var i=left+1;i<padLength-8;i++)this._buffer[i]=0;binary_1.writeUint32BE(bitLenHi,this._buffer,padLength-8),binary_1.writeUint32BE(bitLenLo,this._buffer,padLength-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,padLength),this._finished=!0}for(i=0;i<this.digestLength/8;i++)binary_1.writeUint32BE(this._stateHi[i],out,8*i),binary_1.writeUint32BE(this._stateLo[i],out,8*i+4);return this},SHA512.prototype.digest=function(){var out=new Uint8Array(this.digestLength);return this.finish(out),out},SHA512.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(savedState){return this._stateHi.set(savedState.stateHi),this._stateLo.set(savedState.stateLo),this._bufferLength=savedState.bufferLength,savedState.buffer&&this._buffer.set(savedState.buffer),this._bytesHashed=savedState.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(savedState){wipe_1.wipe(savedState.stateHi),wipe_1.wipe(savedState.stateLo),savedState.buffer&&wipe_1.wipe(savedState.buffer),savedState.bufferLength=0,savedState.bytesHashed=0},SHA512}();exports.SHA512=SHA512;var K=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(wh,wl,hh,hl,m,pos,len){for(var h,l,th,tl,a,b,c,d,ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];len>=128;){for(var i=0;i<16;i++){var j=8*i+pos;wh[i]=binary_1.readUint32BE(m,j),wl[i]=binary_1.readUint32BE(m,j+4)}for(i=0;i<80;i++){var bh7,bl7,bh0=ah0,bh1=ah1,bh2=ah2,bh3=ah3,bh4=ah4,bh5=ah5,bh6=ah6,bl0=al0,bl1=al1,bl2=al2,bl3=al3,bl4=al4,bl5=al5,bl6=al6;if(a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,a+=65535&(l=(al4>>>14|ah4<<18)^(al4>>>18|ah4<<14)^(ah4>>>9|al4<<23)),b+=l>>>16,c+=65535&(h=(ah4>>>14|al4<<18)^(ah4>>>18|al4<<14)^(al4>>>9|ah4<<23)),d+=h>>>16,a+=65535&(l=al4&al5^~al4&al6),b+=l>>>16,c+=65535&(h=ah4&ah5^~ah4&ah6),d+=h>>>16,h=K[2*i],a+=65535&(l=K[2*i+1]),b+=l>>>16,c+=65535&h,d+=h>>>16,h=wh[i%16],b+=(l=wl[i%16])>>>16,c+=65535&h,d+=h>>>16,c+=(b+=(a+=65535&l)>>>16)>>>16,a=65535&(l=tl=65535&a|b<<16),b=l>>>16,c=65535&(h=th=65535&c|(d+=c>>>16)<<16),d=h>>>16,a+=65535&(l=(al0>>>28|ah0<<4)^(ah0>>>2|al0<<30)^(ah0>>>7|al0<<25)),b+=l>>>16,c+=65535&(h=(ah0>>>28|al0<<4)^(al0>>>2|ah0<<30)^(al0>>>7|ah0<<25)),d+=h>>>16,b+=(l=al0&al1^al0&al2^al1&al2)>>>16,c+=65535&(h=ah0&ah1^ah0&ah2^ah1&ah2),d+=h>>>16,bh7=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,bl7=65535&a|b<<16,a=65535&(l=bl3),b=l>>>16,c=65535&(h=bh3),d=h>>>16,b+=(l=tl)>>>16,c+=65535&(h=th),d+=h>>>16,ah1=bh0,ah2=bh1,ah3=bh2,ah4=bh3=65535&(c+=(b+=(a+=65535&l)>>>16)>>>16)|(d+=c>>>16)<<16,ah5=bh4,ah6=bh5,ah7=bh6,ah0=bh7,al1=bl0,al2=bl1,al3=bl2,al4=bl3=65535&a|b<<16,al5=bl4,al6=bl5,al7=bl6,al0=bl7,i%16==15)for(j=0;j<16;j++)h=wh[j],a=65535&(l=wl[j]),b=l>>>16,c=65535&h,d=h>>>16,h=wh[(j+9)%16],a+=65535&(l=wl[(j+9)%16]),b+=l>>>16,c+=65535&h,d+=h>>>16,th=wh[(j+1)%16],a+=65535&(l=((tl=wl[(j+1)%16])>>>1|th<<31)^(tl>>>8|th<<24)^(tl>>>7|th<<25)),b+=l>>>16,c+=65535&(h=(th>>>1|tl<<31)^(th>>>8|tl<<24)^th>>>7),d+=h>>>16,th=wh[(j+14)%16],b+=(l=((tl=wl[(j+14)%16])>>>19|th<<13)^(th>>>29|tl<<3)^(tl>>>6|th<<26))>>>16,c+=65535&(h=(th>>>19|tl<<13)^(tl>>>29|th<<3)^th>>>6),d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,wh[j]=65535&c|d<<16,wl[j]=65535&a|b<<16}a=65535&(l=al0),b=l>>>16,c=65535&(h=ah0),d=h>>>16,h=hh[0],b+=(l=hl[0])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[0]=ah0=65535&c|d<<16,hl[0]=al0=65535&a|b<<16,a=65535&(l=al1),b=l>>>16,c=65535&(h=ah1),d=h>>>16,h=hh[1],b+=(l=hl[1])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[1]=ah1=65535&c|d<<16,hl[1]=al1=65535&a|b<<16,a=65535&(l=al2),b=l>>>16,c=65535&(h=ah2),d=h>>>16,h=hh[2],b+=(l=hl[2])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[2]=ah2=65535&c|d<<16,hl[2]=al2=65535&a|b<<16,a=65535&(l=al3),b=l>>>16,c=65535&(h=ah3),d=h>>>16,h=hh[3],b+=(l=hl[3])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[3]=ah3=65535&c|d<<16,hl[3]=al3=65535&a|b<<16,a=65535&(l=al4),b=l>>>16,c=65535&(h=ah4),d=h>>>16,h=hh[4],b+=(l=hl[4])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[4]=ah4=65535&c|d<<16,hl[4]=al4=65535&a|b<<16,a=65535&(l=al5),b=l>>>16,c=65535&(h=ah5),d=h>>>16,h=hh[5],b+=(l=hl[5])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[5]=ah5=65535&c|d<<16,hl[5]=al5=65535&a|b<<16,a=65535&(l=al6),b=l>>>16,c=65535&(h=ah6),d=h>>>16,h=hh[6],b+=(l=hl[6])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[6]=ah6=65535&c|d<<16,hl[6]=al6=65535&a|b<<16,a=65535&(l=al7),b=l>>>16,c=65535&(h=ah7),d=h>>>16,h=hh[7],b+=(l=hl[7])>>>16,c+=65535&h,d+=h>>>16,d+=(c+=(b+=(a+=65535&l)>>>16)>>>16)>>>16,hh[7]=ah7=65535&c|d<<16,hl[7]=al7=65535&a|b<<16,pos+=128,len-=128}return pos}exports.hash=function hash(data){var h=new SHA512;h.update(data);var digest=h.digest();return h.clean(),digest}},"./node_modules/@walletconnect/environment/dist/cjs/crypto.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function getBrowerCrypto(){return(null===__webpack_require__.g||void 0===__webpack_require__.g?void 0:__webpack_require__.g.crypto)||(null===__webpack_require__.g||void 0===__webpack_require__.g?void 0:__webpack_require__.g.msCrypto)||{}}function getSubtleCrypto(){const browserCrypto=getBrowerCrypto();return browserCrypto.subtle||browserCrypto.webkitSubtle}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowserCryptoAvailable=exports.getSubtleCrypto=exports.getBrowerCrypto=void 0,exports.getBrowerCrypto=getBrowerCrypto,exports.getSubtleCrypto=getSubtleCrypto,exports.isBrowserCryptoAvailable=function isBrowserCryptoAvailable(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}},"./node_modules/@walletconnect/environment/dist/cjs/env.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowser=exports.isNode=exports.isReactNative=void 0,exports.isReactNative=isReactNative,exports.isNode=isNode,exports.isBrowser=function isBrowser(){return!isReactNative()&&!isNode()}},"./node_modules/@walletconnect/environment/dist/cjs/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js");tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/environment/dist/cjs/crypto.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/environment/dist/cjs/env.js"),exports)},"./node_modules/@walletconnect/ethereum-provider/dist/index.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EthereumProvider:()=>index_es_G});var events=__webpack_require__("./node_modules/events/events.js"),events_default=__webpack_require__.n(events),index_es=__webpack_require__("./node_modules/@walletconnect/utils/dist/index.es.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(key,value){if(!("__proto__"===key||"constructor"===key&&value&&"object"==typeof value&&"prototype"in value))return value;(function warnKeyDropped(key){console.warn(`[destr] Dropping "${key}" key to prevent prototype pollution.`)})(key)}function destr(value,options={}){if("string"!=typeof value)return value;const _value=value.trim();if('"'===value[0]&&value.endsWith('"')&&!value.includes("\\"))return _value.slice(1,-1);if(_value.length<=9){const _lval=_value.toLowerCase();if("true"===_lval)return!0;if("false"===_lval)return!1;if("undefined"===_lval)return;if("null"===_lval)return null;if("nan"===_lval)return Number.NaN;if("infinity"===_lval)return Number.POSITIVE_INFINITY;if("-infinity"===_lval)return Number.NEGATIVE_INFINITY}if(!JsonSigRx.test(value)){if(options.strict)throw new SyntaxError("[destr] Invalid JSON");return value}try{if(suspectProtoRx.test(value)||suspectConstructorRx.test(value)){if(options.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(value,jsonParseTransform)}return JSON.parse(value)}catch(error){if(options.strict)throw error;return value}}var Buffer=__webpack_require__("./node_modules/node-polyfill-webpack-plugin/node_modules/buffer/index.js").lW;function asyncCall(function_,...arguments_){try{return function wrapToPromise(value){return value&&"function"==typeof value.then?value:Promise.resolve(value)}(function_(...arguments_))}catch(error){return Promise.reject(error)}}function stringify(value){if(function isPrimitive(value){const type=typeof value;return null===value||"object"!==type&&"function"!==type}(value))return String(value);if(function isPureObject(value){const proto=Object.getPrototypeOf(value);return!proto||proto.isPrototypeOf(Object)}(value)||Array.isArray(value))return JSON.stringify(value);if("function"==typeof value.toJSON)return stringify(value.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function checkBufferSupport(){if(void 0===typeof Buffer)throw new TypeError("[unstorage] Buffer is not supported!")}const BASE64_PREFIX="base64:";function normalizeKey(key){return key?key.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function joinKeys(...keys){return normalizeKey(keys.join(":"))}function unstorage_8581f561_normalizeBaseKey(base){return(base=normalizeKey(base))?base+":":""}var dist_console=__webpack_require__("./node_modules/console-browserify/index.js");const memory=()=>{const data=new Map;return{name:"memory",options:{},hasItem:key=>data.has(key),getItem:key=>data.get(key)??null,getItemRaw:key=>data.get(key)??null,setItem(key,value){data.set(key,value)},setItemRaw(key,value){data.set(key,value)},removeItem(key){data.delete(key)},getKeys:()=>Array.from(data.keys()),clear(){data.clear()},dispose(){data.clear()}}};function createStorage(options={}){const context={mounts:{"":options.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=key=>{for(const base of context.mountpoints)if(key.startsWith(base))return{base,relativeKey:key.slice(base.length),driver:context.mounts[base]};return{base:"",relativeKey:key,driver:context.mounts[""]}},getMounts=(base,includeParent)=>context.mountpoints.filter((mountpoint=>mountpoint.startsWith(base)||includeParent&&base.startsWith(mountpoint))).map((mountpoint=>({relativeBase:base.length>mountpoint.length?base.slice(mountpoint.length):void 0,mountpoint,driver:context.mounts[mountpoint]}))),onChange=(event,key)=>{if(context.watching){key=normalizeKey(key);for(const listener of context.watchListeners)listener(event,key)}},stopWatch=async()=>{if(context.watching){for(const mountpoint in context.unwatch)await context.unwatch[mountpoint]();context.unwatch={},context.watching=!1}},runBatch=(items,commonOptions,cb)=>{const batches=new Map,getBatch=mount=>{let batch=batches.get(mount.base);return batch||(batch={driver:mount.driver,base:mount.base,items:[]},batches.set(mount.base,batch)),batch};for(const item of items){const isStringItem="string"==typeof item,key=normalizeKey(isStringItem?item:item.key),value=isStringItem?void 0:item.value,options2=isStringItem||!item.options?commonOptions:{...commonOptions,...item.options},mount=getMount(key);getBatch(mount).items.push({key,value,relativeKey:mount.relativeKey,options:options2})}return Promise.all([...batches.values()].map((batch=>cb(batch)))).then((r=>r.flat()))},storage={hasItem(key,opts={}){key=normalizeKey(key);const{relativeKey,driver}=getMount(key);return asyncCall(driver.hasItem,relativeKey,opts)},getItem(key,opts={}){key=normalizeKey(key);const{relativeKey,driver}=getMount(key);return asyncCall(driver.getItem,relativeKey,opts).then((value=>destr(value)))},getItems:(items,commonOptions)=>runBatch(items,commonOptions,(batch=>batch.driver.getItems?asyncCall(batch.driver.getItems,batch.items.map((item=>({key:item.relativeKey,options:item.options}))),commonOptions).then((r=>r.map((item=>({key:joinKeys(batch.base,item.key),value:destr(item.value)}))))):Promise.all(batch.items.map((item=>asyncCall(batch.driver.getItem,item.relativeKey,item.options).then((value=>({key:item.key,value:destr(value)})))))))),getItemRaw(key,opts={}){key=normalizeKey(key);const{relativeKey,driver}=getMount(key);return driver.getItemRaw?asyncCall(driver.getItemRaw,relativeKey,opts):asyncCall(driver.getItem,relativeKey,opts).then((value=>function deserializeRaw(value){return"string"!=typeof value?value:value.startsWith(BASE64_PREFIX)?(checkBufferSupport(),Buffer.from(value.slice(BASE64_PREFIX.length),"base64")):value}(value)))},async setItem(key,value,opts={}){if(void 0===value)return storage.removeItem(key);key=normalizeKey(key);const{relativeKey,driver}=getMount(key);driver.setItem&&(await asyncCall(driver.setItem,relativeKey,stringify(value),opts),driver.watch||onChange("update",key))},async setItems(items,commonOptions){await runBatch(items,commonOptions,(async batch=>{batch.driver.setItems&&await asyncCall(batch.driver.setItems,batch.items.map((item=>({key:item.relativeKey,value:stringify(item.value),options:item.options}))),commonOptions),batch.driver.setItem&&await Promise.all(batch.items.map((item=>asyncCall(batch.driver.setItem,item.relativeKey,stringify(item.value),item.options))))}))},async setItemRaw(key,value,opts={}){if(void 0===value)return storage.removeItem(key,opts);key=normalizeKey(key);const{relativeKey,driver}=getMount(key);if(driver.setItemRaw)await asyncCall(driver.setItemRaw,relativeKey,value,opts);else{if(!driver.setItem)return;await asyncCall(driver.setItem,relativeKey,function serializeRaw(value){if("string"==typeof value)return value;checkBufferSupport();const base64=Buffer.from(value).toString("base64");return BASE64_PREFIX+base64}(value),opts)}driver.watch||onChange("update",key)},async removeItem(key,opts={}){"boolean"==typeof opts&&(opts={removeMeta:opts}),key=normalizeKey(key);const{relativeKey,driver}=getMount(key);driver.removeItem&&(await asyncCall(driver.removeItem,relativeKey,opts),(opts.removeMeta||opts.removeMata)&&await asyncCall(driver.removeItem,relativeKey+"$",opts),driver.watch||onChange("remove",key))},async getMeta(key,opts={}){"boolean"==typeof opts&&(opts={nativeOnly:opts}),key=normalizeKey(key);const{relativeKey,driver}=getMount(key),meta=Object.create(null);if(driver.getMeta&&Object.assign(meta,await asyncCall(driver.getMeta,relativeKey,opts)),!opts.nativeOnly){const value=await asyncCall(driver.getItem,relativeKey+"$",opts).then((value_=>destr(value_)));value&&"object"==typeof value&&("string"==typeof value.atime&&(value.atime=new Date(value.atime)),"string"==typeof value.mtime&&(value.mtime=new Date(value.mtime)),Object.assign(meta,value))}return meta},setMeta(key,value,opts={}){return this.setItem(key+"$",value,opts)},removeMeta(key,opts={}){return this.removeItem(key+"$",opts)},async getKeys(base,opts={}){base=unstorage_8581f561_normalizeBaseKey(base);const mounts=getMounts(base,!0);let maskedMounts=[];const allKeys=[];for(const mount of mounts){const keys=(await asyncCall(mount.driver.getKeys,mount.relativeBase,opts)).map((key=>mount.mountpoint+normalizeKey(key))).filter((key=>!maskedMounts.some((p=>key.startsWith(p)))));allKeys.push(...keys),maskedMounts=[mount.mountpoint,...maskedMounts.filter((p=>!p.startsWith(mount.mountpoint)))]}return base?allKeys.filter((key=>key.startsWith(base)&&!key.endsWith("$"))):allKeys.filter((key=>!key.endsWith("$")))},async clear(base,opts={}){base=unstorage_8581f561_normalizeBaseKey(base),await Promise.all(getMounts(base,!1).map((async m=>{if(m.driver.clear)return asyncCall(m.driver.clear,m.relativeBase,opts);if(m.driver.removeItem){const keys=await m.driver.getKeys(m.relativeBase||"",opts);return Promise.all(keys.map((key=>m.driver.removeItem(key,opts))))}})))},async dispose(){await Promise.all(Object.values(context.mounts).map((driver=>dispose(driver))))},watch:async callback=>(await(async()=>{if(!context.watching){context.watching=!0;for(const mountpoint in context.mounts)context.unwatch[mountpoint]=await watch(context.mounts[mountpoint],onChange,mountpoint)}})(),context.watchListeners.push(callback),async()=>{context.watchListeners=context.watchListeners.filter((listener=>listener!==callback)),0===context.watchListeners.length&&await stopWatch()}),async unwatch(){context.watchListeners=[],await stopWatch()},mount(base,driver){if((base=unstorage_8581f561_normalizeBaseKey(base))&&context.mounts[base])throw new Error(`already mounted at ${base}`);return base&&(context.mountpoints.push(base),context.mountpoints.sort(((a,b)=>b.length-a.length))),context.mounts[base]=driver,context.watching&&Promise.resolve(watch(driver,onChange,base)).then((unwatcher=>{context.unwatch[base]=unwatcher})).catch(dist_console.error),storage},async unmount(base,_dispose=!0){(base=unstorage_8581f561_normalizeBaseKey(base))&&context.mounts[base]&&(context.watching&&base in context.unwatch&&(context.unwatch[base](),delete context.unwatch[base]),_dispose&&await dispose(context.mounts[base]),context.mountpoints=context.mountpoints.filter((key=>key!==base)),delete context.mounts[base])},getMount(key=""){key=normalizeKey(key)+":";const m=getMount(key);return{driver:m.driver,base:m.base}},getMounts(base="",opts={}){base=normalizeKey(base);return getMounts(base,opts.parents).map((m=>({driver:m.driver,base:m.mountpoint})))}};return storage}function watch(driver,onChange,base){return driver.watch?driver.watch(((event,key)=>onChange(event,base+key))):()=>{}}async function dispose(driver){"function"==typeof driver.dispose&&await asyncCall(driver.dispose)}function promisifyRequest(request){return new Promise(((resolve,reject)=>{request.oncomplete=request.onsuccess=()=>resolve(request.result),request.onabort=request.onerror=()=>reject(request.error)}))}function createStore(dbName,storeName){const request=indexedDB.open(dbName);request.onupgradeneeded=()=>request.result.createObjectStore(storeName);const dbp=promisifyRequest(request);return(txMode,callback)=>dbp.then((db=>callback(db.transaction(storeName,txMode).objectStore(storeName))))}let defaultGetStoreFunc;function defaultGetStore(){return defaultGetStoreFunc||(defaultGetStoreFunc=createStore("keyval-store","keyval")),defaultGetStoreFunc}function get(key,customStore=defaultGetStore()){return customStore("readonly",(store=>promisifyRequest(store.get(key))))}function eachCursor(store,callback){return store.openCursor().onsuccess=function(){this.result&&(callback(this.result),this.result.continue())},promisifyRequest(store.transaction)}const JSONStringify=data=>JSON.stringify(data,((_,value)=>"bigint"==typeof value?value.toString()+"n":value)),JSONParse=json=>{const serializedData=json.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(serializedData,((_,value)=>"string"==typeof value&&value.match(/^\d+n$/)?BigInt(value.substring(0,value.length-1)):value))};function esm_safeJsonParse(value){if("string"!=typeof value)throw new Error("Cannot safe json parse value of type "+typeof value);try{return JSONParse(value)}catch(_a){return value}}function safeJsonStringify(value){return"string"==typeof value?value:JSONStringify(value)||""}var z=(i={})=>{const t=i.base&&i.base.length>0?`${i.base}:`:"",e=s=>t+s;let n;return i.dbName&&i.storeName&&(n=createStore(i.dbName,i.storeName)),{name:"idb-keyval",options:i,hasItem:async s=>!(typeof await get(e(s),n)>"u"),getItem:async s=>await get(e(s),n)??null,setItem:(s,a)=>function set(key,value,customStore=defaultGetStore()){return customStore("readwrite",(store=>(store.put(value,key),promisifyRequest(store.transaction))))}(e(s),a,n),removeItem:s=>function del(key,customStore=defaultGetStore()){return customStore("readwrite",(store=>(store.delete(key),promisifyRequest(store.transaction))))}(e(s),n),getKeys:()=>function keys(customStore=defaultGetStore()){return customStore("readonly",(store=>{if(store.getAllKeys)return promisifyRequest(store.getAllKeys());const items=[];return eachCursor(store,(cursor=>items.push(cursor.key))).then((()=>items))}))}(n),clear:()=>function clear(customStore=defaultGetStore()){return customStore("readwrite",(store=>(store.clear(),promisifyRequest(store.transaction))))}(n)}};class _{constructor(){this.indexedDb=createStorage({driver:z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((t=>[t.key,t.value]))}async getItem(t){const e=await this.indexedDb.getItem(t);if(null!==e)return e}async setItem(t,e){await this.indexedDb.setItem(t,safeJsonStringify(e))}async removeItem(t){await this.indexedDb.removeItem(t)}}var l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:{},index_es_c={exports:{}};function k(i){var t;return[i[0],esm_safeJsonParse(null!=(t=i[1])?t:"")]}!function(){let i;function t(){}i=t,i.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},i.prototype.setItem=function(e,n){this[e]=String(n)},i.prototype.removeItem=function(e){delete this[e]},i.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(n){e[n]=void 0,delete e[n]}))},i.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},i.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof l<"u"&&l.localStorage?index_es_c.exports=l.localStorage:typeof window<"u"&&window.localStorage?index_es_c.exports=window.localStorage:index_es_c.exports=new t}();class K{constructor(){this.localStorage=index_es_c.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k)}async getItem(t){const e=this.localStorage.getItem(t);if(null!==e)return esm_safeJsonParse(e)}async setItem(t,e){this.localStorage.setItem(t,safeJsonStringify(e))}async removeItem(t){this.localStorage.removeItem(t)}}const j=async(i,t)=>{t.length&&t.forEach((async e=>{await i.removeItem(e)}))};class h{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const t=new K;this.storage=t;try{(async(i,t,e)=>{const n="wc_storage_version",s=await t.getItem(n);if(s&&s>=1)return void e(t);const a=await i.getKeys();if(!a.length)return void e(t);const m=[];for(;a.length;){const r=a.shift();if(!r)continue;const o=r.toLowerCase();if(o.includes("wc@")||o.includes("walletconnect")||o.includes("wc_")||o.includes("wallet_connect")){const f=await i.getItem(r);await t.setItem(r,f),m.push(r)}}await t.setItem(n,1),e(t),j(i,m)})(t,new _,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,e){return await this.initialize(),this.storage.setItem(t,e)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise((t=>{const e=setInterval((()=>{this.initialized&&(clearInterval(e),t())}),20)}))}}var cjs=__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/index.js"),dist_cjs=__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/index.js"),esm_events=__webpack_require__("./node_modules/@walletconnect/events/dist/esm/events.js");class n extends esm_events.q{constructor(s){super(),this.opts=s,this.protocol="wc",this.version=2}}class index_es_h extends esm_events.q{constructor(s,t){super(),this.core=s,this.logger=t,this.records=new Map}}class a{constructor(s,t){this.logger=s,this.core=t}}class u extends esm_events.q{constructor(s,t){super(),this.relayer=s,this.logger=t}}class g extends esm_events.q{constructor(s){super()}}class p{constructor(s,t,o,M){this.core=s,this.logger=t,this.name=o}}class d extends esm_events.q{constructor(s,t){super(),this.relayer=s,this.logger=t}}class index_es_E extends esm_events.q{constructor(s,t){super(),this.core=s,this.logger=t}}class index_es_y{constructor(s,t){this.projectId=s,this.logger=t}}class v{constructor(s,t){this.projectId=s,this.logger=t}}class b{constructor(s){this.opts=s,this.protocol="wc",this.version=2}}class w{constructor(s){this.client=s}}var lib_ed25519=__webpack_require__("./node_modules/@stablelib/ed25519/lib/ed25519.js"),random=__webpack_require__("./node_modules/@stablelib/random/lib/random.js"),time_dist_cjs=__webpack_require__("./node_modules/@walletconnect/time/dist/cjs/index.js");const constants_JWT_DELIMITER=".",constants_JWT_ENCODING="base64url",constants_JSON_ENCODING="utf8",constants_DATA_ENCODING="utf8",constants_DID_DELIMITER=":",constants_DID_PREFIX="did",constants_DID_METHOD="key",constants_MULTICODEC_ED25519_ENCODING="base58btc",constants_MULTICODEC_ED25519_BASE="z",constants_MULTICODEC_ED25519_HEADER="K36";var concat=__webpack_require__("./node_modules/uint8arrays/esm/src/concat.js"),to_string=__webpack_require__("./node_modules/uint8arrays/esm/src/to-string.js"),from_string=__webpack_require__("./node_modules/uint8arrays/esm/src/from-string.js");function encodeJSON(val){return(0,to_string.toString)((0,from_string.fromString)(safeJsonStringify(val),constants_JSON_ENCODING),constants_JWT_ENCODING)}function encodeIss(publicKey){const header=(0,from_string.fromString)(constants_MULTICODEC_ED25519_HEADER,constants_MULTICODEC_ED25519_ENCODING),multicodec=constants_MULTICODEC_ED25519_BASE+(0,to_string.toString)((0,concat.concat)([header,publicKey]),constants_MULTICODEC_ED25519_ENCODING);return[constants_DID_PREFIX,constants_DID_METHOD,multicodec].join(constants_DID_DELIMITER)}function generateKeyPair(seed=(0,random.randomBytes)(32)){return lib_ed25519._w(seed)}async function signJWT(sub,aud,ttl,keyPair,iat=(0,time_dist_cjs.fromMiliseconds)(Date.now())){const header={alg:"EdDSA",typ:"JWT"},payload={iss:encodeIss(keyPair.publicKey),sub,aud,iat,exp:iat+ttl},data=function encodeData(params){return(0,from_string.fromString)([encodeJSON(params.header),encodeJSON(params.payload)].join(constants_JWT_DELIMITER),constants_DATA_ENCODING)}({header,payload});return function encodeJWT(params){return[encodeJSON(params.header),encodeJSON(params.payload),(bytes=params.signature,(0,to_string.toString)(bytes,constants_JWT_ENCODING))].join(constants_JWT_DELIMITER);var bytes}({header,payload,signature:lib_ed25519.Xx(keyPair.secretKey,data)})}__webpack_require__("./node_modules/@walletconnect/relay-auth/dist/esm/types.js");var src=__webpack_require__("./node_modules/uint8arrays/esm/src/index.js");const INTERNAL_ERROR="INTERNAL_ERROR",SERVER_ERROR="SERVER_ERROR",RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],constants_STANDARD_ERROR_MAP={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[SERVER_ERROR]:{code:-32e3,message:"Server error"}},constants_DEFAULT_ERROR=SERVER_ERROR;function isReservedErrorCode(code){return RESERVED_ERROR_CODES.includes(code)}function getError(type){return Object.keys(constants_STANDARD_ERROR_MAP).includes(type)?constants_STANDARD_ERROR_MAP[type]:constants_STANDARD_ERROR_MAP[constants_DEFAULT_ERROR]}function getErrorByCode(code){const match=Object.values(constants_STANDARD_ERROR_MAP).find((e=>e.code===code));return match||constants_STANDARD_ERROR_MAP[constants_DEFAULT_ERROR]}function parseConnectionError(e,url,type){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${type} RPC url at ${url}`):e}var environment_dist_cjs=__webpack_require__("./node_modules/@walletconnect/environment/dist/cjs/index.js");function payloadId(entropy=3){return Date.now()*Math.pow(10,entropy)+Math.floor(Math.random()*Math.pow(10,entropy))}function getBigIntRpcId(entropy=6){return BigInt(payloadId(entropy))}function formatJsonRpcRequest(method,params,id){return{id:id||payloadId(),jsonrpc:"2.0",method,params}}function formatJsonRpcResult(id,result){return{id,jsonrpc:"2.0",result}}function formatJsonRpcError(id,error,data){return{id,jsonrpc:"2.0",error:formatErrorMessage(error,data)}}function formatErrorMessage(error,data){return void 0===error?getError(INTERNAL_ERROR):("string"==typeof error&&(error=Object.assign(Object.assign({},getError(SERVER_ERROR)),{message:error})),void 0!==data&&(error.data=data),isReservedErrorCode(error.code)&&(error=getErrorByCode(error.code)),error)}class misc_IEvents{}class IBaseJsonRpcProvider extends misc_IEvents{constructor(){super()}}class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(connection){super()}}function matchRegexProtocol(url,regex){const protocol=function getUrlProtocol(url){const matches=url.match(new RegExp(/^\w+:/,"gi"));if(matches&&matches.length)return matches[0]}(url);return void 0!==protocol&&new RegExp(regex).test(protocol)}function isHttpUrl(url){return matchRegexProtocol(url,"^https?:")}function isWsUrl(url){return matchRegexProtocol(url,"^wss?:")}function isJsonRpcPayload(payload){return"object"==typeof payload&&"id"in payload&&"jsonrpc"in payload&&"2.0"===payload.jsonrpc}function isJsonRpcRequest(payload){return isJsonRpcPayload(payload)&&"method"in payload}function isJsonRpcResponse(payload){return isJsonRpcPayload(payload)&&(isJsonRpcResult(payload)||isJsonRpcError(payload))}function isJsonRpcResult(payload){return"result"in payload}function isJsonRpcError(payload){return"error"in payload}class JsonRpcProvider extends IJsonRpcProvider{constructor(connection){super(connection),this.events=new events.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(connection),this.connection.connected&&this.registerEventListeners()}async connect(connection=this.connection){await this.open(connection)}async disconnect(){await this.close()}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async request(request,context){return this.requestStrict(formatJsonRpcRequest(request.method,request.params||[],request.id||getBigIntRpcId().toString()),context)}async requestStrict(request,context){return new Promise((async(resolve,reject)=>{if(!this.connection.connected)try{await this.open()}catch(e){reject(e)}this.events.on(`${request.id}`,(response=>{isJsonRpcError(response)?reject(response.error):resolve(response.result)}));try{await this.connection.send(request,context)}catch(e){reject(e)}}))}setConnection(connection=this.connection){return connection}onPayload(payload){this.events.emit("payload",payload),isJsonRpcResponse(payload)?this.events.emit(`${payload.id}`,payload):this.events.emit("message",{type:payload.method,data:payload.params})}onClose(event){event&&3e3===event.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${event.code} ${event.reason?`(${event.reason})`:""}`)),this.events.emit("disconnect")}async open(connection=this.connection){this.connection===connection&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof connection&&(await this.connection.open(connection),connection=this.connection),this.connection=this.setConnection(connection),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(payload=>this.onPayload(payload))),this.connection.on("close",(event=>this.onClose(event))),this.connection.on("error",(error=>this.events.emit("error",error))),this.connection.on("register_error",(error=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const index_es_a=c=>c.split("?")[0],index_es_S=typeof WebSocket<"u"?WebSocket:typeof __webpack_require__.g<"u"&&typeof __webpack_require__.g.WebSocket<"u"?__webpack_require__.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:__webpack_require__("./node_modules/@walletconnect/jsonrpc-ws-connection/node_modules/ws/browser.js");class f{constructor(e){if(this.url=e,this.events=new events.EventEmitter,this.registering=!1,!isWsUrl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!isWsUrl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise(((n,o)=>{this.events.once("register_error",(s=>{this.resetMaxListeners(),o(s)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));n(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,n)=>{const o=new URLSearchParams(e).get("origin"),s=(0,environment_dist_cjs.isReactNative)()?{headers:{origin:o}}:{rejectUnauthorized:(url=e,!new RegExp("wss?://localhost(:d{2,5})?").test(url))},i=new index_es_S(e,[],s);var url;typeof WebSocket<"u"||typeof __webpack_require__.g<"u"&&typeof __webpack_require__.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?i.onerror=r=>{const l=r;n(this.emitError(l.error))}:i.on("error",(r=>{n(this.emitError(r))})),i.onopen=()=>{this.onOpen(i),t(i)}}))}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?esm_safeJsonParse(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),s=formatJsonRpcError(e,n.message||n.toString());this.events.emit("payload",s)}parseError(e,t=this.url){return parseConnectionError(e,index_es_a(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${index_es_a(this.url)}`));return this.events.emit("register_error",t),t}}var lodash_isequal=__webpack_require__("./node_modules/lodash.isequal/index.js"),lodash_isequal_default=__webpack_require__.n(lodash_isequal),browser=__webpack_require__("./node_modules/isomorphic-unfetch/browser.js"),browser_default=__webpack_require__.n(browser),process=__webpack_require__("./node_modules/process/browser.js");var Ji=function Hi(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),o=n.charCodeAt(0);if(255!==t[o])throw new TypeError(n+" is ambiguous");t[o]=s}var a=r.length,h=r.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function y(u){if("string"!=typeof u)throw new TypeError("Expected String");if(0===u.length)return new Uint8Array;var m=0;if(" "!==u[m]){for(var z=0,I=0;u[m]===h;)z++,m++;for(var _=(u.length-m)*l+1>>>0,S=new Uint8Array(_);u[m];){var f=t[u.charCodeAt(m)];if(255===f)return;for(var T=0,A=_-1;(0!==f||T<I)&&-1!==A;A--,T++)f+=a*S[A]>>>0,S[A]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");I=T,m++}if(" "!==u[m]){for(var C=_-I;C!==_&&0===S[C];)C++;for(var x=new Uint8Array(z+(_-C)),q=z;C!==_;)x[q++]=S[C++];return x}}}return{encode:function p(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===u.length)return"";for(var m=0,z=0,I=0,_=u.length;I!==_&&0===u[I];)I++,m++;for(var S=(_-I)*d+1>>>0,f=new Uint8Array(S);I!==_;){for(var T=u[I],A=0,C=S-1;(0!==T||A<z)&&-1!==C;C--,A++)T+=256*f[C]>>>0,f[C]=T%a>>>0,T=T/a>>>0;if(0!==T)throw new Error("Non-zero carry");z=A,I++}for(var x=S-z;x!==S&&0===f[x];)x++;for(var q=h.repeat(m);x<S;++x)q+=r.charAt(f[x]);return q},decodeUnsafe:y,decode:function M(u){var m=y(u);if(m)return m;throw new Error(`Non-${e} character`)}}},Xi=Ji;const Ne=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class Zi{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class es{constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ue(this,e)}}class ts{constructor(e){this.decoders=e}or(e){return Ue(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ue=(r,e)=>new ts({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class is{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Zi(e,t,i),this.decoder=new es(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const W=({name:r,prefix:e,encode:t,decode:i})=>new is(r,e,t,i),B=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Xi(t,e);return W({prefix:r,name:e,encode:i,decode:n=>Ne(s(n))})},index_es_g=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>W({prefix:e,name:r,encode:s=>((r,e,t)=>{const i="="===e[e.length-1],s=(1<<t)-1;let n="",o=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],o+=8;o>t;)o-=t,n+=e[s&a>>o];if(o&&(n+=e[s&a<<t-o]),i)for(;n.length*t&7;)n+="=";return n})(s,i,t),decode:s=>((r,e,t,i)=>{const s={};for(let d=0;d<e.length;++d)s[e[d]]=d;let n=r.length;for(;"="===r[n-1];)--n;const o=new Uint8Array(n*t/8|0);let a=0,h=0,l=0;for(let d=0;d<n;++d){const p=s[r[d]];if(void 0===p)throw new SyntaxError(`Non-${i} character`);h=h<<t|p,a+=t,a>=8&&(a-=8,o[l++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o})(s,i,t,r)}),ns=W({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var os=Object.freeze({__proto__:null,identity:ns});const as=index_es_g({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hs=Object.freeze({__proto__:null,base2:as});const cs=index_es_g({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var us=Object.freeze({__proto__:null,base8:cs});const ls=B({prefix:"9",name:"base10",alphabet:"0123456789"});var ds=Object.freeze({__proto__:null,base10:ls});const gs=index_es_g({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ps=index_es_g({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ds=Object.freeze({__proto__:null,base16:gs,base16upper:ps});const ys=index_es_g({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ms=index_es_g({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bs=index_es_g({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fs=index_es_g({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Es=index_es_g({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ws=index_es_g({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vs=index_es_g({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Is=index_es_g({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Cs=index_es_g({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Rs=Object.freeze({__proto__:null,base32:ys,base32upper:ms,base32pad:bs,base32padupper:fs,base32hex:Es,base32hexupper:ws,base32hexpad:vs,base32hexpadupper:Is,base32z:Cs});const _s=B({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ss=B({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ts=Object.freeze({__proto__:null,base36:_s,base36upper:Ss});const Ps=B({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xs=B({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Os=Object.freeze({__proto__:null,base58btc:Ps,base58flickr:xs});const As=index_es_g({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zs=index_es_g({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ns=index_es_g({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Us=index_es_g({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ls=Object.freeze({__proto__:null,base64:As,base64pad:zs,base64url:Ns,base64urlpad:Us});const Le=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Fs=Le.reduce(((r,e,t)=>(r[t]=e,r)),[]),$s=Le.reduce(((r,e,t)=>(r[e.codePointAt(0)]=t,r)),[]);const Ks=W({prefix:"🚀",name:"base256emoji",encode:function Ms(r){return r.reduce(((e,t)=>e+=Fs[t]),"")},decode:function ks(r){const e=[];for(const t of r){const i=$s[t.codePointAt(0)];if(void 0===i)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}});var Bs=Object.freeze({__proto__:null,base256emoji:Ks}),Vs=function $e(r,e,t){e=e||[];for(var i=t=t||0;r>=Gs;)e[t++]=255&r|Fe,r/=128;for(;r&qs;)e[t++]=255&r|Fe,r>>>=7;return e[t]=0|r,$e.bytes=t-i+1,e},Fe=128,qs=-128,Gs=Math.pow(2,31);var Ys=function he(r,i){var o,t=0,s=0,n=i=i||0,a=r.length;do{if(n>=a)throw he.bytes=0,new RangeError("Could not decode varint");o=r[n++],t+=s<28?(o&Me)<<s:(o&Me)*Math.pow(2,s),s+=7}while(o>=Hs);return he.bytes=n-i,t},Hs=128,Me=127;var Js=Math.pow(2,7),Xs=Math.pow(2,14),Ws=Math.pow(2,21),Qs=Math.pow(2,28),Zs=Math.pow(2,35),er=Math.pow(2,42),tr=Math.pow(2,49),ir=Math.pow(2,56),sr=Math.pow(2,63),ke={encode:Vs,decode:Ys,encodingLength:function(r){return r<Js?1:r<Xs?2:r<Ws?3:r<Qs?4:r<Zs?5:r<er?6:r<tr?7:r<ir?8:r<sr?9:10}};const Ke=(r,e,t=0)=>(ke.encode(r,e,t),e),Be=r=>ke.encodingLength(r),ce=(r,e)=>{const t=e.byteLength,i=Be(r),s=i+Be(t),n=new Uint8Array(s+t);return Ke(r,n,0),Ke(t,n,i),n.set(e,s),new or(r,t,e,n)};class or{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const Ve=({name:r,code:e,encode:t})=>new ar(r,e,t);class ar{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ce(this.code,t):t.then((i=>ce(this.code,i)))}throw Error("Unknown type, must be binary type")}}const je=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),hr=Ve({name:"sha2-256",code:18,encode:je("SHA-256")}),cr=Ve({name:"sha2-512",code:19,encode:je("SHA-512")});Object.freeze({__proto__:null,sha256:hr,sha512:cr});const Ge=Ne,gr={code:0,name:"identity",encode:Ge,digest:r=>ce(0,Ge(r))};Object.freeze({__proto__:null,identity:gr});new TextEncoder,new TextDecoder;const Ye={...os,...hs,...us,...ds,...Ds,...Rs,...Ts,...Os,...Ls,...Bs};function He(r){return null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Je(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const index_es_Xe=Je("utf8","u",(r=>"u"+new TextDecoder("utf8").decode(r)),(r=>(new TextEncoder).encode(r.substring(1)))),ue=Je("ascii","a",(r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e}),(r=>{const e=function Dr(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?He(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e})),yr={utf8:index_es_Xe,"utf-8":index_es_Xe,hex:Ye.base16,latin1:ue,ascii:ue,binary:ue,...Ye};const Q="core",index_es_O=`wc@2:${Q}:`,Qe_logger="error",Ze={database:":memory:"},de="client_ed25519_seed",tt=time_dist_cjs.ONE_DAY,ot=time_dist_cjs.SIX_HOURS,ge="wss://relay.walletconnect.com",pe="wss://relay.walletconnect.org",index_es_D_message="relayer_message",index_es_D_message_ack="relayer_message_ack",index_es_D_connect="relayer_connect",index_es_D_disconnect="relayer_disconnect",index_es_D_error="relayer_error",index_es_D_connection_stalled="relayer_connection_stalled",index_es_D_publish="relayer_publish",P_payload="payload",P_connect="connect",P_disconnect="disconnect",P_error="error",dt=time_dist_cjs.ONE_SECOND,dist_index_es_w_created="subscription_created",dist_index_es_w_deleted="subscription_deleted",dist_index_es_w_sync="subscription_sync",dist_index_es_w_resubscribed="subscription_resubscribed",ft=1e3*time_dist_cjs.FIVE_SECONDS,F={wc_pairingDelete:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:0},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:0}}},V_create="pairing_create",V_expire="pairing_expire",V_delete="pairing_delete",V_ping="pairing_ping",R_created="history_created",R_updated="history_updated",R_deleted="history_deleted",R_sync="history_sync",index_es_v_created="expirer_created",index_es_v_deleted="expirer_deleted",index_es_v_expired="expirer_expired",index_es_v_sync="expirer_sync",Z="verify-api",$="https://verify.walletconnect.com",ee="https://verify.walletconnect.org",_t=[$,ee];class Pt{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=index_es_O,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,index_es.KC)(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,index_es.IP)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class xt{constructor(e,t,i){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();return encodeIss(generateKeyPair(await this.getClientSeed()).publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=(0,index_es.Au)();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const o=generateKeyPair(await this.getClientSeed()),a=(0,index_es.jd)(),h=tt;return await signJWT(a,s,h,o)},this.generateSharedKey=(s,n,o)=>{this.isInitialized();const a=this.getPrivateKey(s),h=(0,index_es.m$)(a,n);return this.setSymKey(h,o)},this.setSymKey=async(s,n)=>{this.isInitialized();const o=n||(0,index_es.Ym)(s);return await this.keychain.set(o,s),o},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,n,o)=>{this.isInitialized();const a=(0,index_es.EN)(o),h=safeJsonStringify(n);if((0,index_es.Q8)(a)){const y=a.senderPublicKey,M=a.receiverPublicKey;s=await this.generateSharedKey(y,M)}const l=this.getSymKey(s),{type:d,senderPublicKey:p}=a;return(0,index_es.HI)({type:d,symKey:l,message:h,senderPublicKey:p})},this.decode=async(s,n,o)=>{this.isInitialized();const a=(0,index_es.Ll)(n,o);if((0,index_es.Q8)(a)){const h=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(h,l)}try{const h=this.getSymKey(s);return esm_safeJsonParse((0,index_es.pe)({symKey:h,encoded:n}))}catch(h){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}},this.getPayloadType=s=>{const n=(0,index_es.vB)(s);return(0,index_es.WG)(n.type)},this.getPayloadSenderPublicKey=s=>{const n=(0,index_es.vB)(s);return n.senderPublicKey?(0,src.BB)(n.senderPublicKey,index_es.AW):void 0},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.keychain=i||new Pt(this.core,this.logger)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(de)}catch{e=(0,index_es.jd)(),await this.keychain.set(de,e)}return function mr(r,e="utf8"){const t=yr[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):He(globalThis.Buffer.from(r,"utf-8"))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ot extends a{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=index_es_O,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const n=(0,index_es.rj)(s);let o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[n]<"u"||(o[n]=s,this.messages.set(i,o),await this.persist()),n},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();return typeof this.get(i)[(0,index_es.rj)(s)]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=(0,dist_cjs.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,index_es.KC)(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,index_es.IP)(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class vr extends u{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new events.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,time_dist_cjs.toMiliseconds)(time_dist_cjs.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,s,n)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});try{const a=n?.ttl||ot,h=(0,index_es._H)(n),l=n?.prompt||!1,d=n?.tag||0,p=n?.id||getBigIntRpcId().toString(),y={topic:i,message:s,opts:{ttl:a,relay:h,prompt:l,tag:d,id:p}},M=setTimeout((()=>this.queue.set(p,y)),this.publishTimeout);try{await await(0,index_es.hF)(this.rpcPublish(i,s,a,h,l,d,p),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(p),this.relayer.events.emit(index_es_D_publish,y)}catch(u){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(o=n?.internal)&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(p),u;return}finally{clearTimeout(M)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}rpcPublish(e,t,i,s,n,o,a){var h,l,d,p;const y={method:(0,index_es.cO)(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:n,tag:o},id:a};return(0,index_es.o8)(null==(h=y.params)?void 0:h.prompt)&&(null==(l=y.params)||delete l.prompt),(0,index_es.o8)(null==(d=y.params)?void 0:d.tag)&&(null==(p=y.params)||delete p.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y}),this.relayer.request(y)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)}))}registerEventListeners(){this.relayer.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(index_es_D_connection_stalled);this.checkQueue()})),this.relayer.on(index_es_D_message_ack,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}class Ir{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter((n=>n!==t));s.length?this.map.set(e,s):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Cr=Object.defineProperty,Rr=Object.defineProperties,_r=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Sr=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable,zt=(r,e,t)=>e in r?Cr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,index_es_j=(r,e)=>{for(var t in e||(e={}))Sr.call(e,t)&&zt(r,t,e[t]);if(At)for(var t of At(e))Tr.call(e,t)&&zt(r,t,e[t]);return r},De=(r,e)=>Rr(r,_r(e));class Nt extends d{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Ir,this.events=new events.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=index_es_O,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=(0,index_es._H)(s),o={topic:i,relay:n};this.pending.set(i,o);const a=await this.rpcSubscribe(i,n);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),a}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>!!this.topics.includes(i)||await new Promise(((s,n)=>{const o=new time_dist_cjs.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval((()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=ft&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),n(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1)),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map((async s=>await this.unsubscribeById(e,s,t))))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=(0,index_es._H)(i);await this.rpcUnsubscribe(e,t,s);const n=(0,index_es.D6)("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:(0,index_es.cO)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await(0,index_es.hF)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(index_es_D_connection_stalled)}return(0,index_es.rj)(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:(0,index_es.cO)(t.protocol).batchSubscribe,params:{topics:e.map((s=>s.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await(0,index_es.hF)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(index_es_D_connection_stalled)}}rpcUnsubscribe(e,t,i){const s={method:(0,index_es.cO)(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,De(index_es_j({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((t=>{this.setSubscription(t.id,index_es_j({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,index_es_j({},t)),this.topicMap.set(t.topic,e),this.events.emit(dist_index_es_w_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(dist_index_es_w_deleted,De(index_es_j({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(dist_index_es_w_sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(dist_index_es_w_resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);(0,index_es.qt)(t)&&this.onBatchSubscribe(t.map(((i,s)=>De(index_es_j({},e[s]),{id:i}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(index_es_D_connect,(async()=>{await this.onConnect()})),this.relayer.on(index_es_D_disconnect,(()=>{this.onDisconnect()})),this.events.on(dist_index_es_w_created,(async e=>{const t=dist_index_es_w_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(dist_index_es_w_deleted,(async e=>{const t=dist_index_es_w_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var Pr=Object.defineProperty,Ut=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Lt=(r,e,t)=>e in r?Pr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;class Ft extends g{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new events.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(index_es_D_connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(index_es_D_error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(P_payload,this.onPayloadHandler),this.provider.on(P_connect,this.onConnectHandler),this.provider.on(P_disconnect,this.onDisconnectHandler),this.provider.on(P_error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,dist_cjs.generateChildLogger)(e.logger,this.name):(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new Ot(this.logger,e.core),this.subscriber=new Nt(this,this.logger),this.publisher=new vr(this,this.logger),this.relayUrl=e?.relayUrl||ge,this.projectId=e.projectId,this.bundleId=(0,index_es.X_)(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${pe}...`),await this.restartTransport(pe)}this.initialized=!0,setTimeout((async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),1e4)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let n,s=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";if(s)return s;const o=a=>{a.topic===e&&(this.subscriber.off(dist_index_es_w_created,o),n())};return await Promise.all([new Promise((a=>{n=a,this.subscriber.on(dist_index_es_w_created,o)})),new Promise((async a=>{s=await this.subscriber.subscribe(e,t),a()}))]),s}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await(0,index_es.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise((t=>{if(!this.initialized)return t();this.subscriber.once(dist_index_es_w_resubscribed,(()=>{t()}))})),new Promise((async(t,i)=>{try{await(0,index_es.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(s){return void i(s)}t()}))])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.provider.events.emit(P_disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,index_es.Gg)())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new f((0,index_es.$0)({sdkVersion:"2.11.0",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||0===i.length)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),isJsonRpcRequest(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:i,message:s,publishedAt:n}=t.data,o={topic:i,message:s,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(((r,e)=>{for(var t in e||(e={}))xr.call(e,t)&&Lt(r,t,e[t]);if(Ut)for(var t of Ut(e))Or.call(e,t)&&Lt(r,t,e[t]);return r})({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else isJsonRpcResponse(e)&&this.events.emit(index_es_D_message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(index_es_D_message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=formatJsonRpcResult(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(P_payload,this.onPayloadHandler),this.provider.off(P_connect,this.onConnectHandler),this.provider.off(P_disconnect,this.onDisconnectHandler),this.provider.off(P_error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(index_es_D_connection_stalled,(()=>{this.restartTransport().catch((t=>this.logger.error(t)))}));let e=await(0,index_es.Gg)();(0,index_es.uw)((async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch((i=>this.logger.error(i))):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch((i=>this.logger.error(i)))))}))}onProviderDisconnect(){this.events.emit(index_es_D_disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((async()=>{await this.restartTransport().catch((e=>this.logger.error(e)))}),(0,time_dist_cjs.toMiliseconds)(dt)))}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var zr=Object.defineProperty,$t=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,Ur=Object.prototype.propertyIsEnumerable,Mt=(r,e,t)=>e in r?zr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kt=(r,e)=>{for(var t in e||(e={}))Nr.call(e,t)&&Mt(r,t,e[t]);if($t)for(var t of $t(e))Ur.call(e,t)&&Mt(r,t,e[t]);return r};class Kt extends p{constructor(e,t,i,s=index_es_O,n=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=index_es_O,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((o=>{this.getKey&&null!==o&&!(0,index_es.o8)(o)?this.map.set(this.getKey(o),o):(0,index_es.xW)(o)?this.map.set(o.id,o):(0,index_es.h1)(o)&&this.map.set(o.topic,o)})),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter((a=>Object.keys(o).every((h=>lodash_isequal_default()(a[h],o[h]))))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const h=kt(kt({},this.getData(o)),a);this.map.set(o,h),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Bt{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(events_default()),this.initialized=!1,this.storagePrefix=index_es_O,this.ignoredPayloadTypes=[index_es.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=(0,index_es.jd)(),s=await this.core.crypto.setSymKey(i),n=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES),o={protocol:"irn"},a={topic:s,expiry:n,relay:o,active:!1},h=(0,index_es.Bv)({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:o});return await this.pairings.set(s,a),await this.core.relayer.subscribe(s),this.core.expirer.set(s,n),{topic:s,uri:h}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:n,relay:o}=(0,index_es.he)(i.uri);let a;if(this.pairings.keys.includes(s)&&(a=this.pairings.get(s),a.active))throw new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);const h=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES),l={topic:s,relay:o,expiry:h,active:!1};return await this.pairings.set(s,l),this.core.expirer.set(s,h),i.activatePairing&&await this.activate({topic:s}),this.events.emit(V_create,l),this.core.crypto.keychain.has(s)||(await this.core.crypto.setSymKey(n,s),await this.core.relayer.subscribe(s,{relay:o})),l},this.activate=async({topic:i})=>{this.isInitialized();const s=(0,index_es.gn)(time_dist_cjs.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:h}=(0,index_es.H1)();this.events.once((0,index_es.E0)("pairing_ping",n),(({error:l})=>{l?h(l):a()})),await o()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",(0,index_es.D6)("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,n)=>{const o=formatJsonRpcRequest(s,n),a=await this.core.crypto.encode(i,o),h=F[s].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,h),o.id},this.sendResult=async(i,s,n)=>{const o=formatJsonRpcResult(i,n),a=await this.core.crypto.encode(s,o),h=await this.core.history.get(s,i),l=F[h.request.method].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)},this.sendError=async(i,s,n)=>{const o=formatJsonRpcError(i,n),a=await this.core.crypto.encode(s,o),h=await this.core.history.get(s,i),l=F[h.request.method]?F[h.request.method].res:F.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,(0,index_es.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter((s=>(0,index_es.Bw)(s.expiry)));await Promise.all(i.map((s=>this.deletePairing(s.topic))))},this.onRelayEventRequest=i=>{const{topic:s,payload:n}=i;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:n}=i,o=(await this.core.history.get(s,n.id)).request.method;return"wc_pairingPing"===o?this.onPairingPingResponse(s,n):this.onUnknownRpcMethodResponse(o)},this.onPairingPingRequest=async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit(V_ping,{id:n,topic:i})}catch(o){await this.sendError(n,i,o),this.logger.error(o)}},this.onPairingPingResponse=(i,s)=>{const{id:n}=s;setTimeout((()=>{isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("pairing_ping",n),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("pairing_ping",n),{error:s.error})}),500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(V_delete,{id:n,topic:i})}catch(o){await this.sendError(n,i,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:n,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=(0,index_es.D6)("WC_METHOD_UNSUPPORTED",o);await this.sendError(n,i,a),this.logger.error(a)}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error((0,index_es.D6)("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var s;if(!(0,index_es.EJ)(i)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(o)}if(!(0,index_es.jv)(i.uri)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(o)}const n=(0,index_es.he)(i.uri);if(null==(s=n?.relay)||!s.protocol){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(o)}if(null==n||!n.symKey){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(o)}},this.isValidPing=async i=>{if(!(0,index_es.EJ)(i)){const{message:n}=(0,index_es.Z7)("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!(0,index_es.EJ)(i)){const{message:n}=(0,index_es.Z7)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!(0,index_es.M_)(i,!1)){const{message:s}=(0,index_es.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=(0,index_es.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if((0,index_es.Bw)(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=(0,index_es.Z7)("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.pairings=new Kt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(index_es_D_message,(async e=>{const{topic:t,message:i}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);try{isJsonRpcRequest(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):isJsonRpcResponse(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(n){this.logger.error(n)}}))}registerExpirerEvents(){this.core.expirer.on(index_es_v_expired,(async e=>{const{topic:t}=(0,index_es.iP)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(V_expire,{topic:t}))}))}}class Vt extends index_es_h{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new events.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=index_es_O,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((i=>this.records.set(i.id,i))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const o={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n,expiry:(0,index_es.gn)(time_dist_cjs.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(R_created,o)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=isJsonRpcError(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(R_updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach((n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(R_deleted,n)}}))},this.exists=async(i,s)=>(this.isInitialized(),!!this.records.has(s)&&(await this.getRecord(s)).topic===i),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:formatJsonRpcRequest(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(R_sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(R_created,(e=>{const t=R_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(R_updated,(e=>{const t=R_updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(R_deleted,(e=>{const t=R_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((e=>{(0,time_dist_cjs.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))}))}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class jt extends index_es_E{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new events.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=index_es_O,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((i=>this.expirations.set(i.target,i))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const n=this.formatTarget(i),o={target:n,expiry:s};this.expirations.set(n,o),this.checkExpiry(n,o),this.events.emit(index_es_v_created,{target:n,expiration:o})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(index_es_v_deleted,{target:s,expiration:n})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name)}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return(0,index_es.Z4)(e);if("number"==typeof e)return(0,index_es.Gq)(e);const{message:t}=(0,index_es.Z7)("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(index_es_v_sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=(0,index_es.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=(0,index_es.Z7)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;(0,time_dist_cjs.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(index_es_v_expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(cjs.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(index_es_v_created,(e=>{const t=index_es_v_created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(index_es_v_expired,(e=>{const t=index_es_v_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(index_es_v_deleted,(e=>{const t=index_es_v_deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class qt extends index_es_y{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Z,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||(0,index_es.b$)()||!(0,index_es.jU)())return;const s=this.getVerifyUrl(i?.verifyUrl);this.verifyUrl!==s&&this.removeIframe(),this.verifyUrl=s;try{await this.createIframe()}catch(n){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(n)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ee;try{await this.createIframe()}catch(n){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(n),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const s=this.getVerifyUrl(i?.verifyUrl);let n;try{n=await this.fetchAttestation(i.attestationId,s)}catch(o){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${s}`),this.logger.info(o),n=await this.fetchAttestation(i.attestationId,ee)}return n},this.fetchAttestation=async(i,s)=>{this.logger.info(`resolving attestation: ${i} from url: ${s}`);const n=this.startAbortTimer(2*time_dist_cjs.ONE_SECOND),o=await fetch(`${s}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(n),200===o.status?await o.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach((i=>this.sendPost(i))),this.queue=[])},this.sendPost=i=>{var s;try{if(!this.iframe)return;null==(s=this.iframe.contentWindow)||s.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const s=n=>{"verify_ready"===n.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),i())};await Promise.race([new Promise((n=>{if(document.getElementById(Z))return n();window.addEventListener("message",s);const o=document.createElement("iframe");o.id=Z,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,i=n})),new Promise(((n,o)=>setTimeout((()=>{window.removeEventListener("message",s),o("verify iframe load timeout")}),(0,time_dist_cjs.toMiliseconds)(time_dist_cjs.FIVE_SECONDS))))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let s=i||$;return _t.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${$}`),s=$),s},this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.verifyUrl=$,this.abortController=new AbortController,this.isDevEnv=(0,index_es.UG)()&&process.env.IS_VITEST}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,time_dist_cjs.toMiliseconds)(e))}}class Gt extends v{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async i=>{const{clientId:s,token:n,notificationType:o,enableEncrypted:a=!1}=i,h=`https://echo.walletconnect.com/${this.projectId}/clients`;await browser_default()(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:n,always_raw:a})})},this.logger=(0,dist_cjs.generateChildLogger)(t,this.context)}}var Lr=Object.defineProperty,Yt=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,Ht=(r,e,t)=>e in r?Lr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Jt=(r,e)=>{for(var t in e||(e={}))Fr.call(e,t)&&Ht(r,t,e[t]);if(Yt)for(var t of Yt(e))$r.call(e,t)&&Ht(r,t,e[t]);return r};class te extends n{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=Q,this.events=new events.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||ge,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:e?.logger||Qe_logger}));this.logger=(0,dist_cjs.generateChildLogger)(t,this.name),this.heartbeat=new cjs.HeartBeat,this.crypto=new xt(this,this.logger,e?.keychain),this.history=new Vt(this,this.logger),this.expirer=new jt(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new h(Jt(Jt({},Ze),e?.storageOptions)),this.relayer=new Ft({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Bt(this,this.logger),this.verify=new qt(this.projectId||"",this.logger),this.echoClient=new Gt(this.projectId||"",this.logger)}static async init(e){const t=new te(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",i),t}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Mr=te,H="client",G=`wc@2:${H}:`,M_name=H,M_logger="error",oe="Proposal expired",A=time_dist_cjs.SEVEN_DAYS,index_es_V={wc_sessionPropose:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1104},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1106},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:time_dist_cjs.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1112},res:{ttl:time_dist_cjs.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:time_dist_cjs.THIRTY_SECONDS,prompt:!1,tag:1115}}},index_es_U={min:time_dist_cjs.FIVE_MINUTES,max:time_dist_cjs.SEVEN_DAYS},index_es_I_idle="IDLE",index_es_I_active="ACTIVE",index_es_pe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var index_es_as=Object.defineProperty,index_es_cs=Object.defineProperties,index_es_ls=Object.getOwnPropertyDescriptors,index_es_he=Object.getOwnPropertySymbols,index_es_ps=Object.prototype.hasOwnProperty,index_es_hs=Object.prototype.propertyIsEnumerable,index_es_de=(m,r,e)=>r in m?index_es_as(m,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[r]=e,dist_index_es_g=(m,r)=>{for(var e in r||(r={}))index_es_ps.call(r,e)&&index_es_de(m,e,r[e]);if(index_es_he)for(var e of index_es_he(r))index_es_hs.call(r,e)&&index_es_de(m,e,r[e]);return m},dist_index_es_b=(m,r)=>index_es_cs(m,index_es_ls(r));class index_es_ds extends w{constructor(r){super(r),this.name="engine",this.events=new(events_default()),this.initialized=!1,this.ignoredPayloadTypes=[index_es.rV],this.requestQueue={state:index_es_I_idle,queue:[]},this.sessionRequestQueue={state:index_es_I_idle,queue:[]},this.requestQueueDelay=time_dist_cjs.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(index_es_V)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,time_dist_cjs.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();const s=dist_index_es_b(dist_index_es_g({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:t,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:o,relays:a}=s;let p,c=t,d=!1;if(c&&(d=this.client.core.pairing.pairings.get(c).active),!c||!d){const{topic:v,uri:S}=await this.client.core.pairing.create();c=v,p=S}const h=await this.client.core.crypto.generateKeyPair(),R=dist_index_es_g({requiredNamespaces:i,optionalNamespaces:n,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata}},o&&{sessionProperties:o}),{reject:w,resolve:T,done:K}=(0,index_es.H1)(time_dist_cjs.FIVE_MINUTES,oe);if(this.events.once((0,index_es.E0)("session_connect"),(async({error:v,session:S})=>{if(v)w(v);else if(S){S.self.publicKey=h;const B=dist_index_es_b(dist_index_es_g({},S),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(S.topic,B),await this.setExpiry(S.topic,S.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:S.peer.metadata}),T(B)}})),!c){const{message:v}=(0,index_es.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(v)}const L=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:R}),ge=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES);return await this.setProposal(L,dist_index_es_g({id:L,expiry:ge},R)),{uri:p,approval:K}},this.pair=async e=>(await this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{await this.isInitialized(),await this.isValidApprove(e);const{id:s,relayProtocol:t,namespaces:i,sessionProperties:n}=e,o=this.client.proposal.get(s);let{pairingTopic:a,proposer:c,requiredNamespaces:p,optionalNamespaces:d}=o;a=a||"",(0,index_es.L5)(p)||(p=(0,index_es.fc)(i,"approve()"));const h=await this.client.core.crypto.generateKeyPair(),R=c.publicKey,w=await this.client.core.crypto.generateSharedKey(h,R);a&&s&&(await this.client.core.pairing.updateMetadata({topic:a,metadata:c.metadata}),await this.sendResult({id:s,topic:a,result:{relay:{protocol:t??"irn"},responderPublicKey:h}}),await this.client.proposal.delete(s,(0,index_es.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:a}));const T=dist_index_es_g({relay:{protocol:t??"irn"},namespaces:i,requiredNamespaces:p,optionalNamespaces:d,pairingTopic:a,controller:{publicKey:h,metadata:this.client.metadata},expiry:(0,index_es.gn)(A)},n&&{sessionProperties:n});await this.client.core.relayer.subscribe(w),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0});const K=dist_index_es_b(dist_index_es_g({},T),{topic:w,pairingTopic:a,acknowledged:!1,self:T.controller,peer:{publicKey:c.publicKey,metadata:c.metadata},controller:h});return await this.client.session.set(w,K),await this.setExpiry(w,(0,index_es.gn)(A)),{topic:w,acknowledged:()=>new Promise((L=>setTimeout((()=>L(this.client.session.get(w))),500)))}},this.reject=async e=>{await this.isInitialized(),await this.isValidReject(e);const{id:s,reason:t}=e,{pairingTopic:i}=this.client.proposal.get(s);i&&(await this.sendError(s,i,t),await this.client.proposal.delete(s,(0,index_es.D6)("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized(),await this.isValidUpdate(e);const{topic:s,namespaces:t}=e,i=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:t}}),{done:n,resolve:o,reject:a}=(0,index_es.H1)();return this.events.once((0,index_es.E0)("session_update",i),(({error:c})=>{c?a(c):o()})),await this.client.session.update(s,{namespaces:t}),{acknowledged:n}},this.extend=async e=>{await this.isInitialized(),await this.isValidExtend(e);const{topic:s}=e,t=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:i,resolve:n,reject:o}=(0,index_es.H1)();return this.events.once((0,index_es.E0)("session_extend",t),(({error:a})=>{a?o(a):n()})),await this.setExpiry(s,(0,index_es.gn)(A)),{acknowledged:i}},this.request=async e=>{await this.isInitialized(),await this.isValidRequest(e);const{chainId:s,request:t,topic:i,expiry:n}=e,o=payloadId(),{done:a,resolve:c,reject:p}=(0,index_es.H1)(n,"Request expired. Please try again.");return this.events.once((0,index_es.E0)("session_request",o),(({error:d,result:h})=>{d?p(d):c(h)})),await Promise.all([new Promise((async d=>{await this.sendRequest({clientRpcId:o,topic:i,method:"wc_sessionRequest",params:{request:t,chainId:s},expiry:n,throwOnFailedPublish:!0}).catch((h=>p(h))),this.client.events.emit("session_request_sent",{topic:i,request:t,chainId:s,id:o}),d()})),new Promise((async d=>{const h=await(0,index_es.bW)(this.client.core.storage,"WALLETCONNECT_DEEPLINK_CHOICE");(0,index_es.Hh)({id:o,topic:i,wcDeepLink:h}),d()})),a()]).then((d=>d[2]))},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);const{topic:s,response:t}=e,{id:i}=t;isJsonRpcResult(t)?await this.sendResult({id:i,topic:s,result:t.result,throwOnFailedPublish:!0}):isJsonRpcError(t)&&await this.sendError(i,s,t.error),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized(),await this.isValidPing(e);const{topic:s}=e;if(this.client.session.keys.includes(s)){const t=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:i,resolve:n,reject:o}=(0,index_es.H1)();this.events.once((0,index_es.E0)("session_ping",t),(({error:a})=>{a?o(a):n()})),await i()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);const{topic:s,event:t,chainId:i}=e;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:t,chainId:i}})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);const{topic:s}=e;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:(0,index_es.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((s=>(0,index_es.Ih)(s,e)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const s=this.client.core.pairing.pairings.get(e.pairingTopic),t=this.client.core.pairing.pairings.getAll().filter((i=>{var n,o;return(null==(n=i.peerMetadata)?void 0:n.url)&&(null==(o=i.peerMetadata)?void 0:o.url)===e.peer.metadata.url&&i.topic&&i.topic!==s.topic}));if(0===t.length)return;this.client.logger.info(`Cleaning up ${t.length} duplicate pairing(s)`),await Promise.all(t.map((i=>this.client.core.pairing.disconnect({topic:i.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(e,s)=>{const{self:t}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),this.client.session.delete(e,(0,index_es.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(t.publicKey)&&await this.client.core.crypto.deleteKeyPair(t.publicKey),this.client.core.crypto.keychain.has(e)&&await this.client.core.crypto.deleteSymKey(e),s||this.client.core.expirer.del(e),this.client.core.storage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE").catch((i=>this.client.logger.warn(i))),this.getPendingSessionRequests().forEach((i=>{i.topic===e&&this.deletePendingSessionRequest(i.id,(0,index_es.D6)("USER_DISCONNECTED"))}))},this.deleteProposal=async(e,s)=>{await Promise.all([this.client.proposal.delete(e,(0,index_es.D6)("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,s,t=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,s),t?Promise.resolve():this.client.core.expirer.del(e)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((i=>i.id!==e)),t&&(this.sessionRequestQueue.state=index_es_I_idle)},this.setExpiry=async(e,s)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:s}),this.client.core.expirer.set(e,s)},this.setProposal=async(e,s)=>{await this.client.proposal.set(e,s),this.client.core.expirer.set(e,s.expiry)},this.setPendingSessionRequest=async e=>{const s=index_es_V.wc_sessionRequest.req.ttl,{id:t,topic:i,params:n,verifyContext:o}=e;await this.client.pendingRequest.set(t,{id:t,topic:i,params:n,verifyContext:o}),s&&this.client.core.expirer.set(t,(0,index_es.gn)(s))},this.sendRequest=async e=>{const{topic:s,method:t,params:i,expiry:n,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c}=e,p=formatJsonRpcRequest(t,i,a);if((0,index_es.jU)()&&index_es_pe.includes(t)){const R=(0,index_es.rj)(JSON.stringify(p));this.client.core.verify.register({attestationId:R})}const d=await this.client.core.crypto.encode(s,p),h=index_es_V[t].req;return n&&(h.ttl=n),o&&(h.id=o),this.client.core.history.set(s,p),c?(h.internal=dist_index_es_b(dist_index_es_g({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,d,h)):this.client.core.relayer.publish(s,d,h).catch((R=>this.client.logger.error(R))),p.id},this.sendResult=async e=>{const{id:s,topic:t,result:i,throwOnFailedPublish:n}=e,o=formatJsonRpcResult(s,i),a=await this.client.core.crypto.encode(t,o),c=await this.client.core.history.get(t,s),p=index_es_V[c.request.method].res;n?(p.internal=dist_index_es_b(dist_index_es_g({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,a,p)):this.client.core.relayer.publish(t,a,p).catch((d=>this.client.logger.error(d))),await this.client.core.history.resolve(o)},this.sendError=async(e,s,t)=>{const i=formatJsonRpcError(e,t),n=await this.client.core.crypto.encode(s,i),o=await this.client.core.history.get(s,e),a=index_es_V[o.request.method].res;this.client.core.relayer.publish(s,n,a),await this.client.core.history.resolve(i)},this.cleanup=async()=>{const e=[],s=[];this.client.session.getAll().forEach((t=>{(0,index_es.Bw)(t.expiry)&&e.push(t.topic)})),this.client.proposal.getAll().forEach((t=>{(0,index_es.Bw)(t.expiry)&&s.push(t.id)})),await Promise.all([...e.map((t=>this.deleteSession(t))),...s.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state!==index_es_I_active){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=index_es_I_active;const e=this.requestQueue.queue.shift();if(e)try{this.processRequest(e),await new Promise((s=>setTimeout(s,300)))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=index_es_I_idle}else this.client.logger.info("Request queue already active, skipping...")},this.processRequest=e=>{const{topic:s,payload:t}=e,i=t.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(s,t);case"wc_sessionSettle":return this.onSessionSettleRequest(s,t);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,t);case"wc_sessionExtend":return this.onSessionExtendRequest(s,t);case"wc_sessionPing":return this.onSessionPingRequest(s,t);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,t);case"wc_sessionRequest":return this.onSessionRequest(s,t);case"wc_sessionEvent":return this.onSessionEventRequest(s,t);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async e=>{const{topic:s,payload:t}=e,i=(await this.client.core.history.get(s,t.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(s,t);case"wc_sessionSettle":return this.onSessionSettleResponse(s,t);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,t);case"wc_sessionExtend":return this.onSessionExtendResponse(s,t);case"wc_sessionPing":return this.onSessionPingResponse(s,t);case"wc_sessionRequest":return this.onSessionRequestResponse(s,t);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:s}=e,{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(t)},this.onSessionProposeRequest=async(e,s)=>{const{params:t,id:i}=s;try{this.isValidConnect(dist_index_es_g({},s.params));const n=(0,index_es.gn)(time_dist_cjs.FIVE_MINUTES),o=dist_index_es_g({id:i,pairingTopic:e,expiry:n},t);await this.setProposal(i,o);const a=(0,index_es.rj)(JSON.stringify(s)),c=await this.getVerifyContext(a,o.proposer.metadata);this.client.events.emit("session_proposal",{id:i,params:o,verifyContext:c})}catch(n){await this.sendError(i,e,n),this.client.logger.error(n)}},this.onSessionProposeResponse=async(e,s)=>{const{id:t}=s;if(isJsonRpcResult(s)){const{result:i}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const n=this.client.proposal.get(t);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:n});const o=n.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:c});const p=await this.client.core.relayer.subscribe(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:e})}else isJsonRpcError(s)&&(await this.client.proposal.delete(t,(0,index_es.D6)("USER_DISCONNECTED")),this.events.emit((0,index_es.E0)("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidSessionSettleRequest(i);const{relay:n,controller:o,expiry:a,namespaces:c,requiredNamespaces:p,optionalNamespaces:d,sessionProperties:h,pairingTopic:R}=s.params,w=dist_index_es_g({topic:e,relay:n,expiry:a,namespaces:c,acknowledged:!0,pairingTopic:R,requiredNamespaces:p,optionalNamespaces:d,controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},h&&{sessionProperties:h});await this.sendResult({id:s.id,topic:e,result:!0}),this.events.emit((0,index_es.E0)("session_connect"),{session:w}),this.cleanupDuplicatePairings(w)}catch(n){await this.sendError(t,e,n),this.client.logger.error(n)}},this.onSessionSettleResponse=async(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,index_es.E0)("session_approve",t),{})):isJsonRpcError(s)&&(await this.client.session.delete(e,(0,index_es.D6)("USER_DISCONNECTED")),this.events.emit((0,index_es.E0)("session_approve",t),{error:s.error}))},this.onSessionUpdateRequest=async(e,s)=>{const{params:t,id:i}=s;try{const n=`${e}_session_update`,o=index_es.O6.get(n);if(o&&this.isRequestOutOfSync(o,i))return void this.client.logger.info(`Discarding out of sync request - ${i}`);this.isValidUpdate(dist_index_es_g({topic:e},t)),await this.client.session.update(e,{namespaces:t.namespaces}),await this.sendResult({id:i,topic:e,result:!0}),this.client.events.emit("session_update",{id:i,topic:e,params:t}),index_es.O6.set(n,i)}catch(n){await this.sendError(i,e,n),this.client.logger.error(n)}},this.isRequestOutOfSync=(e,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_update",t),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_update",t),{error:s.error})},this.onSessionExtendRequest=async(e,s)=>{const{id:t}=s;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,index_es.gn)(A)),await this.sendResult({id:t,topic:e,result:!0}),this.client.events.emit("session_extend",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_extend",t),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_extend",t),{error:s.error})},this.onSessionPingRequest=async(e,s)=>{const{id:t}=s;try{this.isValidPing({topic:e}),await this.sendResult({id:t,topic:e,result:!0}),this.client.events.emit("session_ping",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionPingResponse=(e,s)=>{const{id:t}=s;setTimeout((()=>{isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_ping",t),{}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_ping",t),{error:s.error})}),500)},this.onSessionDeleteRequest=async(e,s)=>{const{id:t}=s;try{this.isValidDisconnect({topic:e,reason:s.params}),await Promise.all([new Promise((i=>{this.client.core.relayer.once(index_es_D_publish,(async()=>{i(await this.deleteSession(e))}))})),this.sendResult({id:t,topic:e,result:!0})]),this.client.events.emit("session_delete",{id:t,topic:e})}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidRequest(dist_index_es_g({topic:e},i));const n=(0,index_es.rj)(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",i,t))),o=this.client.session.get(e),c={id:t,topic:e,params:i,verifyContext:await this.getVerifyContext(n,o.peer.metadata)};await this.setPendingSessionRequest(c),this.addSessionRequestToSessionRequestQueue(c),this.processSessionRequestQueue()}catch(n){await this.sendError(t,e,n),this.client.logger.error(n)}},this.onSessionRequestResponse=(e,s)=>{const{id:t}=s;isJsonRpcResult(s)?this.events.emit((0,index_es.E0)("session_request",t),{result:s.result}):isJsonRpcError(s)&&this.events.emit((0,index_es.E0)("session_request",t),{error:s.error})},this.onSessionEventRequest=async(e,s)=>{const{id:t,params:i}=s;try{const n=`${e}_session_event_${i.event.name}`,o=index_es.O6.get(n);if(o&&this.isRequestOutOfSync(o,t))return void this.client.logger.info(`Discarding out of sync request - ${t}`);this.isValidEmit(dist_index_es_g({topic:e},i)),this.client.events.emit("session_event",{id:t,topic:e,params:i}),index_es.O6.set(n,t)}catch(n){await this.sendError(t,e,n),this.client.logger.error(n)}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=index_es_I_idle,this.processSessionRequestQueue()}),(0,time_dist_cjs.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===index_es_I_active)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=index_es_I_active,this.client.events.emit("session_request",e)}catch(s){this.client.logger.error(s)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=e=>{if(e.active)return;const s=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));s&&this.onSessionProposeRequest(e.topic,formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async e=>{if(!(0,index_es.EJ)(e)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(a)}const{pairingTopic:s,requiredNamespaces:t,optionalNamespaces:i,sessionProperties:n,relays:o}=e;if((0,index_es.o8)(s)||await this.isValidPairingTopic(s),!(0,index_es.PM)(o,!0)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(a)}!(0,index_es.o8)(t)&&0!==(0,index_es.L5)(t)&&this.validateNamespaces(t,"requiredNamespaces"),!(0,index_es.o8)(i)&&0!==(0,index_es.L5)(i)&&this.validateNamespaces(i,"optionalNamespaces"),(0,index_es.o8)(n)||this.validateSessionProps(n,"sessionProperties")},this.validateNamespaces=(e,s)=>{const t=(0,index_es.n)(e,"connect()",s);if(t)throw new Error(t.message)},this.isValidApprove=async e=>{if(!(0,index_es.EJ)(e))throw new Error((0,index_es.Z7)("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:s,namespaces:t,relayProtocol:i,sessionProperties:n}=e;await this.isValidProposalId(s);const o=this.client.proposal.get(s),a=(0,index_es.in)(t,"approve()");if(a)throw new Error(a.message);const c=(0,index_es.rF)(o.requiredNamespaces,t,"approve()");if(c)throw new Error(c.message);if(!(0,index_es.M_)(i,!0)){const{message:p}=(0,index_es.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(p)}(0,index_es.o8)(n)||this.validateSessionProps(n,"sessionProperties")},this.isValidReject=async e=>{if(!(0,index_es.EJ)(e)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(i)}const{id:s,reason:t}=e;if(await this.isValidProposalId(s),!(0,index_es.$t)(t)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(t)}`);throw new Error(i)}},this.isValidSessionSettleRequest=e=>{if(!(0,index_es.EJ)(e)){const{message:c}=(0,index_es.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(c)}const{relay:s,controller:t,namespaces:i,expiry:n}=e;if(!(0,index_es.Z2)(s)){const{message:c}=(0,index_es.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const o=(0,index_es.Dd)(t,"onSessionSettleRequest()");if(o)throw new Error(o.message);const a=(0,index_es.in)(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);if((0,index_es.Bw)(n)){const{message:c}=(0,index_es.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(c)}},this.isValidUpdate=async e=>{if(!(0,index_es.EJ)(e)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(a)}const{topic:s,namespaces:t}=e;await this.isValidSessionTopic(s);const i=this.client.session.get(s),n=(0,index_es.in)(t,"update()");if(n)throw new Error(n.message);const o=(0,index_es.rF)(i.requiredNamespaces,t,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async e=>{if(!(0,index_es.EJ)(e)){const{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionTopic(s)},this.isValidRequest=async e=>{if(!(0,index_es.EJ)(e)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(a)}const{topic:s,request:t,chainId:i,expiry:n}=e;await this.isValidSessionTopic(s);const{namespaces:o}=this.client.session.get(s);if(!(0,index_es.p8)(o,i)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(a)}if(!(0,index_es.hH)(t)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(t)}`);throw new Error(a)}if(!(0,index_es.al)(o,i,t.method)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() method: ${t.method}`);throw new Error(a)}if(n&&!(0,index_es.ON)(n,index_es_U)){const{message:a}=(0,index_es.Z7)("MISSING_OR_INVALID",`request() expiry: ${n}. Expiry must be a number (in seconds) between ${index_es_U.min} and ${index_es_U.max}`);throw new Error(a)}},this.isValidRespond=async e=>{var s;if(!(0,index_es.EJ)(e)){const{message:n}=(0,index_es.Z7)("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(n)}const{topic:t,response:i}=e;try{await this.isValidSessionTopic(t)}catch(n){throw null!=(s=e?.response)&&s.id&&this.cleanupAfterResponse(e),n}if(!(0,index_es.JT)(i)){const{message:n}=(0,index_es.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(n)}},this.isValidPing=async e=>{if(!(0,index_es.EJ)(e)){const{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async e=>{if(!(0,index_es.EJ)(e)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(o)}const{topic:s,event:t,chainId:i}=e;await this.isValidSessionTopic(s);const{namespaces:n}=this.client.session.get(s);if(!(0,index_es.p8)(n,i)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!(0,index_es.nf)(t)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(o)}if(!(0,index_es.sI)(n,i,t.name)){const{message:o}=(0,index_es.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(o)}},this.isValidDisconnect=async e=>{if(!(0,index_es.EJ)(e)){const{message:t}=(0,index_es.Z7)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(e,s)=>{const t={verified:{verifyUrl:s.verifyUrl||$,validation:"UNKNOWN",origin:s.url||""}};try{const i=await this.client.core.verify.resolve({attestationId:e,verifyUrl:s.verifyUrl});i&&(t.verified.origin=i.origin,t.verified.isScam=i.isScam,t.verified.validation=i.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(i){this.client.logger.info(i)}return this.client.logger.info(`Verify context: ${JSON.stringify(t)}`),t},this.validateSessionProps=(e,s)=>{Object.values(e).forEach((t=>{if(!(0,index_es.M_)(t,!1)){const{message:i}=(0,index_es.Z7)("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(i)}}))}}async isInitialized(){if(!this.initialized){const{message:r}=(0,index_es.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(index_es_D_message,(async r=>{const{topic:e,message:s}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const t=await this.client.core.crypto.decode(e,s);try{isJsonRpcRequest(t)?(this.client.core.history.set(e,t),this.onRelayEventRequest({topic:e,payload:t})):isJsonRpcResponse(t)?(await this.client.core.history.resolve(t),await this.onRelayEventResponse({topic:e,payload:t}),this.client.core.history.delete(e,t.id)):this.onRelayEventUnknownPayload({topic:e,payload:t})}catch(i){this.client.logger.error(i)}}))}registerExpirerEvents(){this.client.core.expirer.on(index_es_v_expired,(async r=>{const{topic:e,id:s}=(0,index_es.iP)(r.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,(0,index_es.Z7)("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession(e,!0),this.client.events.emit("session_expire",{topic:e})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))}))}registerPairingEvents(){this.client.core.pairing.events.on(V_create,(r=>this.onPairingCreated(r)))}isValidPairingTopic(r){if(!(0,index_es.M_)(r,!1)){const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(e)}if((0,index_es.Bw)(this.client.core.pairing.pairings.get(r).expiry)){const{message:e}=(0,index_es.Z7)("EXPIRED",`pairing topic: ${r}`);throw new Error(e)}}async isValidSessionTopic(r){if(!(0,index_es.M_)(r,!1)){const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(e)}if(!this.client.session.keys.includes(r)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(e)}if((0,index_es.Bw)(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:e}=(0,index_es.Z7)("EXPIRED",`session topic: ${r}`);throw new Error(e)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else{if(!this.client.core.pairing.pairings.keys.includes(r)){if((0,index_es.M_)(r,!1)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(e)}{const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(e)}}this.isValidPairingTopic(r)}}async isValidProposalId(r){if(!(0,index_es.Q0)(r)){const{message:e}=(0,index_es.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(e)}if(!this.client.proposal.keys.includes(r)){const{message:e}=(0,index_es.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(e)}if((0,index_es.Bw)(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:e}=(0,index_es.Z7)("EXPIRED",`proposal id: ${r}`);throw new Error(e)}}}class index_es_us extends Kt{constructor(r,e){super(r,e,"proposal",G),this.core=r,this.logger=e}}class index_es_ue extends Kt{constructor(r,e){super(r,e,"session",G),this.core=r,this.logger=e}}class index_es_gs extends Kt{constructor(r,e){super(r,e,"request",G,(s=>s.id)),this.core=r,this.logger=e}}class index_es_Q extends b{constructor(r){super(r),this.protocol="wc",this.version=2,this.name=M_name,this.events=new events.EventEmitter,this.on=(s,t)=>this.events.on(s,t),this.once=(s,t)=>this.events.once(s,t),this.off=(s,t)=>this.events.off(s,t),this.removeListener=(s,t)=>this.events.removeListener(s,t),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(t){throw this.logger.error(t.message),t}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(t){throw this.logger.error(t.message),t}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(t){throw this.logger.error(t.message),t}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(t){throw this.logger.error(t.message),t}},this.update=async s=>{try{return await this.engine.update(s)}catch(t){throw this.logger.error(t.message),t}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(t){throw this.logger.error(t.message),t}},this.request=async s=>{try{return await this.engine.request(s)}catch(t){throw this.logger.error(t.message),t}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(t){throw this.logger.error(t.message),t}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(t){throw this.logger.error(t.message),t}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(t){throw this.logger.error(t.message),t}},this.find=s=>{try{return this.engine.find(s)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=r?.name||M_name,this.metadata=r?.metadata||(0,index_es.D)();const e=typeof r?.logger<"u"&&"string"!=typeof r?.logger?r.logger:(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:r?.logger||M_logger}));this.core=r?.core||new Mr(r),this.logger=(0,dist_cjs.generateChildLogger)(e,this.name),this.session=new index_es_ue(this.core,this.logger),this.proposal=new index_es_us(this.core,this.logger),this.pendingRequest=new index_es_gs(this.core,this.logger),this.engine=new index_es_ds(this)}static async init(r){const e=new index_es_Q(r);return await e.initialize(),e}get context(){return(0,dist_cjs.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}}var browser_ponyfill=__webpack_require__("./node_modules/cross-fetch/dist/browser-ponyfill.js"),browser_ponyfill_default=__webpack_require__.n(browser_ponyfill);const DEFAULT_FETCH_OPTS={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class HttpConnection{constructor(url,disableProviderPing=!1){if(this.url=url,this.disableProviderPing=disableProviderPing,this.events=new events.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(url))throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);this.url=url,this.disableProviderPing=disableProviderPing}get connected(){return this.isAvailable}get connecting(){return this.registering}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}async open(url=this.url){await this.register(url)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(payload,context){this.isAvailable||await this.register();try{const body=safeJsonStringify(payload),res=await browser_ponyfill_default()(this.url,Object.assign(Object.assign({},DEFAULT_FETCH_OPTS),{body})),data=await res.json();this.onPayload({data})}catch(e){this.onError(payload.id,e)}}async register(url=this.url){if(!isHttpUrl(url))throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);if(this.registering){const currentMaxListeners=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=currentMaxListeners||this.events.listenerCount("open")>=currentMaxListeners)&&this.events.setMaxListeners(currentMaxListeners+1),new Promise(((resolve,reject)=>{this.events.once("register_error",(error=>{this.resetMaxListeners(),reject(error)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return reject(new Error("HTTP connection is missing or invalid"));resolve()}))}))}this.url=url,this.registering=!0;try{if(!this.disableProviderPing){const body=safeJsonStringify({id:1,jsonrpc:"2.0",method:"test",params:[]});await browser_ponyfill_default()(url,Object.assign(Object.assign({},DEFAULT_FETCH_OPTS),{body}))}this.onOpen()}catch(e){const error=this.parseError(e);throw this.events.emit("register_error",error),this.onClose(),error}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;const payload="string"==typeof e.data?esm_safeJsonParse(e.data):e.data;this.events.emit("payload",payload)}onError(id,e){const error=this.parseError(e),payload=formatJsonRpcError(id,error.message||error.toString());this.events.emit("payload",payload)}parseError(e,url=this.url){return parseConnectionError(e,url,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const dist_esm=HttpConnection,xa="wc@2:universal_provider:",Vn_DEFAULT_CHAIN_CHANGED="default_chain_changed";var index_es_ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof __webpack_require__.g<"u"?__webpack_require__.g:typeof self<"u"?self:{},Ui={exports:{}};!function(C,u){(function(){var i,$="Expected a function",zt="__lodash_hash_undefined__",It="__lodash_placeholder__",Mn=128,ht=1/0,kn=9007199254740991,Nn=4294967295,qa=[["ary",Mn],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ot="[object Arguments]",me="[object Array]",Yt="[object Boolean]",Zt="[object Date]",we="[object Error]",Pe="[object Function]",Gi="[object GeneratorFunction]",yn="[object Map]",Jt="[object Number]",qn="[object Object]",zi="[object Promise]",Xt="[object RegExp]",Sn="[object Set]",Qt="[object String]",Ae="[object Symbol]",Vt="[object WeakMap]",kt="[object ArrayBuffer]",Rt="[object DataView]",gr="[object Float32Array]",vr="[object Float64Array]",_r="[object Int8Array]",mr="[object Int16Array]",wr="[object Int32Array]",Pr="[object Uint8Array]",Ar="[object Uint8ClampedArray]",Cr="[object Uint16Array]",Ir="[object Uint32Array]",Ja=/\b__p \+= '';/g,Xa=/\b(__p \+=) '' \+/g,Qa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ki=/&(?:amp|lt|gt|quot|#39);/g,Yi=/[&<>"']/g,Va=RegExp(Ki.source),ka=RegExp(Yi.source),ja=/<%-([\s\S]+?)%>/g,no=/<%([\s\S]+?)%>/g,Zi=/<%=([\s\S]+?)%>/g,to=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eo=/^\w*$/,ro=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xr=/[\\^$.*+?()[\]{}|]/g,io=RegExp(xr.source),Er=/^\s+/,so=/\s/,uo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ao=/\{\n\/\* \[wrapped with (.+)\] \*/,oo=/,? & /,fo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,co=/[()=,{}\[\]\/\s]/,ho=/\\(\\)?/g,lo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ji=/\w*$/,po=/^[-+]0x[0-9a-f]+$/i,go=/^0b[01]+$/i,vo=/^\[object .+?Constructor\]$/,_o=/^0o[0-7]+$/i,mo=/^(?:0|[1-9]\d*)$/,wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ce=/($^)/,Po=/['\n\r\u2028\u2029\\]/g,Ie="\\ud800-\\udfff",Xi="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qi="\\u2700-\\u27bf",Vi="a-z\\xdf-\\xf6\\xf8-\\xff",ki="A-Z\\xc0-\\xd6\\xd8-\\xde",ji="\\ufe0e\\ufe0f",ns="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yr="['’]",Oo="["+Ie+"]",ts="["+ns+"]",xe="["+Xi+"]",es="\\d+",Ro="["+Qi+"]",rs="["+Vi+"]",is="[^"+Ie+ns+es+Qi+Vi+ki+"]",Sr="\\ud83c[\\udffb-\\udfff]",ss="[^"+Ie+"]",Or="(?:\\ud83c[\\udde6-\\uddff]){2}",Rr="[\\ud800-\\udbff][\\udc00-\\udfff]",bt="["+ki+"]",as="(?:"+rs+"|"+is+")",To="(?:"+bt+"|"+is+")",os="(?:['’](?:d|ll|m|re|s|t|ve))?",fs="(?:['’](?:D|LL|M|RE|S|T|VE))?",cs="(?:"+xe+"|"+Sr+")"+"?",hs="["+ji+"]?",ls=hs+cs+("(?:\\u200d(?:"+[ss,Or,Rr].join("|")+")"+hs+cs+")*"),No="(?:"+[Ro,Or,Rr].join("|")+")"+ls,$o="(?:"+[ss+xe+"?",xe,Or,Rr,Oo].join("|")+")",Uo=RegExp(yr,"g"),Wo=RegExp(xe,"g"),br=RegExp(Sr+"(?="+Sr+")|"+$o+ls,"g"),Fo=RegExp([bt+"?"+rs+"+"+os+"(?="+[ts,bt,"$"].join("|")+")",To+"+"+fs+"(?="+[ts,bt+as,"$"].join("|")+")",bt+"?"+as+"+"+os,bt+"+"+fs,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",es,No].join("|"),"g"),Mo=RegExp("[\\u200d"+Ie+Xi+ji+"]"),qo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Go=-1,B={};B[gr]=B[vr]=B[_r]=B[mr]=B[wr]=B[Pr]=B[Ar]=B[Cr]=B[Ir]=!0,B[Ot]=B[me]=B[kt]=B[Yt]=B[Rt]=B[Zt]=B[we]=B[Pe]=B[yn]=B[Jt]=B[qn]=B[Xt]=B[Sn]=B[Qt]=B[Vt]=!1;var q={};q[Ot]=q[me]=q[kt]=q[Rt]=q[Yt]=q[Zt]=q[gr]=q[vr]=q[_r]=q[mr]=q[wr]=q[yn]=q[Jt]=q[qn]=q[Xt]=q[Sn]=q[Qt]=q[Ae]=q[Pr]=q[Ar]=q[Cr]=q[Ir]=!0,q[we]=q[Pe]=q[Vt]=!1;var Zo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jo=parseFloat,Xo=parseInt,ps="object"==typeof index_es_ge&&index_es_ge&&index_es_ge.Object===Object&&index_es_ge,Qo="object"==typeof self&&self&&self.Object===Object&&self,k=ps||Qo||Function("return this")(),Tr=u&&!u.nodeType&&u,lt=Tr&&C&&!C.nodeType&&C,ds=lt&&lt.exports===Tr,Lr=ds&&ps.process,_n=function(){try{return lt&&lt.require&&lt.require("util").types||Lr&&Lr.binding&&Lr.binding("util")}catch{}}(),gs=_n&&_n.isArrayBuffer,vs=_n&&_n.isDate,_s=_n&&_n.isMap,ms=_n&&_n.isRegExp,ws=_n&&_n.isSet,Ps=_n&&_n.isTypedArray;function cn(h,g,p){switch(p.length){case 0:return h.call(g);case 1:return h.call(g,p[0]);case 2:return h.call(g,p[0],p[1]);case 3:return h.call(g,p[0],p[1],p[2])}return h.apply(g,p)}function Vo(h,g,p,A){for(var S=-1,U=null==h?0:h.length;++S<U;){var X=h[S];g(A,X,p(X),h)}return A}function mn(h,g){for(var p=-1,A=null==h?0:h.length;++p<A&&!1!==g(h[p],p,h););return h}function ko(h,g){for(var p=null==h?0:h.length;p--&&!1!==g(h[p],p,h););return h}function As(h,g){for(var p=-1,A=null==h?0:h.length;++p<A;)if(!g(h[p],p,h))return!1;return!0}function jn(h,g){for(var p=-1,A=null==h?0:h.length,S=0,U=[];++p<A;){var X=h[p];g(X,p,h)&&(U[S++]=X)}return U}function Ee(h,g){return!!(null==h?0:h.length)&&Tt(h,g,0)>-1}function Dr(h,g,p){for(var A=-1,S=null==h?0:h.length;++A<S;)if(p(g,h[A]))return!0;return!1}function G(h,g){for(var p=-1,A=null==h?0:h.length,S=Array(A);++p<A;)S[p]=g(h[p],p,h);return S}function nt(h,g){for(var p=-1,A=g.length,S=h.length;++p<A;)h[S+p]=g[p];return h}function Hr(h,g,p,A){var S=-1,U=null==h?0:h.length;for(A&&U&&(p=h[++S]);++S<U;)p=g(p,h[S],S,h);return p}function jo(h,g,p,A){var S=null==h?0:h.length;for(A&&S&&(p=h[--S]);S--;)p=g(p,h[S],S,h);return p}function Nr(h,g){for(var p=-1,A=null==h?0:h.length;++p<A;)if(g(h[p],p,h))return!0;return!1}var nf=$r("length");function Cs(h,g,p){var A;return p(h,(function(S,U,X){if(g(S,U,X))return A=U,!1})),A}function ye(h,g,p,A){for(var S=h.length,U=p+(A?1:-1);A?U--:++U<S;)if(g(h[U],U,h))return U;return-1}function Tt(h,g,p){return g==g?function gf(h,g,p){for(var A=p-1,S=h.length;++A<S;)if(h[A]===g)return A;return-1}(h,g,p):ye(h,Is,p)}function rf(h,g,p,A){for(var S=p-1,U=h.length;++S<U;)if(A(h[S],g))return S;return-1}function Is(h){return h!=h}function xs(h,g){var p=null==h?0:h.length;return p?Wr(h,g)/p:NaN}function $r(h){return function(g){return null==g?i:g[h]}}function Ur(h){return function(g){return null==h?i:h[g]}}function Es(h,g,p,A,S){return S(h,(function(U,X,M){p=A?(A=!1,U):g(p,U,X,M)})),p}function Wr(h,g){for(var p,A=-1,S=h.length;++A<S;){var U=g(h[A]);U!==i&&(p=p===i?U:p+U)}return p}function Fr(h,g){for(var p=-1,A=Array(h);++p<h;)A[p]=g(p);return A}function ys(h){return h&&h.slice(0,bs(h)+1).replace(Er,"")}function hn(h){return function(g){return h(g)}}function Mr(h,g){return G(g,(function(p){return h[p]}))}function jt(h,g){return h.has(g)}function Ss(h,g){for(var p=-1,A=h.length;++p<A&&Tt(g,h[p],0)>-1;);return p}function Os(h,g){for(var p=h.length;p--&&Tt(g,h[p],0)>-1;);return p}var of=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),ff=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cf(h){return"\\"+Zo[h]}function Lt(h){return Mo.test(h)}function qr(h){var g=-1,p=Array(h.size);return h.forEach((function(A,S){p[++g]=[S,A]})),p}function Rs(h,g){return function(p){return h(g(p))}}function tt(h,g){for(var p=-1,A=h.length,S=0,U=[];++p<A;){var X=h[p];(X===g||X===It)&&(h[p]=It,U[S++]=p)}return U}function Se(h){var g=-1,p=Array(h.size);return h.forEach((function(A){p[++g]=A})),p}function Dt(h){return Lt(h)?function mf(h){for(var g=br.lastIndex=0;br.test(h);)++g;return g}(h):nf(h)}function On(h){return Lt(h)?function wf(h){return h.match(br)||[]}(h):function tf(h){return h.split("")}(h)}function bs(h){for(var g=h.length;g--&&so.test(h.charAt(g)););return g}var _f=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ht=function h(g){var p=(g=null==g?k:Ht.defaults(k.Object(),g,Ht.pick(k,Bo))).Array,A=g.Date,S=g.Error,U=g.Function,X=g.Math,M=g.Object,Br=g.RegExp,Cf=g.String,wn=g.TypeError,Oe=p.prototype,If=U.prototype,Nt=M.prototype,Re=g["__core-js_shared__"],be=If.toString,F=Nt.hasOwnProperty,xf=0,Ts=function(){var n=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Te=Nt.toString,Ef=be.call(M),yf=k._,Sf=Br("^"+be.call(F).replace(xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=ds?g.Buffer:i,et=g.Symbol,De=g.Uint8Array,Ls=Le?Le.allocUnsafe:i,He=Rs(M.getPrototypeOf,M),Ds=M.create,Hs=Nt.propertyIsEnumerable,Ne=Oe.splice,Ns=et?et.isConcatSpreadable:i,ne=et?et.iterator:i,pt=et?et.toStringTag:i,$e=function(){try{var n=mt(M,"defineProperty");return n({},"",{}),n}catch{}}(),Of=g.clearTimeout!==k.clearTimeout&&g.clearTimeout,Rf=A&&A.now!==k.Date.now&&A.now,bf=g.setTimeout!==k.setTimeout&&g.setTimeout,Ue=X.ceil,We=X.floor,Gr=M.getOwnPropertySymbols,Tf=Le?Le.isBuffer:i,$s=g.isFinite,Lf=Oe.join,Df=Rs(M.keys,M),Q=X.max,nn=X.min,Hf=A.now,Nf=g.parseInt,Us=X.random,$f=Oe.reverse,zr=mt(g,"DataView"),te=mt(g,"Map"),Kr=mt(g,"Promise"),$t=mt(g,"Set"),ee=mt(g,"WeakMap"),re=mt(M,"create"),Fe=ee&&new ee,Ut={},Uf=wt(zr),Wf=wt(te),Ff=wt(Kr),Mf=wt($t),qf=wt(ee),Me=et?et.prototype:i,ie=Me?Me.valueOf:i,Ws=Me?Me.toString:i;function a(n){if(Y(n)&&!R(n)&&!(n instanceof H)){if(n instanceof Pn)return n;if(F.call(n,"__wrapped__"))return Fu(n)}return new Pn(n)}var Wt=function(){function n(){}return function(t){if(!K(t))return{};if(Ds)return Ds(t);n.prototype=t;var e=new n;return n.prototype=i,e}}();function qe(){}function Pn(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function H(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nn,this.__views__=[]}function dt(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Bn(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Gn(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function gt(n){var t=-1,e=null==n?0:n.length;for(this.__data__=new Gn;++t<e;)this.add(n[t])}function Rn(n){var t=this.__data__=new Bn(n);this.size=t.size}function Fs(n,t){var e=R(n),r=!e&&Pt(n),s=!e&&!r&&at(n),o=!e&&!r&&!s&&Bt(n),f=e||r||s||o,c=f?Fr(n.length,Cf):[],l=c.length;for(var v in n)(t||F.call(n,v))&&(!f||!("length"==v||s&&("offset"==v||"parent"==v)||o&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||Zn(v,l)))&&c.push(v);return c}function Ms(n){var t=n.length;return t?n[ei(0,t-1)]:i}function pc(n,t){return tr(un(n),vt(t,0,n.length))}function dc(n){return tr(un(n))}function Yr(n,t,e){(e!==i&&!bn(n[t],e)||e===i&&!(t in n))&&zn(n,t,e)}function se(n,t,e){var r=n[t];(!F.call(n,t)||!bn(r,e)||e===i&&!(t in n))&&zn(n,t,e)}function Be(n,t){for(var e=n.length;e--;)if(bn(n[e][0],t))return e;return-1}function gc(n,t,e,r){return rt(n,(function(s,o,f){t(r,s,e(s),f)})),r}function qs(n,t){return n&&Un(t,V(t),n)}function zn(n,t,e){"__proto__"==t&&$e?$e(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function Zr(n,t){for(var e=-1,r=t.length,s=p(r),o=null==n;++e<r;)s[e]=o?i:Si(n,t[e]);return s}function vt(n,t,e){return n==n&&(e!==i&&(n=n<=e?n:e),t!==i&&(n=n>=t?n:t)),n}function An(n,t,e,r,s,o){var f,c=1&t,l=2&t,v=4&t;if(e&&(f=s?e(n,r,s,o):e(n)),f!==i)return f;if(!K(n))return n;var _=R(n);if(_){if(f=function ih(n){var t=n.length,e=new n.constructor(t);return t&&"string"==typeof n[0]&&F.call(n,"index")&&(e.index=n.index,e.input=n.input),e}(n),!c)return un(n,f)}else{var m=tn(n),w=m==Pe||m==Gi;if(at(n))return hu(n,c);if(m==qn||m==Ot||w&&!s){if(f=l||w?{}:bu(n),!c)return l?function Zc(n,t){return Un(n,Ou(n),t)}(n,function vc(n,t){return n&&Un(t,on(t),n)}(f,n)):function Yc(n,t){return Un(n,vi(n),t)}(n,qs(f,n))}else{if(!q[m])return s?n:{};f=function sh(n,t,e){var r=n.constructor;switch(t){case kt:return fi(n);case Yt:case Zt:return new r(+n);case Rt:return function Bc(n,t){var e=t?fi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}(n,e);case gr:case vr:case _r:case mr:case wr:case Pr:case Ar:case Cr:case Ir:return lu(n,e);case yn:return new r;case Jt:case Qt:return new r(n);case Xt:return function Gc(n){var t=new n.constructor(n.source,Ji.exec(n));return t.lastIndex=n.lastIndex,t}(n);case Sn:return new r;case Ae:return function zc(n){return ie?M(ie.call(n)):{}}(n)}}(n,m,c)}}o||(o=new Rn);var I=o.get(n);if(I)return I;o.set(n,f),sa(n)?n.forEach((function(y){f.add(An(y,t,e,y,n,o))})):ra(n)&&n.forEach((function(y,D){f.set(D,An(y,t,e,D,n,o))}));var T=_?i:(v?l?pi:li:l?on:V)(n);return mn(T||n,(function(y,D){T&&(y=n[D=y]),se(f,D,An(y,t,e,D,n,o))})),f}function Bs(n,t,e){var r=e.length;if(null==n)return!r;for(n=M(n);r--;){var s=e[r],o=t[s],f=n[s];if(f===i&&!(s in n)||!o(f))return!1}return!0}function Gs(n,t,e){if("function"!=typeof n)throw new wn($);return le((function(){n.apply(i,e)}),t)}function ue(n,t,e,r){var s=-1,o=Ee,f=!0,c=n.length,l=[],v=t.length;if(!c)return l;e&&(t=G(t,hn(e))),r?(o=Dr,f=!1):t.length>=200&&(o=jt,f=!1,t=new gt(t));n:for(;++s<c;){var _=n[s],m=null==e?_:e(_);if(_=r||0!==_?_:0,f&&m==m){for(var w=v;w--;)if(t[w]===m)continue n;l.push(_)}else o(t,m,r)||l.push(_)}return l}a.templateSettings={escape:ja,evaluate:no,interpolate:Zi,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=Wt(qe.prototype),Pn.prototype.constructor=Pn,H.prototype=Wt(qe.prototype),H.prototype.constructor=H,dt.prototype.clear=function Kf(){this.__data__=re?re(null):{},this.size=0},dt.prototype.delete=function Yf(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},dt.prototype.get=function Zf(n){var t=this.__data__;if(re){var e=t[n];return e===zt?i:e}return F.call(t,n)?t[n]:i},dt.prototype.has=function Jf(n){var t=this.__data__;return re?t[n]!==i:F.call(t,n)},dt.prototype.set=function Xf(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=re&&t===i?zt:t,this},Bn.prototype.clear=function Qf(){this.__data__=[],this.size=0},Bn.prototype.delete=function Vf(n){var t=this.__data__,e=Be(t,n);return!(e<0)&&(e==t.length-1?t.pop():Ne.call(t,e,1),--this.size,!0)},Bn.prototype.get=function kf(n){var t=this.__data__,e=Be(t,n);return e<0?i:t[e][1]},Bn.prototype.has=function jf(n){return Be(this.__data__,n)>-1},Bn.prototype.set=function nc(n,t){var e=this.__data__,r=Be(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this},Gn.prototype.clear=function tc(){this.size=0,this.__data__={hash:new dt,map:new(te||Bn),string:new dt}},Gn.prototype.delete=function ec(n){var t=nr(this,n).delete(n);return this.size-=t?1:0,t},Gn.prototype.get=function rc(n){return nr(this,n).get(n)},Gn.prototype.has=function ic(n){return nr(this,n).has(n)},Gn.prototype.set=function sc(n,t){var e=nr(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this},gt.prototype.add=gt.prototype.push=function uc(n){return this.__data__.set(n,zt),this},gt.prototype.has=function ac(n){return this.__data__.has(n)},Rn.prototype.clear=function oc(){this.__data__=new Bn,this.size=0},Rn.prototype.delete=function fc(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e},Rn.prototype.get=function cc(n){return this.__data__.get(n)},Rn.prototype.has=function hc(n){return this.__data__.has(n)},Rn.prototype.set=function lc(n,t){var e=this.__data__;if(e instanceof Bn){var r=e.__data__;if(!te||r.length<199)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Gn(r)}return e.set(n,t),this.size=e.size,this};var rt=vu($n),zs=vu(Xr,!0);function mc(n,t){var e=!0;return rt(n,(function(r,s,o){return e=!!t(r,s,o)})),e}function Ge(n,t,e){for(var r=-1,s=n.length;++r<s;){var o=n[r],f=t(o);if(null!=f&&(c===i?f==f&&!pn(f):e(f,c)))var c=f,l=o}return l}function Ks(n,t){var e=[];return rt(n,(function(r,s,o){t(r,s,o)&&e.push(r)})),e}function j(n,t,e,r,s){var o=-1,f=n.length;for(e||(e=ah),s||(s=[]);++o<f;){var c=n[o];t>0&&e(c)?t>1?j(c,t-1,e,r,s):nt(s,c):r||(s[s.length]=c)}return s}var Jr=_u(),Ys=_u(!0);function $n(n,t){return n&&Jr(n,t,V)}function Xr(n,t){return n&&Ys(n,t,V)}function ze(n,t){return jn(t,(function(e){return Jn(n[e])}))}function _t(n,t){for(var e=0,r=(t=st(t,n)).length;null!=n&&e<r;)n=n[Wn(t[e++])];return e&&e==r?n:i}function Zs(n,t,e){var r=t(n);return R(n)?r:nt(r,e(n))}function en(n){return null==n?n===i?"[object Undefined]":"[object Null]":pt&&pt in M(n)?function th(n){var t=F.call(n,pt),e=n[pt];try{n[pt]=i;var r=!0}catch{}var s=Te.call(n);return r&&(t?n[pt]=e:delete n[pt]),s}(n):function dh(n){return Te.call(n)}(n)}function Qr(n,t){return n>t}function Pc(n,t){return null!=n&&F.call(n,t)}function Ac(n,t){return null!=n&&t in M(n)}function Vr(n,t,e){for(var r=e?Dr:Ee,s=n[0].length,o=n.length,f=o,c=p(o),l=1/0,v=[];f--;){var _=n[f];f&&t&&(_=G(_,hn(t))),l=nn(_.length,l),c[f]=!e&&(t||s>=120&&_.length>=120)?new gt(f&&_):i}_=n[0];var m=-1,w=c[0];n:for(;++m<s&&v.length<l;){var I=_[m],E=t?t(I):I;if(I=e||0!==I?I:0,!(w?jt(w,E):r(v,E,e))){for(f=o;--f;){var T=c[f];if(!(T?jt(T,E):r(n[f],E,e)))continue n}w&&w.push(E),v.push(I)}}return v}function ae(n,t,e){var r=null==(n=Hu(n,t=st(t,n)))?n:n[Wn(In(t))];return null==r?i:cn(r,n,e)}function Js(n){return Y(n)&&en(n)==Ot}function oe(n,t,e,r,s){return n===t||(null==n||null==t||!Y(n)&&!Y(t)?n!=n&&t!=t:function yc(n,t,e,r,s,o){var f=R(n),c=R(t),l=f?me:tn(n),v=c?me:tn(t);l=l==Ot?qn:l,v=v==Ot?qn:v;var _=l==qn,m=v==qn,w=l==v;if(w&&at(n)){if(!at(t))return!1;f=!0,_=!1}if(w&&!_)return o||(o=new Rn),f||Bt(n)?Su(n,t,e,r,s,o):function jc(n,t,e,r,s,o,f){switch(e){case Rt:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case kt:return!(n.byteLength!=t.byteLength||!o(new De(n),new De(t)));case Yt:case Zt:case Jt:return bn(+n,+t);case we:return n.name==t.name&&n.message==t.message;case Xt:case Qt:return n==t+"";case yn:var c=qr;case Sn:var l=1&r;if(c||(c=Se),n.size!=t.size&&!l)return!1;var v=f.get(n);if(v)return v==t;r|=2,f.set(n,t);var _=Su(c(n),c(t),r,s,o,f);return f.delete(n),_;case Ae:if(ie)return ie.call(n)==ie.call(t)}return!1}(n,t,l,e,r,s,o);if(!(1&e)){var I=_&&F.call(n,"__wrapped__"),E=m&&F.call(t,"__wrapped__");if(I||E){var T=I?n.value():n,y=E?t.value():t;return o||(o=new Rn),s(T,y,e,r,o)}}return!!w&&(o||(o=new Rn),function nh(n,t,e,r,s,o){var f=1&e,c=li(n),l=c.length,v=li(t),_=v.length;if(l!=_&&!f)return!1;for(var m=l;m--;){var w=c[m];if(!(f?w in t:F.call(t,w)))return!1}var I=o.get(n),E=o.get(t);if(I&&E)return I==t&&E==n;var T=!0;o.set(n,t),o.set(t,n);for(var y=f;++m<l;){var D=n[w=c[m]],N=t[w];if(r)var dn=f?r(N,D,w,t,n,o):r(D,N,w,n,t,o);if(!(dn===i?D===N||s(D,N,e,r,o):dn)){T=!1;break}y||(y="constructor"==w)}if(T&&!y){var sn=n.constructor,gn=t.constructor;sn!=gn&&"constructor"in n&&"constructor"in t&&!("function"==typeof sn&&sn instanceof sn&&"function"==typeof gn&&gn instanceof gn)&&(T=!1)}return o.delete(n),o.delete(t),T}(n,t,e,r,s,o))}(n,t,e,r,oe,s))}function kr(n,t,e,r){var s=e.length,o=s,f=!r;if(null==n)return!o;for(n=M(n);s--;){var c=e[s];if(f&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++s<o;){var l=(c=e[s])[0],v=n[l],_=c[1];if(f&&c[2]){if(v===i&&!(l in n))return!1}else{var m=new Rn;if(r)var w=r(v,_,l,n,t,m);if(!(w===i?oe(_,v,3,r,m):w))return!1}}return!0}function Xs(n){return!(!K(n)||function fh(n){return!!Ts&&Ts in n}(n))&&(Jn(n)?Sf:vo).test(wt(n))}function Qs(n){return"function"==typeof n?n:null==n?fn:"object"==typeof n?R(n)?js(n[0],n[1]):ks(n):ma(n)}function jr(n){if(!he(n))return Df(n);var t=[];for(var e in M(n))F.call(n,e)&&"constructor"!=e&&t.push(e);return t}function Tc(n){if(!K(n))return function ph(n){var t=[];if(null!=n)for(var e in M(n))t.push(e);return t}(n);var t=he(n),e=[];for(var r in n)"constructor"==r&&(t||!F.call(n,r))||e.push(r);return e}function ni(n,t){return n<t}function Vs(n,t){var e=-1,r=an(n)?p(n.length):[];return rt(n,(function(s,o,f){r[++e]=t(s,o,f)})),r}function ks(n){var t=gi(n);return 1==t.length&&t[0][2]?Lu(t[0][0],t[0][1]):function(e){return e===n||kr(e,n,t)}}function js(n,t){return _i(n)&&Tu(t)?Lu(Wn(n),t):function(e){var r=Si(e,n);return r===i&&r===t?Oi(e,n):oe(t,r,3)}}function Ke(n,t,e,r,s){n!==t&&Jr(t,(function(o,f){if(s||(s=new Rn),K(o))!function Lc(n,t,e,r,s,o,f){var c=wi(n,e),l=wi(t,e),v=f.get(l);if(v)return void Yr(n,e,v);var _=o?o(c,l,e+"",n,t,f):i,m=_===i;if(m){var w=R(l),I=!w&&at(l),E=!w&&!I&&Bt(l);_=l,w||I||E?R(c)?_=c:Z(c)?_=un(c):I?(m=!1,_=hu(l,!0)):E?(m=!1,_=lu(l,!0)):_=[]:pe(l)||Pt(l)?(_=c,Pt(c)?_=oa(c):(!K(c)||Jn(c))&&(_=bu(l))):m=!1}m&&(f.set(l,_),s(_,l,r,o,f),f.delete(l)),Yr(n,e,_)}(n,t,f,e,Ke,r,s);else{var c=r?r(wi(n,f),o,f+"",n,t,s):i;c===i&&(c=o),Yr(n,f,c)}}),on)}function nu(n,t){var e=n.length;if(e)return Zn(t+=t<0?e:0,e)?n[t]:i}function tu(n,t,e){t=t.length?G(t,(function(o){return R(o)?function(f){return _t(f,1===o.length?o[0]:o)}:o})):[fn];var r=-1;t=G(t,hn(x()));var s=Vs(n,(function(o,f,c){var l=G(t,(function(v){return v(o)}));return{criteria:l,index:++r,value:o}}));return function sf(h,g){var p=h.length;for(h.sort(g);p--;)h[p]=h[p].value;return h}(s,(function(o,f){return function Kc(n,t,e){for(var r=-1,s=n.criteria,o=t.criteria,f=s.length,c=e.length;++r<f;){var l=pu(s[r],o[r]);if(l)return r>=c?l:l*("desc"==e[r]?-1:1)}return n.index-t.index}(o,f,e)}))}function eu(n,t,e){for(var r=-1,s=t.length,o={};++r<s;){var f=t[r],c=_t(n,f);e(c,f)&&fe(o,st(f,n),c)}return o}function ti(n,t,e,r){var s=r?rf:Tt,o=-1,f=t.length,c=n;for(n===t&&(t=un(t)),e&&(c=G(n,hn(e)));++o<f;)for(var l=0,v=t[o],_=e?e(v):v;(l=s(c,_,l,r))>-1;)c!==n&&Ne.call(c,l,1),Ne.call(n,l,1);return n}function ru(n,t){for(var e=n?t.length:0,r=e-1;e--;){var s=t[e];if(e==r||s!==o){var o=s;Zn(s)?Ne.call(n,s,1):si(n,s)}}return n}function ei(n,t){return n+We(Us()*(t-n+1))}function ri(n,t){var e="";if(!n||t<1||t>kn)return e;do{t%2&&(e+=n),(t=We(t/2))&&(n+=n)}while(t);return e}function L(n,t){return Pi(Du(n,t,fn),n+"")}function $c(n){return Ms(Gt(n))}function Uc(n,t){var e=Gt(n);return tr(e,vt(t,0,e.length))}function fe(n,t,e,r){if(!K(n))return n;for(var s=-1,o=(t=st(t,n)).length,f=o-1,c=n;null!=c&&++s<o;){var l=Wn(t[s]),v=e;if("__proto__"===l||"constructor"===l||"prototype"===l)return n;if(s!=f){var _=c[l];(v=r?r(_,l,c):i)===i&&(v=K(_)?_:Zn(t[s+1])?[]:{})}se(c,l,v),c=c[l]}return n}var iu=Fe?function(n,t){return Fe.set(n,t),n}:fn,Wc=$e?function(n,t){return $e(n,"toString",{configurable:!0,enumerable:!1,value:bi(t),writable:!0})}:fn;function Fc(n){return tr(Gt(n))}function Cn(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),(e=e>s?s:e)<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var o=p(s);++r<s;)o[r]=n[r+t];return o}function Mc(n,t){var e;return rt(n,(function(r,s,o){return!(e=t(r,s,o))})),!!e}function Ye(n,t,e){var r=0,s=null==n?r:n.length;if("number"==typeof t&&t==t&&s<=2147483647){for(;r<s;){var o=r+s>>>1,f=n[o];null!==f&&!pn(f)&&(e?f<=t:f<t)?r=o+1:s=o}return s}return ii(n,t,fn,e)}function ii(n,t,e,r){var s=0,o=null==n?0:n.length;if(0===o)return 0;for(var f=(t=e(t))!=t,c=null===t,l=pn(t),v=t===i;s<o;){var _=We((s+o)/2),m=e(n[_]),w=m!==i,I=null===m,E=m==m,T=pn(m);if(f)var y=r||E;else y=v?E&&(r||w):c?E&&w&&(r||!I):l?E&&w&&!I&&(r||!T):!I&&!T&&(r?m<=t:m<t);y?s=_+1:o=_}return nn(o,4294967294)}function su(n,t){for(var e=-1,r=n.length,s=0,o=[];++e<r;){var f=n[e],c=t?t(f):f;if(!e||!bn(c,l)){var l=c;o[s++]=0===f?0:f}}return o}function uu(n){return"number"==typeof n?n:pn(n)?NaN:+n}function ln(n){if("string"==typeof n)return n;if(R(n))return G(n,ln)+"";if(pn(n))return Ws?Ws.call(n):"";var t=n+"";return"0"==t&&1/n==-ht?"-0":t}function it(n,t,e){var r=-1,s=Ee,o=n.length,f=!0,c=[],l=c;if(e)f=!1,s=Dr;else if(o>=200){var v=t?null:Vc(n);if(v)return Se(v);f=!1,s=jt,l=new gt}else l=t?[]:c;n:for(;++r<o;){var _=n[r],m=t?t(_):_;if(_=e||0!==_?_:0,f&&m==m){for(var w=l.length;w--;)if(l[w]===m)continue n;t&&l.push(m),c.push(_)}else s(l,m,e)||(l!==c&&l.push(m),c.push(_))}return c}function si(n,t){return null==(n=Hu(n,t=st(t,n)))||delete n[Wn(In(t))]}function au(n,t,e,r){return fe(n,t,e(_t(n,t)),r)}function Ze(n,t,e,r){for(var s=n.length,o=r?s:-1;(r?o--:++o<s)&&t(n[o],o,n););return e?Cn(n,r?0:o,r?o+1:s):Cn(n,r?o+1:0,r?s:o)}function ou(n,t){var e=n;return e instanceof H&&(e=e.value()),Hr(t,(function(r,s){return s.func.apply(s.thisArg,nt([r],s.args))}),e)}function ui(n,t,e){var r=n.length;if(r<2)return r?it(n[0]):[];for(var s=-1,o=p(r);++s<r;)for(var f=n[s],c=-1;++c<r;)c!=s&&(o[s]=ue(o[s]||f,n[c],t,e));return it(j(o,1),t,e)}function fu(n,t,e){for(var r=-1,s=n.length,o=t.length,f={};++r<s;){var c=r<o?t[r]:i;e(f,n[r],c)}return f}function ai(n){return Z(n)?n:[]}function oi(n){return"function"==typeof n?n:fn}function st(n,t){return R(n)?n:_i(n,t)?[n]:Wu(W(n))}var qc=L;function ut(n,t,e){var r=n.length;return e=e===i?r:e,!t&&e>=r?n:Cn(n,t,e)}var cu=Of||function(n){return k.clearTimeout(n)};function hu(n,t){if(t)return n.slice();var e=n.length,r=Ls?Ls(e):new n.constructor(e);return n.copy(r),r}function fi(n){var t=new n.constructor(n.byteLength);return new De(t).set(new De(n)),t}function lu(n,t){var e=t?fi(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function pu(n,t){if(n!==t){var e=n!==i,r=null===n,s=n==n,o=pn(n),f=t!==i,c=null===t,l=t==t,v=pn(t);if(!c&&!v&&!o&&n>t||o&&f&&l&&!c&&!v||r&&f&&l||!e&&l||!s)return 1;if(!r&&!o&&!v&&n<t||v&&e&&s&&!r&&!o||c&&e&&s||!f&&s||!l)return-1}return 0}function du(n,t,e,r){for(var s=-1,o=n.length,f=e.length,c=-1,l=t.length,v=Q(o-f,0),_=p(l+v),m=!r;++c<l;)_[c]=t[c];for(;++s<f;)(m||s<o)&&(_[e[s]]=n[s]);for(;v--;)_[c++]=n[s++];return _}function gu(n,t,e,r){for(var s=-1,o=n.length,f=-1,c=e.length,l=-1,v=t.length,_=Q(o-c,0),m=p(_+v),w=!r;++s<_;)m[s]=n[s];for(var I=s;++l<v;)m[I+l]=t[l];for(;++f<c;)(w||s<o)&&(m[I+e[f]]=n[s++]);return m}function un(n,t){var e=-1,r=n.length;for(t||(t=p(r));++e<r;)t[e]=n[e];return t}function Un(n,t,e,r){var s=!e;e||(e={});for(var o=-1,f=t.length;++o<f;){var c=t[o],l=r?r(e[c],n[c],c,e,n):i;l===i&&(l=n[c]),s?zn(e,c,l):se(e,c,l)}return e}function Je(n,t){return function(e,r){var s=R(e)?Vo:gc,o=t?t():{};return s(e,n,x(r,2),o)}}function Ft(n){return L((function(t,e){var r=-1,s=e.length,o=s>1?e[s-1]:i,f=s>2?e[2]:i;for(o=n.length>3&&"function"==typeof o?(s--,o):i,f&&rn(e[0],e[1],f)&&(o=s<3?i:o,s=1),t=M(t);++r<s;){var c=e[r];c&&n(t,c,r,o)}return t}))}function vu(n,t){return function(e,r){if(null==e)return e;if(!an(e))return n(e,r);for(var s=e.length,o=t?s:-1,f=M(e);(t?o--:++o<s)&&!1!==r(f[o],o,f););return e}}function _u(n){return function(t,e,r){for(var s=-1,o=M(t),f=r(t),c=f.length;c--;){var l=f[n?c:++s];if(!1===e(o[l],l,o))break}return t}}function mu(n){return function(t){var e=Lt(t=W(t))?On(t):i,r=e?e[0]:t.charAt(0),s=e?ut(e,1).join(""):t.slice(1);return r[n]()+s}}function Mt(n){return function(t){return Hr(va(ga(t).replace(Uo,"")),n,"")}}function ce(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Wt(n.prototype),r=n.apply(e,t);return K(r)?r:e}}function wu(n){return function(t,e,r){var s=M(t);if(!an(t)){var o=x(e,3);t=V(t),e=function(c){return o(s[c],c,s)}}var f=n(t,e,r);return f>-1?s[o?t[f]:f]:i}}function Pu(n){return Yn((function(t){var e=t.length,r=e,s=Pn.prototype.thru;for(n&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new wn($);if(s&&!f&&"wrapper"==je(o))var f=new Pn([],!0)}for(r=f?r:e;++r<e;){var c=je(o=t[r]),l="wrapper"==c?di(o):i;f=l&&mi(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?f[je(l[0])].apply(f,l[3]):1==o.length&&mi(o)?f[c]():f.thru(o)}return function(){var v=arguments,_=v[0];if(f&&1==v.length&&R(_))return f.plant(_).value();for(var m=0,w=e?t[m].apply(this,v):_;++m<e;)w=t[m].call(this,w);return w}}))}function Xe(n,t,e,r,s,o,f,c,l,v){var _=t&Mn,m=1&t,w=2&t,I=24&t,E=512&t,T=w?i:ce(n);return function y(){for(var D=arguments.length,N=p(D),dn=D;dn--;)N[dn]=arguments[dn];if(I)var sn=qt(y),gn=function af(h,g){for(var p=h.length,A=0;p--;)h[p]===g&&++A;return A}(N,sn);if(r&&(N=du(N,r,s,I)),o&&(N=gu(N,o,f,I)),D-=gn,I&&D<v){var J=tt(N,sn);return Iu(n,t,Xe,y.placeholder,e,N,J,c,l,v-D)}var Tn=m?e:this,Qn=w?Tn[n]:n;return D=N.length,c?N=function gh(n,t){for(var e=n.length,r=nn(t.length,e),s=un(n);r--;){var o=t[r];n[r]=Zn(o,e)?s[o]:i}return n}(N,c):E&&D>1&&N.reverse(),_&&l<D&&(N.length=l),this&&this!==k&&this instanceof y&&(Qn=T||ce(Qn)),Qn.apply(Tn,N)}}function Au(n,t){return function(e,r){return function Ic(n,t,e,r){return $n(n,(function(s,o,f){t(r,e(s),o,f)})),r}(e,n,t(r),{})}}function Qe(n,t){return function(e,r){var s;if(e===i&&r===i)return t;if(e!==i&&(s=e),r!==i){if(s===i)return r;"string"==typeof e||"string"==typeof r?(e=ln(e),r=ln(r)):(e=uu(e),r=uu(r)),s=n(e,r)}return s}}function ci(n){return Yn((function(t){return t=G(t,hn(x())),L((function(e){var r=this;return n(t,(function(s){return cn(s,r,e)}))}))}))}function Ve(n,t){var e=(t=t===i?" ":ln(t)).length;if(e<2)return e?ri(t,n):t;var r=ri(t,Ue(n/Dt(t)));return Lt(t)?ut(On(r),0,n).join(""):r.slice(0,n)}function Cu(n){return function(t,e,r){return r&&"number"!=typeof r&&rn(t,e,r)&&(e=r=i),t=Xn(t),e===i?(e=t,t=0):e=Xn(e),function Nc(n,t,e,r){for(var s=-1,o=Q(Ue((t-n)/(e||1)),0),f=p(o);o--;)f[r?o:++s]=n,n+=e;return f}(t,e,r=r===i?t<e?1:-1:Xn(r),n)}}function ke(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=xn(t),e=xn(e)),n(t,e)}}function Iu(n,t,e,r,s,o,f,c,l,v){var _=8&t;t|=_?32:64,4&(t&=~(_?64:32))||(t&=-4);var T=[n,t,s,_?o:i,_?f:i,_?i:o,_?i:f,c,l,v],y=e.apply(i,T);return mi(n)&&Nu(y,T),y.placeholder=r,$u(y,n,t)}function hi(n){var t=X[n];return function(e,r){if(e=xn(e),(r=null==r?0:nn(b(r),292))&&$s(e)){var s=(W(e)+"e").split("e");return+((s=(W(t(s[0]+"e"+(+s[1]+r)))+"e").split("e"))[0]+"e"+(+s[1]-r))}return t(e)}}var Vc=$t&&1/Se(new $t([,-0]))[1]==ht?function(n){return new $t(n)}:Di;function xu(n){return function(t){var e=tn(t);return e==yn?qr(t):e==Sn?function df(h){var g=-1,p=Array(h.size);return h.forEach((function(A){p[++g]=[A,A]})),p}(t):function uf(h,g){return G(g,(function(p){return[p,h[p]]}))}(t,n(t))}}function Kn(n,t,e,r,s,o,f,c){var l=2&t;if(!l&&"function"!=typeof n)throw new wn($);var v=r?r.length:0;if(v||(t&=-97,r=s=i),f=f===i?f:Q(b(f),0),c=c===i?c:b(c),v-=s?s.length:0,64&t){var _=r,m=s;r=s=i}var w=l?i:di(n),I=[n,t,e,r,s,_,m,o,f,c];if(w&&function lh(n,t){var e=n[1],r=t[1],s=e|r,o=s<131,f=r==Mn&&8==e||r==Mn&&256==e&&n[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==e;if(!o&&!f)return n;1&r&&(n[2]=t[2],s|=1&e?0:4);var c=t[3];if(c){var l=n[3];n[3]=l?du(l,c,t[4]):c,n[4]=l?tt(n[3],It):t[4]}return c=t[5],c&&(l=n[5],n[5]=l?gu(l,c,t[6]):c,n[6]=l?tt(n[5],It):t[6]),c=t[7],c&&(n[7]=c),r&Mn&&(n[8]=null==n[8]?t[8]:nn(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=s,n}(I,w),n=I[0],t=I[1],e=I[2],r=I[3],s=I[4],!(c=I[9]=I[9]===i?l?0:n.length:Q(I[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||16==t?function Xc(n,t,e){var r=ce(n);return function s(){for(var o=arguments.length,f=p(o),c=o,l=qt(s);c--;)f[c]=arguments[c];var v=o<3&&f[0]!==l&&f[o-1]!==l?[]:tt(f,l);return(o-=v.length)<e?Iu(n,t,Xe,s.placeholder,i,f,v,i,i,e-o):cn(this&&this!==k&&this instanceof s?r:n,this,f)}}(n,t,c):32!=t&&33!=t||s.length?Xe.apply(i,I):function Qc(n,t,e,r){var s=1&t,o=ce(n);return function f(){for(var c=-1,l=arguments.length,v=-1,_=r.length,m=p(_+l),w=this&&this!==k&&this instanceof f?o:n;++v<_;)m[v]=r[v];for(;l--;)m[v++]=arguments[++c];return cn(w,s?e:this,m)}}(n,t,e,r);else var E=function Jc(n,t,e){var r=1&t,s=ce(n);return function o(){return(this&&this!==k&&this instanceof o?s:n).apply(r?e:this,arguments)}}(n,t,e);return $u((w?iu:Nu)(E,I),n,t)}function Eu(n,t,e,r){return n===i||bn(n,Nt[e])&&!F.call(r,e)?t:n}function yu(n,t,e,r,s,o){return K(n)&&K(t)&&(o.set(t,n),Ke(n,t,i,yu,o),o.delete(t)),n}function kc(n){return pe(n)?i:n}function Su(n,t,e,r,s,o){var f=1&e,c=n.length,l=t.length;if(c!=l&&!(f&&l>c))return!1;var v=o.get(n),_=o.get(t);if(v&&_)return v==t&&_==n;var m=-1,w=!0,I=2&e?new gt:i;for(o.set(n,t),o.set(t,n);++m<c;){var E=n[m],T=t[m];if(r)var y=f?r(T,E,m,t,n,o):r(E,T,m,n,t,o);if(y!==i){if(y)continue;w=!1;break}if(I){if(!Nr(t,(function(D,N){if(!jt(I,N)&&(E===D||s(E,D,e,r,o)))return I.push(N)}))){w=!1;break}}else if(E!==T&&!s(E,T,e,r,o)){w=!1;break}}return o.delete(n),o.delete(t),w}function Yn(n){return Pi(Du(n,i,Bu),n+"")}function li(n){return Zs(n,V,vi)}function pi(n){return Zs(n,on,Ou)}var di=Fe?function(n){return Fe.get(n)}:Di;function je(n){for(var t=n.name+"",e=Ut[t],r=F.call(Ut,t)?e.length:0;r--;){var s=e[r],o=s.func;if(null==o||o==n)return s.name}return t}function qt(n){return(F.call(a,"placeholder")?a:n).placeholder}function x(){var n=a.iteratee||Ti;return n=n===Ti?Qs:n,arguments.length?n(arguments[0],arguments[1]):n}function nr(n,t){var e=n.__data__;return function oh(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}(t)?e["string"==typeof t?"string":"hash"]:e.map}function gi(n){for(var t=V(n),e=t.length;e--;){var r=t[e],s=n[r];t[e]=[r,s,Tu(s)]}return t}function mt(n,t){var e=function hf(h,g){return null==h?i:h[g]}(n,t);return Xs(e)?e:i}var vi=Gr?function(n){return null==n?[]:(n=M(n),jn(Gr(n),(function(t){return Hs.call(n,t)})))}:Hi,Ou=Gr?function(n){for(var t=[];n;)nt(t,vi(n)),n=He(n);return t}:Hi,tn=en;function Ru(n,t,e){for(var r=-1,s=(t=st(t,n)).length,o=!1;++r<s;){var f=Wn(t[r]);if(!(o=null!=n&&e(n,f)))break;n=n[f]}return o||++r!=s?o:!!(s=null==n?0:n.length)&&ar(s)&&Zn(f,s)&&(R(n)||Pt(n))}function bu(n){return"function"!=typeof n.constructor||he(n)?{}:Wt(He(n))}function ah(n){return R(n)||Pt(n)||!!(Ns&&n&&n[Ns])}function Zn(n,t){var e=typeof n;return!!(t=t??kn)&&("number"==e||"symbol"!=e&&mo.test(n))&&n>-1&&n%1==0&&n<t}function rn(n,t,e){if(!K(e))return!1;var r=typeof t;return!!("number"==r?an(e)&&Zn(t,e.length):"string"==r&&t in e)&&bn(e[t],n)}function _i(n,t){if(R(n))return!1;var e=typeof n;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=n&&!pn(n))||(eo.test(n)||!to.test(n)||null!=t&&n in M(t))}function mi(n){var t=je(n),e=a[t];if("function"!=typeof e||!(t in H.prototype))return!1;if(n===e)return!0;var r=di(e);return!!r&&n===r[0]}(zr&&tn(new zr(new ArrayBuffer(1)))!=Rt||te&&tn(new te)!=yn||Kr&&tn(Kr.resolve())!=zi||$t&&tn(new $t)!=Sn||ee&&tn(new ee)!=Vt)&&(tn=function(n){var t=en(n),e=t==qn?n.constructor:i,r=e?wt(e):"";if(r)switch(r){case Uf:return Rt;case Wf:return yn;case Ff:return zi;case Mf:return Sn;case qf:return Vt}return t});var ch=Re?Jn:Ni;function he(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||Nt)}function Tu(n){return n==n&&!K(n)}function Lu(n,t){return function(e){return null!=e&&(e[n]===t&&(t!==i||n in M(e)))}}function Du(n,t,e){return t=Q(t===i?n.length-1:t,0),function(){for(var r=arguments,s=-1,o=Q(r.length-t,0),f=p(o);++s<o;)f[s]=r[t+s];s=-1;for(var c=p(t+1);++s<t;)c[s]=r[s];return c[t]=e(f),cn(n,this,c)}}function Hu(n,t){return t.length<2?n:_t(n,Cn(t,0,-1))}function wi(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var Nu=Uu(iu),le=bf||function(n,t){return k.setTimeout(n,t)},Pi=Uu(Wc);function $u(n,t,e){var r=t+"";return Pi(n,function uh(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(uo,"{\n/* [wrapped with "+t+"] */\n")}(r,function vh(n,t){return mn(qa,(function(e){var r="_."+e[0];t&e[1]&&!Ee(n,r)&&n.push(r)})),n.sort()}(function rh(n){var t=n.match(ao);return t?t[1].split(oo):[]}(r),e)))}function Uu(n){var t=0,e=0;return function(){var r=Hf(),s=16-(r-e);if(e=r,s>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(i,arguments)}}function tr(n,t){var e=-1,r=n.length,s=r-1;for(t=t===i?r:t;++e<t;){var o=ei(e,s),f=n[o];n[o]=n[e],n[e]=f}return n.length=t,n}var Wu=function hh(n){var t=sr(n,(function(r){return 500===e.size&&e.clear(),r})),e=t.cache;return t}((function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(ro,(function(e,r,s,o){t.push(s?o.replace(ho,"$1"):r||e)})),t}));function Wn(n){if("string"==typeof n||pn(n))return n;var t=n+"";return"0"==t&&1/n==-ht?"-0":t}function wt(n){if(null!=n){try{return be.call(n)}catch{}try{return n+""}catch{}}return""}function Fu(n){if(n instanceof H)return n.clone();var t=new Pn(n.__wrapped__,n.__chain__);return t.__actions__=un(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var Ph=L((function(n,t){return Z(n)?ue(n,j(t,1,Z,!0)):[]})),Ah=L((function(n,t){var e=In(t);return Z(e)&&(e=i),Z(n)?ue(n,j(t,1,Z,!0),x(e,2)):[]})),Ch=L((function(n,t){var e=In(t);return Z(e)&&(e=i),Z(n)?ue(n,j(t,1,Z,!0),i,e):[]}));function Mu(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=null==e?0:b(e);return s<0&&(s=Q(r+s,0)),ye(n,x(t,3),s)}function qu(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=r-1;return e!==i&&(s=b(e),s=e<0?Q(r+s,0):nn(s,r-1)),ye(n,x(t,3),s,!0)}function Bu(n){return(null==n?0:n.length)?j(n,1):[]}function Gu(n){return n&&n.length?n[0]:i}var Dh=L((function(n){var t=G(n,ai);return t.length&&t[0]===n[0]?Vr(t):[]})),Hh=L((function(n){var t=In(n),e=G(n,ai);return t===In(e)?t=i:e.pop(),e.length&&e[0]===n[0]?Vr(e,x(t,2)):[]})),Nh=L((function(n){var t=In(n),e=G(n,ai);return(t="function"==typeof t?t:i)&&e.pop(),e.length&&e[0]===n[0]?Vr(e,i,t):[]}));function In(n){var t=null==n?0:n.length;return t?n[t-1]:i}var Fh=L(zu);function zu(n,t){return n&&n.length&&t&&t.length?ti(n,t):n}var Bh=Yn((function(n,t){var e=null==n?0:n.length,r=Zr(n,t);return ru(n,G(t,(function(s){return Zn(s,e)?+s:s})).sort(pu)),r}));function Ai(n){return null==n?n:$f.call(n)}var il=L((function(n){return it(j(n,1,Z,!0))})),sl=L((function(n){var t=In(n);return Z(t)&&(t=i),it(j(n,1,Z,!0),x(t,2))})),ul=L((function(n){var t=In(n);return t="function"==typeof t?t:i,it(j(n,1,Z,!0),i,t)}));function Ci(n){if(!n||!n.length)return[];var t=0;return n=jn(n,(function(e){if(Z(e))return t=Q(e.length,t),!0})),Fr(t,(function(e){return G(n,$r(e))}))}function Ku(n,t){if(!n||!n.length)return[];var e=Ci(n);return null==t?e:G(e,(function(r){return cn(t,i,r)}))}var cl=L((function(n,t){return Z(n)?ue(n,t):[]})),hl=L((function(n){return ui(jn(n,Z))})),ll=L((function(n){var t=In(n);return Z(t)&&(t=i),ui(jn(n,Z),x(t,2))})),pl=L((function(n){var t=In(n);return t="function"==typeof t?t:i,ui(jn(n,Z),i,t)})),dl=L(Ci);var _l=L((function(n){var t=n.length,e=t>1?n[t-1]:i;return e="function"==typeof e?(n.pop(),e):i,Ku(n,e)}));function Yu(n){var t=a(n);return t.__chain__=!0,t}function er(n,t){return t(n)}var wl=Yn((function(n){var t=n.length,e=t?n[0]:0,r=this.__wrapped__,s=function(o){return Zr(o,n)};return!(t>1||this.__actions__.length)&&r instanceof H&&Zn(e)?((r=r.slice(e,+e+(t?1:0))).__actions__.push({func:er,args:[s],thisArg:i}),new Pn(r,this.__chain__).thru((function(o){return t&&!o.length&&o.push(i),o}))):this.thru(s)}));var Sl=Je((function(n,t,e){F.call(n,e)?++n[e]:zn(n,e,1)}));var bl=wu(Mu),Tl=wu(qu);function Zu(n,t){return(R(n)?mn:rt)(n,x(t,3))}function Ju(n,t){return(R(n)?ko:zs)(n,x(t,3))}var Nl=Je((function(n,t,e){F.call(n,e)?n[e].push(t):zn(n,e,[t])}));var Ul=L((function(n,t,e){var r=-1,s="function"==typeof t,o=an(n)?p(n.length):[];return rt(n,(function(f){o[++r]=s?cn(t,f,e):ae(f,t,e)})),o})),Wl=Je((function(n,t,e){zn(n,e,t)}));function rr(n,t){return(R(n)?G:Vs)(n,x(t,3))}var Ml=Je((function(n,t,e){n[e?0:1].push(t)}),(function(){return[[],[]]}));var Xl=L((function(n,t){if(null==n)return[];var e=t.length;return e>1&&rn(n,t[0],t[1])?t=[]:e>2&&rn(t[0],t[1],t[2])&&(t=[t[0]]),tu(n,j(t,1),[])})),ir=Rf||function(){return k.Date.now()};function Xu(n,t,e){return t=e?i:t,t=n&&null==t?n.length:t,Kn(n,Mn,i,i,i,i,t)}function Qu(n,t){var e;if("function"!=typeof t)throw new wn($);return n=b(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Ii=L((function(n,t,e){var r=1;if(e.length){var s=tt(e,qt(Ii));r|=32}return Kn(n,r,t,e,s)})),Vu=L((function(n,t,e){var r=3;if(e.length){var s=tt(e,qt(Vu));r|=32}return Kn(t,r,n,e,s)}));function na(n,t,e){var r,s,o,f,c,l,v=0,_=!1,m=!1,w=!0;if("function"!=typeof n)throw new wn($);function I(J){var Tn=r,Qn=s;return r=s=i,v=J,f=n.apply(Qn,Tn)}function y(J){var Tn=J-l;return l===i||Tn>=t||Tn<0||m&&J-v>=o}function D(){var J=ir();if(y(J))return N(J);c=le(D,function T(J){var wa=t-(J-l);return m?nn(wa,o-(J-v)):wa}(J))}function N(J){return c=i,w&&r?I(J):(r=s=i,f)}function gn(){var J=ir(),Tn=y(J);if(r=arguments,s=this,l=J,Tn){if(c===i)return function E(J){return v=J,c=le(D,t),_?I(J):f}(l);if(m)return cu(c),c=le(D,t),I(l)}return c===i&&(c=le(D,t)),f}return t=xn(t)||0,K(e)&&(_=!!e.leading,o=(m="maxWait"in e)?Q(xn(e.maxWait)||0,t):o,w="trailing"in e?!!e.trailing:w),gn.cancel=function dn(){c!==i&&cu(c),v=0,r=l=s=c=i},gn.flush=function sn(){return c===i?f:N(ir())},gn}var Vl=L((function(n,t){return Gs(n,1,t)})),kl=L((function(n,t,e){return Gs(n,xn(t)||0,e)}));function sr(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new wn($);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=e.cache;if(o.has(s))return o.get(s);var f=n.apply(this,r);return e.cache=o.set(s,f)||o,f};return e.cache=new(sr.Cache||Gn),e}function ur(n){if("function"!=typeof n)throw new wn($);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}sr.Cache=Gn;var tp=qc((function(n,t){var e=(t=1==t.length&&R(t[0])?G(t[0],hn(x())):G(j(t,1),hn(x()))).length;return L((function(r){for(var s=-1,o=nn(r.length,e);++s<o;)r[s]=t[s].call(this,r[s]);return cn(n,this,r)}))})),xi=L((function(n,t){var e=tt(t,qt(xi));return Kn(n,32,i,t,e)})),ta=L((function(n,t){var e=tt(t,qt(ta));return Kn(n,64,i,t,e)})),ep=Yn((function(n,t){return Kn(n,256,i,i,i,t)}));function bn(n,t){return n===t||n!=n&&t!=t}var dp=ke(Qr),gp=ke((function(n,t){return n>=t})),Pt=Js(function(){return arguments}())?Js:function(n){return Y(n)&&F.call(n,"callee")&&!Hs.call(n,"callee")},R=p.isArray,vp=gs?hn(gs):function xc(n){return Y(n)&&en(n)==kt};function an(n){return null!=n&&ar(n.length)&&!Jn(n)}function Z(n){return Y(n)&&an(n)}var at=Tf||Ni,mp=vs?hn(vs):function Ec(n){return Y(n)&&en(n)==Zt};function Ei(n){if(!Y(n))return!1;var t=en(n);return t==we||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!pe(n)}function Jn(n){if(!K(n))return!1;var t=en(n);return t==Pe||t==Gi||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ea(n){return"number"==typeof n&&n==b(n)}function ar(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=kn}function K(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function Y(n){return null!=n&&"object"==typeof n}var ra=_s?hn(_s):function Sc(n){return Y(n)&&tn(n)==yn};function ia(n){return"number"==typeof n||Y(n)&&en(n)==Jt}function pe(n){if(!Y(n)||en(n)!=qn)return!1;var t=He(n);if(null===t)return!0;var e=F.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&be.call(e)==Ef}var yi=ms?hn(ms):function Oc(n){return Y(n)&&en(n)==Xt};var sa=ws?hn(ws):function Rc(n){return Y(n)&&tn(n)==Sn};function or(n){return"string"==typeof n||!R(n)&&Y(n)&&en(n)==Qt}function pn(n){return"symbol"==typeof n||Y(n)&&en(n)==Ae}var Bt=Ps?hn(Ps):function bc(n){return Y(n)&&ar(n.length)&&!!B[en(n)]};var Hp=ke(ni),Np=ke((function(n,t){return n<=t}));function ua(n){if(!n)return[];if(an(n))return or(n)?On(n):un(n);if(ne&&n[ne])return function pf(h){for(var g,p=[];!(g=h.next()).done;)p.push(g.value);return p}(n[ne]());var t=tn(n);return(t==yn?qr:t==Sn?Se:Gt)(n)}function Xn(n){return n?(n=xn(n))===ht||n===-ht?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function b(n){var t=Xn(n),e=t%1;return t==t?e?t-e:t:0}function aa(n){return n?vt(b(n),0,Nn):0}function xn(n){if("number"==typeof n)return n;if(pn(n))return NaN;if(K(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=K(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=ys(n);var e=go.test(n);return e||_o.test(n)?Xo(n.slice(2),e?2:8):po.test(n)?NaN:+n}function oa(n){return Un(n,on(n))}function W(n){return null==n?"":ln(n)}var Up=Ft((function(n,t){if(he(t)||an(t))Un(t,V(t),n);else for(var e in t)F.call(t,e)&&se(n,e,t[e])})),fa=Ft((function(n,t){Un(t,on(t),n)})),fr=Ft((function(n,t,e,r){Un(t,on(t),n,r)})),Wp=Ft((function(n,t,e,r){Un(t,V(t),n,r)})),Fp=Yn(Zr);var qp=L((function(n,t){n=M(n);var e=-1,r=t.length,s=r>2?t[2]:i;for(s&&rn(t[0],t[1],s)&&(r=1);++e<r;)for(var o=t[e],f=on(o),c=-1,l=f.length;++c<l;){var v=f[c],_=n[v];(_===i||bn(_,Nt[v])&&!F.call(n,v))&&(n[v]=o[v])}return n})),Bp=L((function(n){return n.push(i,yu),cn(ca,i,n)}));function Si(n,t,e){var r=null==n?i:_t(n,t);return r===i?e:r}function Oi(n,t){return null!=n&&Ru(n,t,Ac)}var kp=Au((function(n,t,e){null!=t&&"function"!=typeof t.toString&&(t=Te.call(t)),n[t]=e}),bi(fn)),jp=Au((function(n,t,e){null!=t&&"function"!=typeof t.toString&&(t=Te.call(t)),F.call(n,t)?n[t].push(e):n[t]=[e]}),x),nd=L(ae);function V(n){return an(n)?Fs(n):jr(n)}function on(n){return an(n)?Fs(n,!0):Tc(n)}var rd=Ft((function(n,t,e){Ke(n,t,e)})),ca=Ft((function(n,t,e,r){Ke(n,t,e,r)})),id=Yn((function(n,t){var e={};if(null==n)return e;var r=!1;t=G(t,(function(o){return o=st(o,n),r||(r=o.length>1),o})),Un(n,pi(n),e),r&&(e=An(e,7,kc));for(var s=t.length;s--;)si(e,t[s]);return e}));var ud=Yn((function(n,t){return null==n?{}:function Dc(n,t){return eu(n,t,(function(e,r){return Oi(n,r)}))}(n,t)}));function ha(n,t){if(null==n)return{};var e=G(pi(n),(function(r){return[r]}));return t=x(t),eu(n,e,(function(r,s){return t(r,s[0])}))}var la=xu(V),pa=xu(on);function Gt(n){return null==n?[]:Mr(n,V(n))}var md=Mt((function(n,t,e){return t=t.toLowerCase(),n+(e?da(t):t)}));function da(n){return Ri(W(n).toLowerCase())}function ga(n){return(n=W(n))&&n.replace(wo,of).replace(Wo,"")}var Cd=Mt((function(n,t,e){return n+(e?"-":"")+t.toLowerCase()})),Id=Mt((function(n,t,e){return n+(e?" ":"")+t.toLowerCase()})),xd=mu("toLowerCase");var Td=Mt((function(n,t,e){return n+(e?"_":"")+t.toLowerCase()}));var Dd=Mt((function(n,t,e){return n+(e?" ":"")+Ri(t)}));var Gd=Mt((function(n,t,e){return n+(e?" ":"")+t.toUpperCase()})),Ri=mu("toUpperCase");function va(n,t,e){return n=W(n),(t=e?i:t)===i?function lf(h){return qo.test(h)}(n)?function Pf(h){return h.match(Fo)||[]}(n):function ef(h){return h.match(fo)||[]}(n):n.match(t)||[]}var _a=L((function(n,t){try{return cn(n,i,t)}catch(e){return Ei(e)?e:new S(e)}})),zd=Yn((function(n,t){return mn(t,(function(e){e=Wn(e),zn(n,e,Ii(n[e],n))})),n}));function bi(n){return function(){return n}}var Jd=Pu(),Xd=Pu(!0);function fn(n){return n}function Ti(n){return Qs("function"==typeof n?n:An(n,1))}var kd=L((function(n,t){return function(e){return ae(e,n,t)}})),jd=L((function(n,t){return function(e){return ae(n,e,t)}}));function Li(n,t,e){var r=V(t),s=ze(t,r);null==e&&(!K(t)||!s.length&&r.length)&&(e=t,t=n,n=this,s=ze(t,V(t)));var o=!(K(e)&&"chain"in e&&!e.chain),f=Jn(n);return mn(s,(function(c){var l=t[c];n[c]=l,f&&(n.prototype[c]=function(){var v=this.__chain__;if(o||v){var _=n(this.__wrapped__);return(_.__actions__=un(this.__actions__)).push({func:l,args:arguments,thisArg:n}),_.__chain__=v,_}return l.apply(n,nt([this.value()],arguments))})})),n}function Di(){}var eg=ci(G),rg=ci(As),ig=ci(Nr);function ma(n){return _i(n)?$r(Wn(n)):function Hc(n){return function(t){return _t(t,n)}}(n)}var ug=Cu(),ag=Cu(!0);function Hi(){return[]}function Ni(){return!1}var dg=Qe((function(n,t){return n+t}),0),gg=hi("ceil"),vg=Qe((function(n,t){return n/t}),1),_g=hi("floor");var xg=Qe((function(n,t){return n*t}),1),Eg=hi("round"),yg=Qe((function(n,t){return n-t}),0);return a.after=function Ql(n,t){if("function"!=typeof t)throw new wn($);return n=b(n),function(){if(--n<1)return t.apply(this,arguments)}},a.ary=Xu,a.assign=Up,a.assignIn=fa,a.assignInWith=fr,a.assignWith=Wp,a.at=Fp,a.before=Qu,a.bind=Ii,a.bindAll=zd,a.bindKey=Vu,a.castArray=function op(){if(!arguments.length)return[];var n=arguments[0];return R(n)?n:[n]},a.chain=Yu,a.chunk=function _h(n,t,e){t=(e?rn(n,t,e):t===i)?1:Q(b(t),0);var r=null==n?0:n.length;if(!r||t<1)return[];for(var s=0,o=0,f=p(Ue(r/t));s<r;)f[o++]=Cn(n,s,s+=t);return f},a.compact=function mh(n){for(var t=-1,e=null==n?0:n.length,r=0,s=[];++t<e;){var o=n[t];o&&(s[r++]=o)}return s},a.concat=function wh(){var n=arguments.length;if(!n)return[];for(var t=p(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return nt(R(e)?un(e):[e],j(t,1))},a.cond=function Kd(n){var t=null==n?0:n.length,e=x();return n=t?G(n,(function(r){if("function"!=typeof r[1])throw new wn($);return[e(r[0]),r[1]]})):[],L((function(r){for(var s=-1;++s<t;){var o=n[s];if(cn(o[0],this,r))return cn(o[1],this,r)}}))},a.conforms=function Yd(n){return function _c(n){var t=V(n);return function(e){return Bs(e,n,t)}}(An(n,1))},a.constant=bi,a.countBy=Sl,a.create=function Mp(n,t){var e=Wt(n);return null==t?e:qs(e,t)},a.curry=function ku(n,t,e){var r=Kn(n,8,i,i,i,i,i,t=e?i:t);return r.placeholder=ku.placeholder,r},a.curryRight=function ju(n,t,e){var r=Kn(n,16,i,i,i,i,i,t=e?i:t);return r.placeholder=ju.placeholder,r},a.debounce=na,a.defaults=qp,a.defaultsDeep=Bp,a.defer=Vl,a.delay=kl,a.difference=Ph,a.differenceBy=Ah,a.differenceWith=Ch,a.drop=function Ih(n,t,e){var r=null==n?0:n.length;return r?Cn(n,(t=e||t===i?1:b(t))<0?0:t,r):[]},a.dropRight=function xh(n,t,e){var r=null==n?0:n.length;return r?Cn(n,0,(t=r-(t=e||t===i?1:b(t)))<0?0:t):[]},a.dropRightWhile=function Eh(n,t){return n&&n.length?Ze(n,x(t,3),!0,!0):[]},a.dropWhile=function yh(n,t){return n&&n.length?Ze(n,x(t,3),!0):[]},a.fill=function Sh(n,t,e,r){var s=null==n?0:n.length;return s?(e&&"number"!=typeof e&&rn(n,t,e)&&(e=0,r=s),function wc(n,t,e,r){var s=n.length;for((e=b(e))<0&&(e=-e>s?0:s+e),(r=r===i||r>s?s:b(r))<0&&(r+=s),r=e>r?0:aa(r);e<r;)n[e++]=t;return n}(n,t,e,r)):[]},a.filter=function Rl(n,t){return(R(n)?jn:Ks)(n,x(t,3))},a.flatMap=function Ll(n,t){return j(rr(n,t),1)},a.flatMapDeep=function Dl(n,t){return j(rr(n,t),ht)},a.flatMapDepth=function Hl(n,t,e){return e=e===i?1:b(e),j(rr(n,t),e)},a.flatten=Bu,a.flattenDeep=function Oh(n){return(null==n?0:n.length)?j(n,ht):[]},a.flattenDepth=function Rh(n,t){return(null==n?0:n.length)?j(n,t=t===i?1:b(t)):[]},a.flip=function jl(n){return Kn(n,512)},a.flow=Jd,a.flowRight=Xd,a.fromPairs=function bh(n){for(var t=-1,e=null==n?0:n.length,r={};++t<e;){var s=n[t];r[s[0]]=s[1]}return r},a.functions=function Xp(n){return null==n?[]:ze(n,V(n))},a.functionsIn=function Qp(n){return null==n?[]:ze(n,on(n))},a.groupBy=Nl,a.initial=function Lh(n){return(null==n?0:n.length)?Cn(n,0,-1):[]},a.intersection=Dh,a.intersectionBy=Hh,a.intersectionWith=Nh,a.invert=kp,a.invertBy=jp,a.invokeMap=Ul,a.iteratee=Ti,a.keyBy=Wl,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=function td(n,t){var e={};return t=x(t,3),$n(n,(function(r,s,o){zn(e,t(r,s,o),r)})),e},a.mapValues=function ed(n,t){var e={};return t=x(t,3),$n(n,(function(r,s,o){zn(e,s,t(r,s,o))})),e},a.matches=function Qd(n){return ks(An(n,1))},a.matchesProperty=function Vd(n,t){return js(n,An(t,1))},a.memoize=sr,a.merge=rd,a.mergeWith=ca,a.method=kd,a.methodOf=jd,a.mixin=Li,a.negate=ur,a.nthArg=function tg(n){return n=b(n),L((function(t){return nu(t,n)}))},a.omit=id,a.omitBy=function sd(n,t){return ha(n,ur(x(t)))},a.once=function np(n){return Qu(2,n)},a.orderBy=function Fl(n,t,e,r){return null==n?[]:(R(t)||(t=null==t?[]:[t]),R(e=r?i:e)||(e=null==e?[]:[e]),tu(n,t,e))},a.over=eg,a.overArgs=tp,a.overEvery=rg,a.overSome=ig,a.partial=xi,a.partialRight=ta,a.partition=Ml,a.pick=ud,a.pickBy=ha,a.property=ma,a.propertyOf=function sg(n){return function(t){return null==n?i:_t(n,t)}},a.pull=Fh,a.pullAll=zu,a.pullAllBy=function Mh(n,t,e){return n&&n.length&&t&&t.length?ti(n,t,x(e,2)):n},a.pullAllWith=function qh(n,t,e){return n&&n.length&&t&&t.length?ti(n,t,i,e):n},a.pullAt=Bh,a.range=ug,a.rangeRight=ag,a.rearg=ep,a.reject=function Gl(n,t){return(R(n)?jn:Ks)(n,ur(x(t,3)))},a.remove=function Gh(n,t){var e=[];if(!n||!n.length)return e;var r=-1,s=[],o=n.length;for(t=x(t,3);++r<o;){var f=n[r];t(f,r,n)&&(e.push(f),s.push(r))}return ru(n,s),e},a.rest=function rp(n,t){if("function"!=typeof n)throw new wn($);return L(n,t=t===i?t:b(t))},a.reverse=Ai,a.sampleSize=function Kl(n,t,e){return t=(e?rn(n,t,e):t===i)?1:b(t),(R(n)?pc:Uc)(n,t)},a.set=function od(n,t,e){return null==n?n:fe(n,t,e)},a.setWith=function fd(n,t,e,r){return r="function"==typeof r?r:i,null==n?n:fe(n,t,e,r)},a.shuffle=function Yl(n){return(R(n)?dc:Fc)(n)},a.slice=function zh(n,t,e){var r=null==n?0:n.length;return r?(e&&"number"!=typeof e&&rn(n,t,e)?(t=0,e=r):(t=null==t?0:b(t),e=e===i?r:b(e)),Cn(n,t,e)):[]},a.sortBy=Xl,a.sortedUniq=function Vh(n){return n&&n.length?su(n):[]},a.sortedUniqBy=function kh(n,t){return n&&n.length?su(n,x(t,2)):[]},a.split=function Ld(n,t,e){return e&&"number"!=typeof e&&rn(n,t,e)&&(t=e=i),(e=e===i?Nn:e>>>0)?(n=W(n))&&("string"==typeof t||null!=t&&!yi(t))&&(!(t=ln(t))&&Lt(n))?ut(On(n),0,e):n.split(t,e):[]},a.spread=function ip(n,t){if("function"!=typeof n)throw new wn($);return t=null==t?0:Q(b(t),0),L((function(e){var r=e[t],s=ut(e,0,t);return r&&nt(s,r),cn(n,this,s)}))},a.tail=function jh(n){var t=null==n?0:n.length;return t?Cn(n,1,t):[]},a.take=function nl(n,t,e){return n&&n.length?Cn(n,0,(t=e||t===i?1:b(t))<0?0:t):[]},a.takeRight=function tl(n,t,e){var r=null==n?0:n.length;return r?Cn(n,(t=r-(t=e||t===i?1:b(t)))<0?0:t,r):[]},a.takeRightWhile=function el(n,t){return n&&n.length?Ze(n,x(t,3),!1,!0):[]},a.takeWhile=function rl(n,t){return n&&n.length?Ze(n,x(t,3)):[]},a.tap=function ml(n,t){return t(n),n},a.throttle=function sp(n,t,e){var r=!0,s=!0;if("function"!=typeof n)throw new wn($);return K(e)&&(r="leading"in e?!!e.leading:r,s="trailing"in e?!!e.trailing:s),na(n,t,{leading:r,maxWait:t,trailing:s})},a.thru=er,a.toArray=ua,a.toPairs=la,a.toPairsIn=pa,a.toPath=function lg(n){return R(n)?G(n,Wn):pn(n)?[n]:un(Wu(W(n)))},a.toPlainObject=oa,a.transform=function cd(n,t,e){var r=R(n),s=r||at(n)||Bt(n);if(t=x(t,4),null==e){var o=n&&n.constructor;e=s?r?new o:[]:K(n)&&Jn(o)?Wt(He(n)):{}}return(s?mn:$n)(n,(function(f,c,l){return t(e,f,c,l)})),e},a.unary=function up(n){return Xu(n,1)},a.union=il,a.unionBy=sl,a.unionWith=ul,a.uniq=function al(n){return n&&n.length?it(n):[]},a.uniqBy=function ol(n,t){return n&&n.length?it(n,x(t,2)):[]},a.uniqWith=function fl(n,t){return t="function"==typeof t?t:i,n&&n.length?it(n,i,t):[]},a.unset=function hd(n,t){return null==n||si(n,t)},a.unzip=Ci,a.unzipWith=Ku,a.update=function ld(n,t,e){return null==n?n:au(n,t,oi(e))},a.updateWith=function pd(n,t,e,r){return r="function"==typeof r?r:i,null==n?n:au(n,t,oi(e),r)},a.values=Gt,a.valuesIn=function dd(n){return null==n?[]:Mr(n,on(n))},a.without=cl,a.words=va,a.wrap=function ap(n,t){return xi(oi(t),n)},a.xor=hl,a.xorBy=ll,a.xorWith=pl,a.zip=dl,a.zipObject=function gl(n,t){return fu(n||[],t||[],se)},a.zipObjectDeep=function vl(n,t){return fu(n||[],t||[],fe)},a.zipWith=_l,a.entries=la,a.entriesIn=pa,a.extend=fa,a.extendWith=fr,Li(a,a),a.add=dg,a.attempt=_a,a.camelCase=md,a.capitalize=da,a.ceil=gg,a.clamp=function gd(n,t,e){return e===i&&(e=t,t=i),e!==i&&(e=(e=xn(e))==e?e:0),t!==i&&(t=(t=xn(t))==t?t:0),vt(xn(n),t,e)},a.clone=function fp(n){return An(n,4)},a.cloneDeep=function hp(n){return An(n,5)},a.cloneDeepWith=function lp(n,t){return An(n,5,t="function"==typeof t?t:i)},a.cloneWith=function cp(n,t){return An(n,4,t="function"==typeof t?t:i)},a.conformsTo=function pp(n,t){return null==t||Bs(n,t,V(t))},a.deburr=ga,a.defaultTo=function Zd(n,t){return null==n||n!=n?t:n},a.divide=vg,a.endsWith=function wd(n,t,e){n=W(n),t=ln(t);var r=n.length,s=e=e===i?r:vt(b(e),0,r);return(e-=t.length)>=0&&n.slice(e,s)==t},a.eq=bn,a.escape=function Pd(n){return(n=W(n))&&ka.test(n)?n.replace(Yi,ff):n},a.escapeRegExp=function Ad(n){return(n=W(n))&&io.test(n)?n.replace(xr,"\\$&"):n},a.every=function Ol(n,t,e){var r=R(n)?As:mc;return e&&rn(n,t,e)&&(t=i),r(n,x(t,3))},a.find=bl,a.findIndex=Mu,a.findKey=function Gp(n,t){return Cs(n,x(t,3),$n)},a.findLast=Tl,a.findLastIndex=qu,a.findLastKey=function zp(n,t){return Cs(n,x(t,3),Xr)},a.floor=_g,a.forEach=Zu,a.forEachRight=Ju,a.forIn=function Kp(n,t){return null==n?n:Jr(n,x(t,3),on)},a.forInRight=function Yp(n,t){return null==n?n:Ys(n,x(t,3),on)},a.forOwn=function Zp(n,t){return n&&$n(n,x(t,3))},a.forOwnRight=function Jp(n,t){return n&&Xr(n,x(t,3))},a.get=Si,a.gt=dp,a.gte=gp,a.has=function Vp(n,t){return null!=n&&Ru(n,t,Pc)},a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=function $l(n,t,e,r){n=an(n)?n:Gt(n),e=e&&!r?b(e):0;var s=n.length;return e<0&&(e=Q(s+e,0)),or(n)?e<=s&&n.indexOf(t,e)>-1:!!s&&Tt(n,t,e)>-1},a.indexOf=function Th(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=null==e?0:b(e);return s<0&&(s=Q(r+s,0)),Tt(n,t,s)},a.inRange=function vd(n,t,e){return t=Xn(t),e===i?(e=t,t=0):e=Xn(e),function Cc(n,t,e){return n>=nn(t,e)&&n<Q(t,e)}(n=xn(n),t,e)},a.invoke=nd,a.isArguments=Pt,a.isArray=R,a.isArrayBuffer=vp,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=function _p(n){return!0===n||!1===n||Y(n)&&en(n)==Yt},a.isBuffer=at,a.isDate=mp,a.isElement=function wp(n){return Y(n)&&1===n.nodeType&&!pe(n)},a.isEmpty=function Pp(n){if(null==n)return!0;if(an(n)&&(R(n)||"string"==typeof n||"function"==typeof n.splice||at(n)||Bt(n)||Pt(n)))return!n.length;var t=tn(n);if(t==yn||t==Sn)return!n.size;if(he(n))return!jr(n).length;for(var e in n)if(F.call(n,e))return!1;return!0},a.isEqual=function Ap(n,t){return oe(n,t)},a.isEqualWith=function Cp(n,t,e){var r=(e="function"==typeof e?e:i)?e(n,t):i;return r===i?oe(n,t,i,e):!!r},a.isError=Ei,a.isFinite=function Ip(n){return"number"==typeof n&&$s(n)},a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=ra,a.isMatch=function xp(n,t){return n===t||kr(n,t,gi(t))},a.isMatchWith=function Ep(n,t,e){return e="function"==typeof e?e:i,kr(n,t,gi(t),e)},a.isNaN=function yp(n){return ia(n)&&n!=+n},a.isNative=function Sp(n){if(ch(n))throw new S("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(n)},a.isNil=function Rp(n){return null==n},a.isNull=function Op(n){return null===n},a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=yi,a.isSafeInteger=function bp(n){return ea(n)&&n>=-kn&&n<=kn},a.isSet=sa,a.isString=or,a.isSymbol=pn,a.isTypedArray=Bt,a.isUndefined=function Tp(n){return n===i},a.isWeakMap=function Lp(n){return Y(n)&&tn(n)==Vt},a.isWeakSet=function Dp(n){return Y(n)&&"[object WeakSet]"==en(n)},a.join=function $h(n,t){return null==n?"":Lf.call(n,t)},a.kebabCase=Cd,a.last=In,a.lastIndexOf=function Uh(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var s=r;return e!==i&&(s=(s=b(e))<0?Q(r+s,0):nn(s,r-1)),t==t?function vf(h,g,p){for(var A=p+1;A--;)if(h[A]===g)return A;return A}(n,t,s):ye(n,Is,s,!0)},a.lowerCase=Id,a.lowerFirst=xd,a.lt=Hp,a.lte=Np,a.max=function mg(n){return n&&n.length?Ge(n,fn,Qr):i},a.maxBy=function wg(n,t){return n&&n.length?Ge(n,x(t,2),Qr):i},a.mean=function Pg(n){return xs(n,fn)},a.meanBy=function Ag(n,t){return xs(n,x(t,2))},a.min=function Cg(n){return n&&n.length?Ge(n,fn,ni):i},a.minBy=function Ig(n,t){return n&&n.length?Ge(n,x(t,2),ni):i},a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=function og(){return{}},a.stubString=function fg(){return""},a.stubTrue=function cg(){return!0},a.multiply=xg,a.nth=function Wh(n,t){return n&&n.length?nu(n,b(t)):i},a.noConflict=function ng(){return k._===this&&(k._=yf),this},a.noop=Di,a.now=ir,a.pad=function Ed(n,t,e){n=W(n);var r=(t=b(t))?Dt(n):0;if(!t||r>=t)return n;var s=(t-r)/2;return Ve(We(s),e)+n+Ve(Ue(s),e)},a.padEnd=function yd(n,t,e){n=W(n);var r=(t=b(t))?Dt(n):0;return t&&r<t?n+Ve(t-r,e):n},a.padStart=function Sd(n,t,e){n=W(n);var r=(t=b(t))?Dt(n):0;return t&&r<t?Ve(t-r,e)+n:n},a.parseInt=function Od(n,t,e){return e||null==t?t=0:t&&(t=+t),Nf(W(n).replace(Er,""),t||0)},a.random=function _d(n,t,e){if(e&&"boolean"!=typeof e&&rn(n,t,e)&&(t=e=i),e===i&&("boolean"==typeof t?(e=t,t=i):"boolean"==typeof n&&(e=n,n=i)),n===i&&t===i?(n=0,t=1):(n=Xn(n),t===i?(t=n,n=0):t=Xn(t)),n>t){var r=n;n=t,t=r}if(e||n%1||t%1){var s=Us();return nn(n+s*(t-n+Jo("1e-"+((s+"").length-1))),t)}return ei(n,t)},a.reduce=function ql(n,t,e){var r=R(n)?Hr:Es,s=arguments.length<3;return r(n,x(t,4),e,s,rt)},a.reduceRight=function Bl(n,t,e){var r=R(n)?jo:Es,s=arguments.length<3;return r(n,x(t,4),e,s,zs)},a.repeat=function Rd(n,t,e){return t=(e?rn(n,t,e):t===i)?1:b(t),ri(W(n),t)},a.replace=function bd(){var n=arguments,t=W(n[0]);return n.length<3?t:t.replace(n[1],n[2])},a.result=function ad(n,t,e){var r=-1,s=(t=st(t,n)).length;for(s||(s=1,n=i);++r<s;){var o=null==n?i:n[Wn(t[r])];o===i&&(r=s,o=e),n=Jn(o)?o.call(n):o}return n},a.round=Eg,a.runInContext=h,a.sample=function zl(n){return(R(n)?Ms:$c)(n)},a.size=function Zl(n){if(null==n)return 0;if(an(n))return or(n)?Dt(n):n.length;var t=tn(n);return t==yn||t==Sn?n.size:jr(n).length},a.snakeCase=Td,a.some=function Jl(n,t,e){var r=R(n)?Nr:Mc;return e&&rn(n,t,e)&&(t=i),r(n,x(t,3))},a.sortedIndex=function Kh(n,t){return Ye(n,t)},a.sortedIndexBy=function Yh(n,t,e){return ii(n,t,x(e,2))},a.sortedIndexOf=function Zh(n,t){var e=null==n?0:n.length;if(e){var r=Ye(n,t);if(r<e&&bn(n[r],t))return r}return-1},a.sortedLastIndex=function Jh(n,t){return Ye(n,t,!0)},a.sortedLastIndexBy=function Xh(n,t,e){return ii(n,t,x(e,2),!0)},a.sortedLastIndexOf=function Qh(n,t){if(null==n?0:n.length){var r=Ye(n,t,!0)-1;if(bn(n[r],t))return r}return-1},a.startCase=Dd,a.startsWith=function Hd(n,t,e){return n=W(n),e=null==e?0:vt(b(e),0,n.length),t=ln(t),n.slice(e,e+t.length)==t},a.subtract=yg,a.sum=function Sg(n){return n&&n.length?Wr(n,fn):0},a.sumBy=function Og(n,t){return n&&n.length?Wr(n,x(t,2)):0},a.template=function Nd(n,t,e){var r=a.templateSettings;e&&rn(n,t,e)&&(t=i),n=W(n),t=fr({},t,r,Eu);var c,l,s=fr({},t.imports,r.imports,Eu),o=V(s),f=Mr(s,o),v=0,_=t.interpolate||Ce,m="__p += '",w=Br((t.escape||Ce).source+"|"+_.source+"|"+(_===Zi?lo:Ce).source+"|"+(t.evaluate||Ce).source+"|$","g"),I="//# sourceURL="+(F.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Go+"]")+"\n";n.replace(w,(function(y,D,N,dn,sn,gn){return N||(N=dn),m+=n.slice(v,gn).replace(Po,cf),D&&(c=!0,m+="' +\n__e("+D+") +\n'"),sn&&(l=!0,m+="';\n"+sn+";\n__p += '"),N&&(m+="' +\n((__t = ("+N+")) == null ? '' : __t) +\n'"),v=gn+y.length,y})),m+="';\n";var E=F.call(t,"variable")&&t.variable;if(E){if(co.test(E))throw new S("Invalid `variable` option passed into `_.template`")}else m="with (obj) {\n"+m+"\n}\n";m=(l?m.replace(Ja,""):m).replace(Xa,"$1").replace(Qa,"$1;"),m="function("+(E||"obj")+") {\n"+(E?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var T=_a((function(){return U(o,I+"return "+m).apply(i,f)}));if(T.source=m,Ei(T))throw T;return T},a.times=function hg(n,t){if((n=b(n))<1||n>kn)return[];var e=Nn,r=nn(n,Nn);t=x(t),n-=Nn;for(var s=Fr(r,t);++e<n;)t(e);return s},a.toFinite=Xn,a.toInteger=b,a.toLength=aa,a.toLower=function $d(n){return W(n).toLowerCase()},a.toNumber=xn,a.toSafeInteger=function $p(n){return n?vt(b(n),-kn,kn):0===n?n:0},a.toString=W,a.toUpper=function Ud(n){return W(n).toUpperCase()},a.trim=function Wd(n,t,e){if((n=W(n))&&(e||t===i))return ys(n);if(!n||!(t=ln(t)))return n;var r=On(n),s=On(t);return ut(r,Ss(r,s),Os(r,s)+1).join("")},a.trimEnd=function Fd(n,t,e){if((n=W(n))&&(e||t===i))return n.slice(0,bs(n)+1);if(!n||!(t=ln(t)))return n;var r=On(n);return ut(r,0,Os(r,On(t))+1).join("")},a.trimStart=function Md(n,t,e){if((n=W(n))&&(e||t===i))return n.replace(Er,"");if(!n||!(t=ln(t)))return n;var r=On(n);return ut(r,Ss(r,On(t))).join("")},a.truncate=function qd(n,t){var e=30,r="...";if(K(t)){var s="separator"in t?t.separator:s;e="length"in t?b(t.length):e,r="omission"in t?ln(t.omission):r}var o=(n=W(n)).length;if(Lt(n)){var f=On(n);o=f.length}if(e>=o)return n;var c=e-Dt(r);if(c<1)return r;var l=f?ut(f,0,c).join(""):n.slice(0,c);if(s===i)return l+r;if(f&&(c+=l.length-c),yi(s)){if(n.slice(c).search(s)){var v,_=l;for(s.global||(s=Br(s.source,W(Ji.exec(s))+"g")),s.lastIndex=0;v=s.exec(_);)var m=v.index;l=l.slice(0,m===i?c:m)}}else if(n.indexOf(ln(s),c)!=c){var w=l.lastIndexOf(s);w>-1&&(l=l.slice(0,w))}return l+r},a.unescape=function Bd(n){return(n=W(n))&&Va.test(n)?n.replace(Ki,_f):n},a.uniqueId=function pg(n){var t=++xf;return W(n)+t},a.upperCase=Gd,a.upperFirst=Ri,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,function(){var n={};return $n(a,(function(t,e){F.call(a.prototype,e)||(n[e]=t)})),n}(),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(n){a[n].placeholder=a})),mn(["drop","take"],(function(n,t){H.prototype[n]=function(e){e=e===i?1:Q(b(e),0);var r=this.__filtered__&&!t?new H(this):this.clone();return r.__filtered__?r.__takeCount__=nn(e,r.__takeCount__):r.__views__.push({size:nn(e,Nn),type:n+(r.__dir__<0?"Right":"")}),r},H.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}})),mn(["filter","map","takeWhile"],(function(n,t){var e=t+1,r=1==e||3==e;H.prototype[n]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:x(s,3),type:e}),o.__filtered__=o.__filtered__||r,o}})),mn(["head","last"],(function(n,t){var e="take"+(t?"Right":"");H.prototype[n]=function(){return this[e](1).value()[0]}})),mn(["initial","tail"],(function(n,t){var e="drop"+(t?"":"Right");H.prototype[n]=function(){return this.__filtered__?new H(this):this[e](1)}})),H.prototype.compact=function(){return this.filter(fn)},H.prototype.find=function(n){return this.filter(n).head()},H.prototype.findLast=function(n){return this.reverse().find(n)},H.prototype.invokeMap=L((function(n,t){return"function"==typeof n?new H(this):this.map((function(e){return ae(e,n,t)}))})),H.prototype.reject=function(n){return this.filter(ur(x(n)))},H.prototype.slice=function(n,t){n=b(n);var e=this;return e.__filtered__&&(n>0||t<0)?new H(e):(n<0?e=e.takeRight(-n):n&&(e=e.drop(n)),t!==i&&(e=(t=b(t))<0?e.dropRight(-t):e.take(t-n)),e)},H.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},H.prototype.toArray=function(){return this.take(Nn)},$n(H.prototype,(function(n,t){var e=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=a[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);s&&(a.prototype[t]=function(){var f=this.__wrapped__,c=r?[1]:arguments,l=f instanceof H,v=c[0],_=l||R(f),m=function(D){var N=s.apply(a,nt([D],c));return r&&w?N[0]:N};_&&e&&"function"==typeof v&&1!=v.length&&(l=_=!1);var w=this.__chain__,I=!!this.__actions__.length,E=o&&!w,T=l&&!I;if(!o&&_){f=T?f:new H(this);var y=n.apply(f,c);return y.__actions__.push({func:er,args:[m],thisArg:i}),new Pn(y,w)}return E&&T?n.apply(this,c):(y=this.thru(m),E?r?y.value()[0]:y.value():y)})})),mn(["pop","push","shift","sort","splice","unshift"],(function(n){var t=Oe[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);a.prototype[n]=function(){var s=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(R(o)?o:[],s)}return this[e]((function(f){return t.apply(R(f)?f:[],s)}))}})),$n(H.prototype,(function(n,t){var e=a[t];if(e){var r=e.name+"";F.call(Ut,r)||(Ut[r]=[]),Ut[r].push({name:t,func:e})}})),Ut[Xe(i,2).name]=[{name:"wrapper",func:i}],H.prototype.clone=function Bf(){var n=new H(this.__wrapped__);return n.__actions__=un(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=un(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=un(this.__views__),n},H.prototype.reverse=function Gf(){if(this.__filtered__){var n=new H(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},H.prototype.value=function zf(){var n=this.__wrapped__.value(),t=this.__dir__,e=R(n),r=t<0,s=e?n.length:0,o=function eh(n,t,e){for(var r=-1,s=e.length;++r<s;){var o=e[r],f=o.size;switch(o.type){case"drop":n+=f;break;case"dropRight":t-=f;break;case"take":t=nn(t,n+f);break;case"takeRight":n=Q(n,t-f)}}return{start:n,end:t}}(0,s,this.__views__),f=o.start,c=o.end,l=c-f,v=r?c:f-1,_=this.__iteratees__,m=_.length,w=0,I=nn(l,this.__takeCount__);if(!e||!r&&s==l&&I==l)return ou(n,this.__actions__);var E=[];n:for(;l--&&w<I;){for(var T=-1,y=n[v+=t];++T<m;){var D=_[T],N=D.iteratee,dn=D.type,sn=N(y);if(2==dn)y=sn;else if(!sn){if(1==dn)continue n;break n}}E[w++]=y}return E},a.prototype.at=wl,a.prototype.chain=function Pl(){return Yu(this)},a.prototype.commit=function Al(){return new Pn(this.value(),this.__chain__)},a.prototype.next=function Cl(){this.__values__===i&&(this.__values__=ua(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?i:this.__values__[this.__index__++]}},a.prototype.plant=function xl(n){for(var t,e=this;e instanceof qe;){var r=Fu(e);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;e=e.__wrapped__}return s.__wrapped__=n,t},a.prototype.reverse=function El(){var n=this.__wrapped__;if(n instanceof H){var t=n;return this.__actions__.length&&(t=new H(this)),(t=t.reverse()).__actions__.push({func:er,args:[Ai],thisArg:i}),new Pn(t,this.__chain__)}return this.thru(Ai)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function yl(){return ou(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,ne&&(a.prototype[ne]=function Il(){return this}),a}();lt?((lt.exports=Ht)._=Ht,Tr._=Ht):k._=Ht}).call(index_es_ge)}(Ui,Ui.exports);var Bg=Object.defineProperty,Gg=Object.defineProperties,zg=Object.getOwnPropertyDescriptors,Ea=Object.getOwnPropertySymbols,Kg=Object.prototype.hasOwnProperty,Yg=Object.prototype.propertyIsEnumerable,ya=(C,u,i)=>u in C?Bg(C,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):C[u]=i,index_es_cr=(C,u)=>{for(var i in u||(u={}))Kg.call(u,i)&&ya(C,i,u[i]);if(Ea)for(var i of Ea(u))Yg.call(u,i)&&ya(C,i,u[i]);return C},Zg=(C,u)=>Gg(C,zg(u));function index_es_ft(C,u,i){var d;const P=(0,index_es.DQ)(C);return(null==(d=u.rpcMap)?void 0:d[P.reference])||`https://rpc.walletconnect.com/v1/?chainId=${P.namespace}:${P.reference}&projectId=${i}`}function index_es_Ct(C){return C.includes(":")?C.split(":")[1]:C}function Sa(C){return C.map((u=>`${u.split(":")[0]}:${u.split(":")[1]}`))}function Oa(C){var u,i,d,P;const O={};if(!(0,index_es.L5)(C))return O;for(const[$,En]of Object.entries(C)){const zt=(0,index_es.gp)($)?[$]:En.chains,pr=En.methods||[],It=En.events||[],Ln=En.rpcMap||{},Fn=(0,index_es.M)($);O[Fn]=Zg(index_es_cr(index_es_cr({},O[Fn]),En),{chains:(0,index_es.eG)(zt,null==(u=O[Fn])?void 0:u.chains),methods:(0,index_es.eG)(pr,null==(i=O[Fn])?void 0:i.methods),events:(0,index_es.eG)(It,null==(d=O[Fn])?void 0:d.events),rpcMap:index_es_cr(index_es_cr({},Ln),null==(P=O[Fn])?void 0:P.rpcMap)})}return O}function Qg(C){return C.includes(":")?C.split(":")[2]:C}function Vg(C){const u={};for(const[i,d]of Object.entries(C)){const P=d.methods||[],O=d.events||[],$=d.accounts||[],En=(0,index_es.gp)(i)?[i]:d.chains?d.chains:Sa(d.accounts);u[i]={chains:En,methods:P,events:O,accounts:$}}return u}function index_es_Wi(C){return"number"==typeof C?C:C.includes("0x")?parseInt(C,16):C.includes(":")?Number(C.split(":")[1]):Number(C)}const Ra={},index_es_z=C=>Ra[C],Fi=(C,u)=>{Ra[C]=u};class kg{constructor(u){this.name="polkadot",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(u,i),this.chainId=u,this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${u}`)}getAccounts(){const u=this.namespace.accounts;return u&&u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2]))||[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;const P=index_es_Ct(i);u[P]=this.createHttpProvider(P,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||index_es_ft(u,this.namespace,this.client.core.projectId);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}class jg{constructor(u){this.name="eip155",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(u){switch(u.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(u);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(u.request.method)?await this.client.request(u):this.getHttpProvider().request(u.request)}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(parseInt(u),i),this.chainId=parseInt(u),this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${u}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}createHttpProvider(u,i){const d=i||index_es_ft(`${this.name}:${u}`,this.namespace,this.client.core.projectId);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new HttpConnection(d,index_es_z("disableProviderPing")))}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;const P=parseInt(index_es_Ct(i));u[P]=this.createHttpProvider(P,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}getHttpProvider(){const u=this.chainId,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}async handleSwitchChain(u){var i,d;let P=u.request.params?null==(i=u.request.params[0])?void 0:i.chainId:"0x0";P=P.startsWith("0x")?P:`0x${P}`;const O=parseInt(P,16);if(this.isChainApproved(O))this.setDefaultChain(`${O}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${O}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:u.topic,request:{method:u.request.method,params:[{chainId:P}]},chainId:null==(d=this.namespace.chains)?void 0:d[0]}),this.setDefaultChain(`${O}`)}return null}isChainApproved(u){return this.namespace.chains.includes(`${this.name}:${u}`)}}class nv{constructor(u){this.name="solana",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(u,i),this.chainId=u,this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${u}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;const P=index_es_Ct(i);u[P]=this.createHttpProvider(P,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||index_es_ft(u,this.namespace,this.client.core.projectId);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}class tv{constructor(u){this.name="cosmos",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(u,i),this.chainId=u,this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;const P=index_es_Ct(i);u[P]=this.createHttpProvider(P,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||index_es_ft(u,this.namespace,this.client.core.projectId);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}class ev{constructor(u){this.name="cip34",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(u,i),this.chainId=u,this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{const d=this.getCardanoRPCUrl(i),P=index_es_Ct(i);u[P]=this.createHttpProvider(P,d)})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}getCardanoRPCUrl(u){const i=this.namespace.rpcMap;if(i)return i[u]}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||this.getCardanoRPCUrl(u);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}class rv{constructor(u){this.name="elrond",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(u,i),this.chainId=u,this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${u}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;const P=index_es_Ct(i);u[P]=this.createHttpProvider(P,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||index_es_ft(u,this.namespace,this.client.core.projectId);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}class iv{constructor(u){this.name="multiversx",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){this.httpProviders[u]||this.setHttpProvider(u,i),this.chainId=u,this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${u}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}getAccounts(){const u=this.namespace.accounts;return u?[...new Set(u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2])))]:[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;const P=index_es_Ct(i);u[P]=this.createHttpProvider(P,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||index_es_ft(u,this.namespace,this.client.core.projectId);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);return new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}class sv{constructor(u){this.name="near",this.namespace=u.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(u){this.namespace=Object.assign(this.namespace,u)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const u=this.namespace.chains[0];if(!u)throw new Error("ChainId not found");return u.split(":")[1]}request(u){return this.namespace.methods.includes(u.request.method)?this.client.request(u):this.getHttpProvider().request(u.request)}setDefaultChain(u,i){if(this.chainId=u,!this.httpProviders[u]){const d=i||index_es_ft(`${this.name}:${u}`,this.namespace);if(!d)throw new Error(`No RPC url provided for chainId: ${u}`);this.setHttpProvider(u,d)}this.events.emit(Vn_DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const u=this.namespace.accounts;return u&&u.filter((i=>i.split(":")[1]===this.chainId.toString())).map((i=>i.split(":")[2]))||[]}createHttpProviders(){const u={};return this.namespace.chains.forEach((i=>{var d;u[i]=this.createHttpProvider(i,null==(d=this.namespace.rpcMap)?void 0:d[i])})),u}getHttpProvider(){const u=`${this.name}:${this.chainId}`,i=this.httpProviders[u];if(typeof i>"u")throw new Error(`JSON-RPC provider for ${u} not found`);return i}setHttpProvider(u,i){const d=this.createHttpProvider(u,i);d&&(this.httpProviders[u]=d)}createHttpProvider(u,i){const d=i||index_es_ft(u,this.namespace);return typeof d>"u"?void 0:new JsonRpcProvider(new dist_esm(d,index_es_z("disableProviderPing")))}}var uv=Object.defineProperty,av=Object.defineProperties,ov=Object.getOwnPropertyDescriptors,ba=Object.getOwnPropertySymbols,fv=Object.prototype.hasOwnProperty,cv=Object.prototype.propertyIsEnumerable,Ta=(C,u,i)=>u in C?uv(C,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):C[u]=i,index_es_hr=(C,u)=>{for(var i in u||(u={}))fv.call(u,i)&&Ta(C,i,u[i]);if(ba)for(var i of ba(u))cv.call(u,i)&&Ta(C,i,u[i]);return C},Mi=(C,u)=>av(C,ov(u));class index_es_lr{constructor(u){this.events=new(events_default()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=u,this.logger=typeof u?.logger<"u"&&"string"!=typeof u?.logger?u.logger:(0,dist_cjs.pino)((0,dist_cjs.getDefaultLoggerOptions)({level:u?.logger||"error"})),this.disableProviderPing=u?.disableProviderPing||!1}static async init(u){const i=new index_es_lr(u);return await i.initialize(),i}async request(u,i){const[d,P]=this.validateChain(i);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(d).request({request:index_es_hr({},u),chainId:`${d}:${P}`,topic:this.session.topic})}sendAsync(u,i,d){const P=(new Date).getTime();this.request(u,d).then((O=>i(null,formatJsonRpcResult(P,O)))).catch((O=>i(O,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var u;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(u=this.session)?void 0:u.topic,reason:(0,index_es.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(u){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(u),await this.cleanupPendingPairings(),!u.skipPairing)return await this.pair(u.pairingTopic)}on(u,i){this.events.on(u,i)}once(u,i){this.events.once(u,i)}removeListener(u,i){this.events.removeListener(u,i)}off(u,i){this.events.off(u,i)}get isWalletConnect(){return!0}async pair(u){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:d,approval:P}=await this.client.connect({pairingTopic:u,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});d&&(this.uri=d,this.events.emit("display_uri",d)),await P().then((O=>{this.session=O,this.namespaces||(this.namespaces=Vg(O.namespaces),this.persist("namespaces",this.namespaces))})).catch((O=>{if(O.message!==oe)throw O;i++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(u,i){try{if(!this.session)return;const[d,P]=this.validateChain(u);this.getProvider(d).setDefaultChain(P,i)}catch(d){if(!/Please call connect/.test(d.message))throw d}}async cleanupPendingPairings(u={}){this.logger.info("Cleaning up inactive pairings...");const i=this.client.pairing.getAll();if((0,index_es.qt)(i)){for(const d of i)u.deletePairings?this.client.core.expirer.set(d.topic,0):await this.client.core.relayer.subscriber.unsubscribe(d.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const u=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[u]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await index_es_Q.init({logger:this.providerOpts.logger||"error",relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const u=[...new Set(Object.keys(this.session.namespaces).map((i=>(0,index_es.M)(i))))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),u.forEach((i=>{if(!this.session)return;const d=function Jg(C,u){const i=Object.keys(u.namespaces).filter((P=>P.includes(C)));if(!i.length)return[];const d=[];return i.forEach((P=>{const O=u.namespaces[P].accounts;d.push(...O)})),d}(i,this.session),P=Sa(d),O=function Xg(C={},u={}){const i=Oa(C),d=Oa(u);return Ui.exports.merge(i,d)}(this.namespaces,this.optionalNamespaces),$=Mi(index_es_hr({},O[i]),{accounts:d,chains:P});switch(i){case"eip155":this.rpcProviders[i]=new jg({namespace:$});break;case"solana":this.rpcProviders[i]=new nv({namespace:$});break;case"cosmos":this.rpcProviders[i]=new tv({namespace:$});break;case"polkadot":this.rpcProviders[i]=new kg({namespace:$});break;case"cip34":this.rpcProviders[i]=new ev({namespace:$});break;case"elrond":this.rpcProviders[i]=new rv({namespace:$});break;case"multiversx":this.rpcProviders[i]=new iv({namespace:$});break;case"near":this.rpcProviders[i]=new sv({namespace:$})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(u=>{this.events.emit("session_ping",u)})),this.client.on("session_event",(u=>{const{params:i}=u,{event:d}=i;if("accountsChanged"===d.name){const P=d.data;P&&(0,index_es.qt)(P)&&this.events.emit("accountsChanged",P.map(Qg))}else if("chainChanged"===d.name){const P=i.chainId,O=i.event.data,$=(0,index_es.M)(P),En=index_es_Wi(P)!==index_es_Wi(O)?`${$}:${index_es_Wi(O)}`:P;this.onChainChanged(En)}else this.events.emit(d.name,d.data);this.events.emit("session_event",u)})),this.client.on("session_update",(({topic:u,params:i})=>{var d;const{namespaces:P}=i,O=null==(d=this.client)?void 0:d.session.get(u);this.session=Mi(index_es_hr({},O),{namespaces:P}),this.onSessionUpdate(),this.events.emit("session_update",{topic:u,params:i})})),this.client.on("session_delete",(async u=>{await this.cleanup(),this.events.emit("session_delete",u),this.events.emit("disconnect",Mi(index_es_hr({},(0,index_es.D6)("USER_DISCONNECTED")),{data:u.topic}))})),this.on(Vn_DEFAULT_CHAIN_CHANGED,(u=>{this.onChainChanged(u,!0)}))}getProvider(u){if(!this.rpcProviders[u])throw new Error(`Provider not found: ${u}`);return this.rpcProviders[u]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((u=>{var i;this.getProvider(u).updateNamespace(null==(i=this.session)?void 0:i.namespaces[u])}))}setNamespaces(u){const{namespaces:i,optionalNamespaces:d,sessionProperties:P}=u;i&&Object.keys(i).length&&(this.namespaces=i),d&&Object.keys(d).length&&(this.optionalNamespaces=d),this.sessionProperties=P,this.persist("namespaces",i),this.persist("optionalNamespaces",d)}validateChain(u){const[i,d]=u?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,d];if(i&&!Object.keys(this.namespaces||{}).map(($=>(0,index_es.M)($))).includes(i))throw new Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&d)return[i,d];const P=(0,index_es.M)(Object.keys(this.namespaces)[0]);return[P,this.rpcProviders[P].getDefaultChain()]}async requestAccounts(){const[u]=this.validateChain();return await this.getProvider(u).requestAccounts()}onChainChanged(u,i=!1){var d;if(!this.namespaces)return;const[P,O]=this.validateChain(u);i||this.getProvider(P).setDefaultChain(O),(null!=(d=this.namespaces[P])?d:this.namespaces[`${P}:${O}`]).defaultChain=O,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",O)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(u,i){this.client.core.storage.setItem(`${xa}/${u}`,i)}async getFromStore(u){return await this.client.core.storage.getItem(`${xa}/${u}`)}}const hv=index_es_lr,index_es_u=["eth_sendTransaction","personal_sign"],dist_index_es_E=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],index_es_m=["chainChanged","accountsChanged"],index_es_=["chainChanged","accountsChanged","message","disconnect","connect"];var index_es_N=Object.defineProperty,q=Object.defineProperties,dist_index_es_D=Object.getOwnPropertyDescriptors,dist_index_es_y=Object.getOwnPropertySymbols,dist_index_es_U=Object.prototype.hasOwnProperty,dist_index_es_Q=Object.prototype.propertyIsEnumerable,dist_index_es_O=(a,t,s)=>t in a?index_es_N(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,index_es_p=(a,t)=>{for(var s in t||(t={}))dist_index_es_U.call(t,s)&&dist_index_es_O(a,s,t[s]);if(dist_index_es_y)for(var s of dist_index_es_y(t))dist_index_es_Q.call(t,s)&&dist_index_es_O(a,s,t[s]);return a},index_es_M=(a,t)=>q(a,dist_index_es_D(t));function ethereum_provider_dist_index_es_g(a){return Number(a[0].split(":")[1])}function index_es_f(a){return`0x${a.toString(16)}`}class dist_index_es_v{constructor(){this.events=new events.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(t,s)=>(this.events.on(t,s),this),this.once=(t,s)=>(this.events.once(t,s),this),this.removeListener=(t,s)=>(this.events.removeListener(t,s),this),this.off=(t,s)=>(this.events.off(t,s),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const s=new dist_index_es_v;return await s.initialize(t),s}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,s){this.signer.sendAsync(t,s,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:s,optional:i}=function L(a){const{chains:t,optionalChains:s,methods:i,optionalMethods:n,events:e,optionalEvents:h,rpcMap:c}=a;if(!(0,index_es.qt)(t))throw new Error("Invalid chains");const o={chains:t,methods:i||index_es_u,events:e||index_es_m,rpcMap:index_es_p({},t.length?{[ethereum_provider_dist_index_es_g(t)]:c[ethereum_provider_dist_index_es_g(t)]}:{})},r=e?.filter((l=>!index_es_m.includes(l))),d=i?.filter((l=>!index_es_u.includes(l)));if(!(s||h||n||null!=r&&r.length||null!=d&&d.length))return{required:t.length?o:void 0};const I={chains:[...new Set(r?.length&&d?.length||!s?o.chains.concat(s||[]):s)],methods:[...new Set(o.methods.concat(null!=n&&n.length?n:dist_index_es_E))],events:[...new Set(o.events.concat(null!=h&&h.length?h:index_es_))],rpcMap:c};return{required:t.length?o:void 0,optional:s.length?I:void 0}}(this.rpc);try{const n=await new Promise((async(h,c)=>{var o;this.rpc.showQrModal&&(null==(o=this.modal)||o.subscribeModal((r=>{!r.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(index_es_M(index_es_p({namespaces:index_es_p({},s&&{[this.namespace]:s})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t?.pairingTopic})).then((r=>{h(r)})).catch((r=>{c(new Error(r.message))}))}));if(!n)return;const e=(0,index_es.gu)(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:index_es_f(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:s}=t,{event:i}=s;"accountsChanged"===i.name?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===i.name?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const s=parseInt(t);this.chainId=s,this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",index_es_M(index_es_p({},(0,index_es.D6)("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var s,i;this.rpc.showQrModal&&(null==(s=this.modal)||s.closeModal(),null==(i=this.modal)||i.openModal({uri:t})),this.events.emit("display_uri",t)}))}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const s=t.filter((i=>this.isCompatibleChainId(i))).map((i=>this.parseChainId(i)));s.length&&(this.chainId=s[0],this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const s=this.parseChainId(t);this.chainId=s,this.switchEthereumChain(s)}}parseAccountId(t){const[s,i,n]=t.split(":");return{chainId:`${s}:${i}`,address:n}}setAccounts(t){this.accounts=t.filter((s=>this.parseChainId(this.parseAccountId(s).chainId)===this.chainId)).map((s=>this.parseAccountId(s).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var s,i;const n=null!=(s=t?.chains)?s:[],e=null!=(i=t?.optionalChains)?i:[],h=n.concat(e);if(!h.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const c=n.length?t?.methods||index_es_u:[],o=n.length?t?.events||index_es_m:[],r=t?.optionalMethods||[],d=t?.optionalEvents||[],C=t?.rpcMap||this.buildRpcMap(h,t.projectId),I=t?.qrModalOptions||void 0;return{chains:n?.map((l=>this.formatChainId(l))),optionalChains:e.map((l=>this.formatChainId(l))),methods:c,events:o,optionalMethods:r,optionalEvents:d,rpcMap:C,showQrModal:!(null==t||!t.showQrModal),qrModalOptions:I,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,s){const i={};return t.forEach((n=>{i[n]=this.getRpcUrl(n,s)})),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_g(this.rpc.chains):ethereum_provider_dist_index_es_g(this.rpc.optionalChains),this.signer=await hv.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let s;try{const{WalletConnectModal:i}=await __webpack_require__.e(6416).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@walletconnect/modal/dist/index.js"));s=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(s)try{this.modal=new s(index_es_p({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:s,optionalChains:i,rpcMap:n}=t;s&&(0,index_es.qt)(s)&&(this.rpc.chains=s.map((e=>this.formatChainId(e))),s.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))),i&&(0,index_es.qt)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map((e=>this.formatChainId(e))),i.forEach((e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})))}getRpcUrl(t,s){var i;return(null==(i=this.rpc.rpcMap)?void 0:i[t])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${t}&projectId=${s||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),s=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:s?.accounts),this.setAccounts(s?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map((s=>this.parseAccount(s)))}}const index_es_G=dist_index_es_v},"./node_modules/@walletconnect/events/dist/esm/events.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>IEvents});class IEvents{}},"./node_modules/@walletconnect/events/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{IEvents:()=>_events__WEBPACK_IMPORTED_MODULE_0__.q});var _events__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@walletconnect/events/dist/esm/events.js")},"./node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HEARTBEAT_EVENTS=exports.HEARTBEAT_INTERVAL=void 0;const time_1=__webpack_require__("./node_modules/@walletconnect/time/dist/cjs/index.js");exports.HEARTBEAT_INTERVAL=time_1.FIVE_SECONDS,exports.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},"./node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js"),exports)},"./node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeartBeat=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js"),events_1=__webpack_require__("./node_modules/events/events.js"),time_1=__webpack_require__("./node_modules/@walletconnect/time/dist/cjs/index.js"),types_1=__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js"),constants_1=__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js");class HeartBeat extends types_1.IHeartBeat{constructor(opts){super(opts),this.events=new events_1.EventEmitter,this.interval=constants_1.HEARTBEAT_INTERVAL,this.interval=(null==opts?void 0:opts.interval)||constants_1.HEARTBEAT_INTERVAL}static init(opts){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const heartbeat=new HeartBeat(opts);return yield heartbeat.init(),heartbeat}))}init(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(event,listener){this.events.on(event,listener)}once(event,listener){this.events.once(event,listener)}off(event,listener){this.events.off(event,listener)}removeListener(event,listener){this.events.removeListener(event,listener)}initialize(){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),time_1.toMiliseconds(this.interval))}))}pulse(){this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse)}}exports.HeartBeat=HeartBeat},"./node_modules/@walletconnect/heartbeat/dist/cjs/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js");tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js"),exports)},"./node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IHeartBeat=void 0;const events_1=__webpack_require__("./node_modules/@walletconnect/events/dist/esm/index.js");class IHeartBeat extends events_1.IEvents{constructor(opts){super()}}exports.IHeartBeat=IHeartBeat},"./node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__("./node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js"),exports)},"./node_modules/@walletconnect/jsonrpc-ws-connection/node_modules/ws/browser.js":module=>{"use strict";module.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},"./node_modules/@walletconnect/logger/dist/cjs/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PINO_CUSTOM_CONTEXT_KEY=exports.PINO_LOGGER_DEFAULTS=void 0,exports.PINO_LOGGER_DEFAULTS={level:"info"},exports.PINO_CUSTOM_CONTEXT_KEY="custom_context"},"./node_modules/@walletconnect/logger/dist/cjs/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pino=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.js"),pino_1=tslib_1.__importDefault(__webpack_require__("./node_modules/pino/browser.js"));Object.defineProperty(exports,"pino",{enumerable:!0,get:function(){return pino_1.default}}),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/constants.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/utils.js"),exports)},"./node_modules/@walletconnect/logger/dist/cjs/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateChildLogger=exports.formatChildLoggerContext=exports.getLoggerContext=exports.setBrowserLoggerContext=exports.getBrowserLoggerContext=exports.getDefaultLoggerOptions=void 0;const constants_1=__webpack_require__("./node_modules/@walletconnect/logger/dist/cjs/constants.js");function getBrowserLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]||""}function setBrowserLoggerContext(logger,context,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){return logger[customContextKey]=context,logger}function getLoggerContext(logger,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){let context="";return context=void 0===logger.bindings?getBrowserLoggerContext(logger,customContextKey):logger.bindings().context||"",context}function formatChildLoggerContext(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){const parentContext=getLoggerContext(logger,customContextKey);return parentContext.trim()?`${parentContext}/${childContext}`:childContext}exports.getDefaultLoggerOptions=function getDefaultLoggerOptions(opts){return Object.assign(Object.assign({},opts),{level:(null==opts?void 0:opts.level)||constants_1.PINO_LOGGER_DEFAULTS.level})},exports.getBrowserLoggerContext=getBrowserLoggerContext,exports.setBrowserLoggerContext=setBrowserLoggerContext,exports.getLoggerContext=getLoggerContext,exports.formatChildLoggerContext=formatChildLoggerContext,exports.generateChildLogger=function generateChildLogger(logger,childContext,customContextKey=constants_1.PINO_CUSTOM_CONTEXT_KEY){const context=formatChildLoggerContext(logger,childContext,customContextKey);return setBrowserLoggerContext(logger.child({context}),context,customContextKey)}},"./node_modules/@walletconnect/relay-auth/dist/esm/types.js":()=>{},"./node_modules/cross-fetch/dist/browser-ponyfill.js":function(module,exports){var global="undefined"!=typeof self?self:this,__self__=function(){function F(){this.fetch=!1,this.DOMException=global.DOMException}return F.prototype=global,new F}();!function(self){!function(exports){var support_searchParams="URLSearchParams"in self,support_iterable="Symbol"in self&&"iterator"in Symbol,support_blob="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),support_formData="FormData"in self,support_arrayBuffer="ArrayBuffer"in self;if(support_arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value}}};return support_iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach((function(value,name){this.append(name,value)}),this):Array.isArray(headers)?headers.forEach((function(header){this.append(header[0],header[1])}),this):headers&&Object.getOwnPropertyNames(headers).forEach((function(name){this.append(name,headers[name])}),this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function fileReaderReady(reader){return new Promise((function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}}))}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:support_blob&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:support_formData&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():support_arrayBuffer&&support_blob&&function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}(body)?(this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))?this._bodyArrayBuffer=bufferClone(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support_searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support_blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support_formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value},Headers.prototype.delete=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach((function(value,name){items.push(name)})),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach((function(value){items.push(value)})),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach((function(value,name){items.push([name,value])})),iteratorFor(items)},support_iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(input,options){var body=(options=options||{}).body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"same-origin",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.signal=options.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach((function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}})),form}function Response(bodyInit,options){options||(options={}),this.type="default",this.status=void 0===options.status?200:options.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status,headers:{location:url}})},exports.DOMException=self.DOMException;try{new exports.DOMException}catch(err){exports.DOMException=function(message,name){this.message=message,this.name=name;var error=Error(message);this.stack=error.stack},exports.DOMException.prototype=Object.create(Error.prototype),exports.DOMException.prototype.constructor=exports.DOMException}function fetch(input,init){return new Promise((function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted)return reject(new exports.DOMException("Aborted","AbortError"));var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}xhr.onload=function(){var rawHeaders,headers,options={status:xhr.status,statusText:xhr.statusText,headers:(rawHeaders=xhr.getAllResponseHeaders()||"",headers=new Headers,rawHeaders.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}})),headers)};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.onabort=function(){reject(new exports.DOMException("Aborted","AbortError"))},xhr.open(request.method,request.url,!0),"include"===request.credentials?xhr.withCredentials=!0:"omit"===request.credentials&&(xhr.withCredentials=!1),"responseType"in xhr&&support_blob&&(xhr.responseType="blob"),request.headers.forEach((function(value,name){xhr.setRequestHeader(name,value)})),request.signal&&(request.signal.addEventListener("abort",abortXhr),xhr.onreadystatechange=function(){4===xhr.readyState&&request.signal.removeEventListener("abort",abortXhr)}),xhr.send(void 0===request._bodyInit?null:request._bodyInit)}))}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response),exports.Headers=Headers,exports.Request=Request,exports.Response=Response,exports.fetch=fetch,Object.defineProperty(exports,"__esModule",{value:!0})}({})}(__self__),__self__.fetch.ponyfill=!0,delete __self__.fetch.polyfill;var ctx=__self__;(exports=ctx.fetch).default=ctx.fetch,exports.fetch=ctx.fetch,exports.Headers=ctx.Headers,exports.Request=ctx.Request,exports.Response=ctx.Response,module.exports=exports},"./node_modules/isomorphic-unfetch/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=self.fetch||(self.fetch=__webpack_require__("./node_modules/unfetch/dist/unfetch.module.js").default||__webpack_require__("./node_modules/unfetch/dist/unfetch.module.js"))},"./node_modules/lodash.isequal/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=function overArg(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function objectToString(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsNative(value){return!(!isObject(value)||function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(!function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(key=othIndex,!seen.has(key)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex);var key}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){return function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function getValue(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function mapCacheGet(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function mapCacheHas(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(value){return this.__data__.has(value)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function stackGet(key){return this.__data__.get(key)},Stack.prototype.has=function stackHas(key){return this.__data__.has(key)},Stack.prototype.set=function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:function stubArray(){return[]},getTag=baseGetTag;function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;var isBuffer=nativeIsBuffer||function stubFalse(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function baseUnary(func){return function(value){return func(value)}}(nodeIsTypedArray):function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keys(object){return function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=function isEqual(value,other){return baseIsEqual(value,other)}},"./node_modules/pino/browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const format=__webpack_require__("./node_modules/quick-format-unescaped/index.js");module.exports=pino;const _console=function pfGlobalThisOrFallback(){function defd(o){return void 0!==o&&o}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return defd(self)||defd(window)||defd(this)||{}}}().console||{},stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function asErrValue(err){const obj={type:err.constructor.name,msg:err.message,stack:err.stack};for(const key in err)void 0===obj[key]&&(obj[key]=err[key]);return obj}};function pino(opts){(opts=opts||{}).browser=opts.browser||{};const transmit=opts.browser.transmit;if(transmit&&"function"!=typeof transmit.send)throw Error("pino: transmit option must have a send function");const proto=opts.browser.write||_console;opts.browser.write&&(opts.browser.asObject=!0);const serializers=opts.serializers||{},serialize=function shouldSerialize(serialize,serializers){if(Array.isArray(serialize))return serialize.filter((function(k){return"!stdSerializers.err"!==k}));return!0===serialize&&Object.keys(serializers)}(opts.browser.serialize,serializers);let stdErrSerialize=opts.browser.serialize;Array.isArray(opts.browser.serialize)&&opts.browser.serialize.indexOf("!stdSerializers.err")>-1&&(stdErrSerialize=!1);"function"==typeof proto&&(proto.error=proto.fatal=proto.warn=proto.info=proto.debug=proto.trace=proto),!1===opts.enabled&&(opts.level="silent");const level=opts.level||"info",logger=Object.create(proto);logger.log||(logger.log=noop),Object.defineProperty(logger,"levelVal",{get:function getLevelVal(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(logger,"level",{get:function getLevel(){return this._level},set:function setLevel(level){if("silent"!==level&&!this.levels.values[level])throw Error("unknown level "+level);this._level=level,set(setOpts,logger,"error","log"),set(setOpts,logger,"fatal","error"),set(setOpts,logger,"warn","error"),set(setOpts,logger,"info","log"),set(setOpts,logger,"debug","log"),set(setOpts,logger,"trace","log")}});const setOpts={transmit,serialize,asObject:opts.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:getTimeFunction(opts)};return logger.levels=pino.levels,logger.level=level,logger.setMaxListeners=logger.getMaxListeners=logger.emit=logger.addListener=logger.on=logger.prependListener=logger.once=logger.prependOnceListener=logger.removeListener=logger.removeAllListeners=logger.listeners=logger.listenerCount=logger.eventNames=logger.write=logger.flush=noop,logger.serializers=serializers,logger._serialize=serialize,logger._stdErrSerialize=stdErrSerialize,logger.child=function child(bindings,childOptions){if(!bindings)throw new Error("missing bindings for child Pino");childOptions=childOptions||{},serialize&&bindings.serializers&&(childOptions.serializers=bindings.serializers);const childOptionsSerializers=childOptions.serializers;if(serialize&&childOptionsSerializers){var childSerializers=Object.assign({},serializers,childOptionsSerializers),childSerialize=!0===opts.browser.serialize?Object.keys(childSerializers):serialize;delete bindings.serializers,applySerializers([bindings],childSerialize,childSerializers,this._stdErrSerialize)}function Child(parent){this._childLevel=1+(0|parent._childLevel),this.error=bind(parent,bindings,"error"),this.fatal=bind(parent,bindings,"fatal"),this.warn=bind(parent,bindings,"warn"),this.info=bind(parent,bindings,"info"),this.debug=bind(parent,bindings,"debug"),this.trace=bind(parent,bindings,"trace"),childSerializers&&(this.serializers=childSerializers,this._serialize=childSerialize),transmit&&(this._logEvent=createLogEventShape([].concat(parent._logEvent.bindings,bindings)))}return Child.prototype=this,new Child(this)},transmit&&(logger._logEvent=createLogEventShape()),logger}function set(opts,logger,level,fallback){const proto=Object.getPrototypeOf(logger);logger[level]=logger.levelVal>logger.levels.values[level]?noop:proto[level]?proto[level]:_console[level]||_console[fallback]||noop,function wrap(opts,logger,level){if(!opts.transmit&&logger[level]===noop)return;logger[level]=(write=logger[level],function LOG(){const ts=opts.timestamp(),args=new Array(arguments.length),proto=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_console?_console:this;for(var i=0;i<args.length;i++)args[i]=arguments[i];if(opts.serialize&&!opts.asObject&&applySerializers(args,this._serialize,this.serializers,this._stdErrSerialize),opts.asObject?write.call(proto,function asObject(logger,level,args,ts){logger._serialize&&applySerializers(args,logger._serialize,logger.serializers,logger._stdErrSerialize);const argsCloned=args.slice();let msg=argsCloned[0];const o={};ts&&(o.time=ts),o.level=pino.levels.values[level];let lvl=1+(0|logger._childLevel);if(lvl<1&&(lvl=1),null!==msg&&"object"==typeof msg){for(;lvl--&&"object"==typeof argsCloned[0];)Object.assign(o,argsCloned.shift());msg=argsCloned.length?format(argsCloned.shift(),argsCloned):void 0}else"string"==typeof msg&&(msg=format(argsCloned.shift(),argsCloned));return void 0!==msg&&(o.msg=msg),o}(this,level,args,ts)):write.apply(proto,args),opts.transmit){const transmitLevel=opts.transmit.level||logger.level,transmitValue=pino.levels.values[transmitLevel],methodValue=pino.levels.values[level];if(methodValue<transmitValue)return;!function transmit(logger,opts,args){const send=opts.send,ts=opts.ts,methodLevel=opts.methodLevel,methodValue=opts.methodValue,val=opts.val,bindings=logger._logEvent.bindings;applySerializers(args,logger._serialize||Object.keys(logger.serializers),logger.serializers,void 0===logger._stdErrSerialize||logger._stdErrSerialize),logger._logEvent.ts=ts,logger._logEvent.messages=args.filter((function(arg){return-1===bindings.indexOf(arg)})),logger._logEvent.level.label=methodLevel,logger._logEvent.level.value=methodValue,send(methodLevel,logger._logEvent,val),logger._logEvent=createLogEventShape(bindings)}(this,{ts,methodLevel:level,methodValue,transmitLevel,transmitValue:pino.levels.values[opts.transmit.level||logger.level],send:opts.transmit.send,val:logger.levelVal},args)}});var write}(opts,logger,level)}function applySerializers(args,serialize,serializers,stdErrSerialize){for(const i in args)if(stdErrSerialize&&args[i]instanceof Error)args[i]=pino.stdSerializers.err(args[i]);else if("object"==typeof args[i]&&!Array.isArray(args[i]))for(const k in args[i])serialize&&serialize.indexOf(k)>-1&&k in serializers&&(args[i][k]=serializers[k](args[i][k]))}function bind(parent,bindings,level){return function(){const args=new Array(1+arguments.length);args[0]=bindings;for(var i=1;i<args.length;i++)args[i]=arguments[i-1];return parent[level].apply(this,args)}}function createLogEventShape(bindings){return{ts:0,messages:[],bindings:bindings||[],level:{label:"",value:0}}}function getTimeFunction(opts){return"function"==typeof opts.timestamp?opts.timestamp:!1===opts.timestamp?nullTime:epochTime}function mock(){return{}}function passthrough(a){return a}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers=stdSerializers,pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function unixTime(){return Math.round(Date.now()/1e3)},isoTime:function isoTime(){return new Date(Date.now()).toISOString()}})},"./node_modules/quick-format-unescaped/index.js":module=>{"use strict";function tryStringify(o){try{return JSON.stringify(o)}catch(e){return'"[Circular]"'}}module.exports=function format(f,args,opts){var ss=opts&&opts.stringify||tryStringify;if("object"==typeof f&&null!==f){var len=args.length+1;if(1===len)return f;var objects=new Array(len);objects[0]=ss(f);for(var index=1;index<len;index++)objects[index]=ss(args[index]);return objects.join(" ")}if("string"!=typeof f)return f;var argLen=args.length;if(0===argLen)return f;for(var str="",a=0,lastPos=-1,flen=f&&f.length||0,i=0;i<flen;){if(37===f.charCodeAt(i)&&i+1<flen){switch(lastPos=lastPos>-1?lastPos:0,f.charCodeAt(i+1)){case 100:case 102:if(a>=argLen)break;if(null==args[a])break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=Number(args[a]),lastPos=i+2,i++;break;case 105:if(a>=argLen)break;if(null==args[a])break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=Math.floor(Number(args[a])),lastPos=i+2,i++;break;case 79:case 111:case 106:if(a>=argLen)break;if(void 0===args[a])break;lastPos<i&&(str+=f.slice(lastPos,i));var type=typeof args[a];if("string"===type){str+="'"+args[a]+"'",lastPos=i+2,i++;break}if("function"===type){str+=args[a].name||"<anonymous>",lastPos=i+2,i++;break}str+=ss(args[a]),lastPos=i+2,i++;break;case 115:if(a>=argLen)break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=String(args[a]),lastPos=i+2,i++;break;case 37:lastPos<i&&(str+=f.slice(lastPos,i)),str+="%",lastPos=i+2,i++,a--}++a}++i}if(-1===lastPos)return f;lastPos<flen&&(str+=f.slice(lastPos));return str}},"./node_modules/unfetch/dist/unfetch.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function __WEBPACK_DEFAULT_EXPORT__(e,n){return n=n||{},new Promise((function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+","+t:t})),t(a())},s.onerror=r,s.withCredentials="include"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)}))}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__})}}]);