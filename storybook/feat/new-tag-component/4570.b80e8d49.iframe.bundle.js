"use strict";(self.webpackChunkmatters_web=self.webpackChunkmatters_web||[]).push([[4570],{"./src/views/ArticleDetail/AuthorSidebar/Collection/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>AuthorSidebar_Collection});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react=__webpack_require__("./node_modules/react/index.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),message=__webpack_require__("./node_modules/react-intl/lib/src/components/message.js"),analytics=__webpack_require__("./src/common/utils/analytics.ts"),connections=__webpack_require__("./src/common/utils/connections.ts"),route=__webpack_require__("./src/common/utils/route.ts"),hooks=__webpack_require__("./src/components/GQL/hooks.ts"),GQL_error=__webpack_require__("./src/components/GQL/error.tsx"),Error=__webpack_require__("./src/components/Error/index.tsx"),BackToHome=__webpack_require__("./src/components/Buttons/BackToHome.tsx"),__jsx=react.createElement,Throw404=function Throw404(){return __jsx(Error.j,{type:"not_found"},__jsx(BackToHome.V,null))};Throw404.displayName="Throw404";try{Throw404.displayName="Throw404",Throw404.__docgenInfo={description:"FIXME: SSR should response with HTTP 404 status code",displayName:"Throw404",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Throw404/index.tsx#Throw404"]={docgenInfo:Throw404.__docgenInfo,name:"Throw404",path:"src/components/Throw404/index.tsx#Throw404"})}catch(__react_docgen_typescript_loader_error){}var _templateObject,LinkWrapper=__webpack_require__("./src/components/Interaction/LinkWrapper/index.tsx"),InfiniteScroll=__webpack_require__("./src/components/Interaction/InfiniteScroll/index.tsx"),List=__webpack_require__("./src/components/List/index.tsx"),AuthorSidebar=__webpack_require__("./src/components/ArticleDigest/AuthorSidebar/index.tsx"),Placeholder=__webpack_require__("./src/views/ArticleDetail/AuthorSidebar/Placeholder/index.tsx"),taggedTemplateLiteral=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),lib=__webpack_require__("./node_modules/graphql-tag/lib/index.js"),Sidebar=__webpack_require__("./src/components/ArticleDigest/Sidebar/index.tsx"),AUTHOR_SIDEBAR_COLLECTION=(0,lib.ZP)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n  query AuthorSidebarCollection($id: ID!, $after: String) {\n    node(input: { id: $id }) {\n      id\n      ... on Collection {\n        id\n        title\n        description\n        articles(input: { first: 40, after: $after }) {\n          totalCount\n          pageInfo {\n            endCursor\n            hasNextPage\n          }\n          edges {\n            cursor\n            node {\n              ...ArticleDigestSidebarArticle\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),Sidebar.k.fragments.article),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),styles_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[16].use[2]!./src/views/ArticleDetail/AuthorSidebar/Collection/styles.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(styles_module.Z,options);const Collection_styles_module=styles_module.Z&&styles_module.Z.locals?styles_module.Z.locals:void 0;var Collection_jsx=react.createElement,Collection=function Collection(_ref){var article=_ref.article,collectionId=_ref.collectionId,_usePublicQuery=(0,hooks.GB)(AUTHOR_SIDEBAR_COLLECTION,{variables:{id:collectionId}}),data=_usePublicQuery.data,loading=_usePublicQuery.loading,error=_usePublicQuery.error,fetchMore=_usePublicQuery.fetchMore,collection=null==data?void 0:data.node;if(loading)return Collection_jsx(Placeholder.d3,null);if(error)return Collection_jsx(GQL_error.o,{error});if(!collection||"Collection"!==collection.__typename)return Collection_jsx(Throw404,null);var _ref2=(null==collection?void 0:collection.articles)||{},edges=_ref2.edges,pageInfo=_ref2.pageInfo,loadMore=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return analytics.c.trackEvent("load_more",{type:"article_detail_author_sidebar_collection",location:(null==edges?void 0:edges.length)||0}),_context.next=3,fetchMore({variables:{after:null==pageInfo?void 0:pageInfo.endCursor},updateQuery:function updateQuery(previousResult,_ref4){var fetchMoreResult=_ref4.fetchMoreResult;return(0,connections.k)({oldData:previousResult,newData:fetchMoreResult,path:"node.articles"})}});case 3:case"end":return _context.stop()}}),_callee)})));return function loadMore(){return _ref3.apply(this,arguments)}}(),collectionDetailPath=(0,route.y3)({page:"collectionDetail",userName:(null==article?void 0:article.author.userName)||"",collection:{id:collection.id}});return Collection_jsx("section",{className:Collection_styles_module.container},Collection_jsx(LinkWrapper.g,collectionDetailPath,Collection_jsx("title",null,collection.title)),collection.articles.totalCount>0&&Collection_jsx(LinkWrapper.g,collectionDetailPath,Collection_jsx("section",{className:Collection_styles_module.totalCount},Collection_jsx(message.Z,{defaultMessage:"{totalCount} articles",id:"S15KFb",values:{totalCount:collection.articles.totalCount}}))),Collection_jsx("section",{className:Collection_styles_module.feed},Collection_jsx(InfiniteScroll.v,{hasNextPage:null==pageInfo?void 0:pageInfo.hasNextPage,loadMore,loader:Collection_jsx(Placeholder.qL,null)},Collection_jsx(List.a,{borderPosition:"top"},null==edges?void 0:edges.map((function(_ref5,i){var node=_ref5.node,cursor=_ref5.cursor;return Collection_jsx(List.a.Item,{key:cursor},Collection_jsx(AuthorSidebar.D,{article:node,titleTextSize:14,collectionId,titleColor:node.id===(null==article?void 0:article.id)?"black":"greyDarker",showCover:!1,clickEvent:function clickEvent(){analytics.c.trackEvent("click_feed",{type:"article_detail_author_sidebar_collection",contentType:"article",location:i,id:node.id})}}))}))))))};Collection.displayName="Collection";const AuthorSidebar_Collection=Collection;try{Collection.displayName="Collection",Collection.__docgenInfo={description:"",displayName:"Collection",props:{collectionId:{defaultValue:null,description:"",name:"collectionId",required:!0,type:{name:"string"}},article:{defaultValue:null,description:"",name:"article",required:!0,type:{name:'{ __typename?: "Article" | undefined; id: string; title: string; slug: string; shortHash: string; dataHash: string; mediaHash: string; state: ArticleState; cover?: string | null | undefined; ... 33 more ...; donationsDialog: { ...; }; } | null | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/ArticleDetail/AuthorSidebar/Collection/index.tsx#Collection"]={docgenInfo:Collection.__docgenInfo,name:"Collection",path:"src/views/ArticleDetail/AuthorSidebar/Collection/index.tsx#Collection"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[16].use[2]!./src/views/ArticleDetail/AuthorSidebar/Collection/styles.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".mE36nt0BJX6nPtg5zX8Z {\n  border: 1px solid var(--color-line-grey-light);\n\n  display: flex;\n  flex-direction: column;\n  padding: var(--sp12) 0;\n  border-color: var(--color-grey-hover);\n  border-radius: 0.5rem;\n}\n.mE36nt0BJX6nPtg5zX8Z title {\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    /* autoprefixer: ignore next */\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n\n    -webkit-line-clamp: 2;\n    padding: 0 var(--sp16);\n    margin-bottom: var(--sp8);\n    font-weight: var(--font-medium);\n  }\n.mE36nt0BJX6nPtg5zX8Z .vj3aNvqfi15SdZVVzg08 {\n    padding: 0 var(--sp16);\n    margin-bottom: var(--sp12);\n    font-size: var(--text14);\n    line-height: 1.375rem;\n    color: var(--color-grey);\n  }\n.mE36nt0BJX6nPtg5zX8Z .GnAvfb5xTo7xhHWigmP2 {\n\n    max-height: 18.5rem;\n    padding: 0 var(--sp16);\n    overflow-y: auto;\n    /* Width */\n  }\n.mE36nt0BJX6nPtg5zX8Z .GnAvfb5xTo7xhHWigmP2::-webkit-scrollbar {\n    width: 15px;\n  }\n/* Track */\n.mE36nt0BJX6nPtg5zX8Z .GnAvfb5xTo7xhHWigmP2::-webkit-scrollbar-track {\n    border: solid 6px transparent;\n    box-shadow: inset 0 0 15px 15px transparent;\n  }\n/* Handle */\n.mE36nt0BJX6nPtg5zX8Z .GnAvfb5xTo7xhHWigmP2::-webkit-scrollbar-thumb {\n    min-height: 68px;\n    border: solid 6px transparent;\n    border-radius: 8px;\n    box-shadow: inset 0 0 15px 15px var(--color-grey-light);\n  }\n/* Handle on hover */\n.mE36nt0BJX6nPtg5zX8Z .GnAvfb5xTo7xhHWigmP2::-webkit-scrollbar-thumb:hover {\n    box-shadow: inset 0 0 15px 15px var(--color-grey);\n  }\n","",{version:3,sources:["webpack://./src/views/ArticleDetail/AuthorSidebar/Collection/styles.module.css","webpack://./src/common/styles/mixins.css"],names:[],mappings:"AAAA;ECiGE,8CAA8C;;ED9F9C,aAAa;EACb,sBAAsB;EACtB,sBAAsB;EACtB,qCAAqC;EACrC,qBAAqB;AA0BvB;AAxBE;ICqTA,oBAAoB;IACpB,qBAAqB;IAErB,8BAA8B;IAC9B,4BAA4B;IAC5B,gBAAgB;;IDvTd,qBAAqB;IACrB,sBAAsB;IACtB,yBAAyB;IACzB,+BAA+B;EACjC;AAEA;IACE,sBAAsB;IACtB,0BAA0B;IAC1B,wBAAwB;IACxB,qBAAqB;IACrB,wBAAwB;EAC1B;AAEA;;IAGE,mBAAmB;IACnB,sBAAsB;IACtB,gBAAgB;ICkOlB,UAAU;EDjOV;ACkOA;IACE,WAAW;EACb;AAEA,UAAU;AACV;IACE,6BAA6B;IAC7B,2CAA2C;EAC7C;AAEA,WAAW;AACX;IACE,gBAAgB;IAChB,6BAA6B;IAC7B,kBAAkB;IAClB,uDAAuD;EACzD;AAEA,oBAAoB;AACpB;IACE,iDAAiD;EACnD",sourcesContent:[".container {\n  @mixin border-grey;\n\n  display: flex;\n  flex-direction: column;\n  padding: var(--sp12) 0;\n  border-color: var(--color-grey-hover);\n  border-radius: 0.5rem;\n\n  & title {\n    @mixin line-clamp;\n\n    -webkit-line-clamp: 2;\n    padding: 0 var(--sp16);\n    margin-bottom: var(--sp8);\n    font-weight: var(--font-medium);\n  }\n\n  & .totalCount {\n    padding: 0 var(--sp16);\n    margin-bottom: var(--sp12);\n    font-size: var(--text14);\n    line-height: 1.375rem;\n    color: var(--color-grey);\n  }\n\n  & .feed {\n    @mixin scrollbar-thin;\n\n    max-height: 18.5rem;\n    padding: 0 var(--sp16);\n    overflow-y: auto;\n  }\n}\n","/* Layouts\n   ========================================================================== */\n@define-mixin flex-center-all {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@define-mixin flex-center-space-between {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n@define-mixin flex-center-start {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n@define-mixin flex-center-end {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n@define-mixin flex-start-space-between {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n\n@define-mixin flex-start-center {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n}\n\n@define-mixin flex-start-start {\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n}\n\n@define-mixin flex-end-space-between {\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n}\n\n@define-mixin inline-flex-center-all {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@define-mixin inline-flex-center-start {\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n@define-mixin inline-flex-center-end {\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n@define-mixin inline-flex-start-center {\n  display: inline-flex;\n  align-items: flex-start;\n  justify-content: center;\n}\n\n/* Fonts\n   ========================================================================== */\n@define-mixin font-serif {\n  font-family: var(--font-serif-tc);\n\n  &[lang='zh-Hans'],\n  &[data-lang='zh-Hans'] {\n    font-family: var(--font-serif-sc);\n  }\n}\n\n@define-mixin font-sans {\n  font-family: var(--font-sans-tc);\n\n  &[lang='zh-Hans'],\n  &[data-lang='zh-Hans'] {\n    font-family: var(--font-sans-sc);\n  }\n}\n\n/* Borders\n   ========================================================================== */\n@define-mixin border-grey {\n  border: 1px solid var(--color-line-grey-light);\n}\n\n@define-mixin border-bottom-grey {\n  border-bottom: 1px solid var(--color-line-grey-light);\n}\n\n@define-mixin border-top-grey {\n  border-top: 1px solid var(--color-line-grey-light);\n}\n\n@define-mixin border-left-grey {\n  border-left: 1px solid var(--color-line-grey-light);\n}\n\n@define-mixin border-right-grey {\n  border-right: 1px solid var(--color-line-grey-light);\n}\n\n@define-mixin border-grey-light {\n  border: 1px solid var(--color-grey-light);\n}\n\n@define-mixin border-bottom-grey-light {\n  border-bottom: 1px solid var(--color-grey-light);\n}\n\n@define-mixin border-top-grey-light {\n  border-top: 1px solid var(--color-grey-light);\n}\n\n@define-mixin border-left-grey-light {\n  border-left: 1px solid var(--color-grey-light);\n}\n\n@define-mixin border-right-grey-light {\n  border-right: 1px solid var(--color-grey-light);\n}\n\n@define-mixin shadow-border-bottom-grey {\n  box-shadow: 0 1px 0 0 var(--color-line-grey-light);\n}\n\n@define-mixin shadow-border-top-grey {\n  box-shadow: 0 -1px 0 0 var(--color-line-grey-light);\n}\n\n/* Form\n   ========================================================================== */\n@define-mixin form-input {\n  @mixin transition;\n  @mixin border-grey;\n\n  height: var(--input-height);\n  padding: var(--sp12);\n  font-size: var(--text14);\n  line-height: 1.375rem;\n  color: var(--color-black);\n  background-color: var(--color-white);\n  border-radius: var(--sp8);\n  transition-property: border-color, background-color;\n\n  &:focus,\n  &.focus {\n    border-color: var(--color-grey);\n  }\n\n  &:disabled {\n    color: var(--color-grey-dark);\n    background-color: var(--color-grey-lighter);\n    border-color: transparent;\n  }\n\n  &::placeholder {\n    color: var(--color-grey-dark);\n    opacity: 1; /* Firefox */\n  }\n\n  &.error {\n    border-color: var(--color-negative-red);\n\n    &:focus,\n    &.focus {\n      background-color: transparent;\n      border-color: var(--color-negative-red);\n    }\n  }\n\n  &:-webkit-autofill::first-line {\n    font-size: var(--text16);\n  }\n}\n\n@define-mixin form-input-number {\n  caret-color: var(--color-matters-green);\n\n  /* Chrome, Safari, Edge, Opera */\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    margin: 0;\n    appearance: none;\n  }\n\n  /* Firefox */\n  &[type='number'] {\n    appearance: textfield;\n  }\n}\n\n/* Components\n   ========================================================================== */\n@define-mixin feed-footer-actions {\n  @mixin flex-center-space-between;\n\n  margin-top: var(--sp16);\n  font-size: var(--font-size-subtext);\n  font-weight: var(--font-weight-subtext);\n  line-height: var(--line-height-subtext);\n\n  & .left,\n  & .right {\n    @mixin inline-flex-center-all;\n  }\n\n  & .left {\n    color: var(--color-grey);\n\n    & > * + * {\n      margin-left: var(--sp16);\n    }\n  }\n\n  & .right {\n    color: var(--color-black);\n\n    & > * + * {\n      margin-left: var(--sp16);\n    }\n  }\n}\n\n/* Scrollbar\n   ========================================================================== */\n@define-mixin hide-scrollbar {\n  /* IE 10+ */\n  -ms-overflow-style: none;\n\n  /* Firefox */\n  overflow: -moz-scrollbars-none;\n  scrollbar-width: none;\n\n  /* Chrome & Safari */\n  &::-webkit-scrollbar {\n    display: none;\n    width: 0 !important;\n    height: 0 !important;\n  }\n}\n\n@define-mixin scrollbar-thin {\n  /* Width */\n  &::-webkit-scrollbar {\n    width: 15px;\n  }\n\n  /* Track */\n  &::-webkit-scrollbar-track {\n    border: solid 6px transparent;\n    box-shadow: inset 0 0 15px 15px transparent;\n  }\n\n  /* Handle */\n  &::-webkit-scrollbar-thumb {\n    min-height: 68px;\n    border: solid 6px transparent;\n    border-radius: 8px;\n    box-shadow: inset 0 0 15px 15px var(--color-grey-light);\n  }\n\n  /* Handle on hover */\n  &::-webkit-scrollbar-thumb:hover {\n    box-shadow: inset 0 0 15px 15px var(--color-grey);\n  }\n}\n\n/* Utilities\n   ========================================================================== */\n@define-mixin expand-to-container {\n  position: absolute;\n  inset: 0;\n}\n\n@define-mixin safe-area-botttom {\n  &::after {\n    display: block;\n    padding-bottom: env(safe-area-inset-bottom);\n    content: '';\n  }\n}\n\n@define-mixin object-fit-cover {\n  position: absolute;\n  inset: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n@define-mixin transition {\n  transition-timing-function: ease-in-out;\n  transition-duration: 0.2s;\n}\n\n@define-mixin truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  word-wrap: normal;\n  white-space: nowrap;\n}\n\n@define-mixin line-clamp {\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n\n  /* autoprefixer: ignore next */\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* FIXME: fix cropped descenders of letters  */\n@define-mixin fix-cropped-letters {\n  padding-bottom: 0.12em;\n  margin-bottom: -0.12rem;\n}\n\n@define-mixin polka-dot-background {\n  background:\n    linear-gradient(90deg, var(--color-white) 2px, transparent 1%) center,\n    linear-gradient(var(--color-white) 2px, transparent 1%) center,\n    var(--color-grey-light);\n  background-repeat: repeat;\n  background-position: -2px -1px;\n  background-size: 3px 3px;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={container:"mE36nt0BJX6nPtg5zX8Z",totalCount:"vj3aNvqfi15SdZVVzg08",feed:"GnAvfb5xTo7xhHWigmP2"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);