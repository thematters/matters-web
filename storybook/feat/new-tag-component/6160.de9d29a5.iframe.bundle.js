"use strict";(self.webpackChunkmatters_web=self.webpackChunkmatters_web||[]).push([[6160],{"./src/views/User/UserProfile/DropdownActions/ToggleRestrictUser/Dialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _templateObject,_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__),graphql_tag__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/graphql-tag/lib/index.js"),react_intl__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-intl/lib/src/components/message.js"),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Hook/useDialogSwitch.ts"),_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/GQL/hooks.ts"),_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Toast/index.tsx"),_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Dialog/index.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,TOGGLE_RESTRICT_USER=(0,graphql_tag__WEBPACK_IMPORTED_MODULE_2__.ZP)(_templateObject||(_templateObject=(0,_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_3__.Z)(["\n  mutation ToggleRestrictUser(\n    $id: ID!\n    $restrictions: [UserRestrictionType!]!\n  ) {\n    putRestrictedUsers(input: { ids: [$id], restrictions: $restrictions }) {\n      id\n      oss {\n        restrictions {\n          type\n        }\n      }\n    }\n  }\n"])));const __WEBPACK_DEFAULT_EXPORT__=function ToggleRestrictUserDialog(_ref){var id=_ref.id,userName=_ref.userName,children=_ref.children,_useDialogSwitch=(0,_components__WEBPACK_IMPORTED_MODULE_4__.U)(!1),show=_useDialogSwitch.show,openDialog=_useDialogSwitch.openDialog,closeDialog=_useDialogSwitch.closeDialog,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),enabled=_useState[0],setEnabled=_useState[1],_useMutation=(0,_components__WEBPACK_IMPORTED_MODULE_5__.Db)(TOGGLE_RESTRICT_USER),_useMutation2=(0,_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useMutation,2),toggleRestrictUser=_useMutation2[0],loading=_useMutation2[1].loading,onToggle=function(){var _ref3=(0,_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__.Z)(_home_runner_work_matters_web_matters_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee(){return _home_runner_work_matters_web_matters_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,toggleRestrictUser({variables:{id,restrictions:enabled?[]:["articleHottest","articleNewest"]}});case 2:_components__WEBPACK_IMPORTED_MODULE_8__.A.success({message:"設置成功"}),closeDialog();case 4:case"end":return _context.stop()}}),_callee)})));return function onToggle(){return _ref3.apply(this,arguments)}}();return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children({openDialog:function openDialogWithProps(_ref2){var enabled=_ref2.enabled;setEnabled(enabled),openDialog()}}),__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V,{isOpen:show,onDismiss:closeDialog},__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V.Header,{title:__jsx("span",null,enabled?"放出小黑屋":"關小黑屋")}),__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V.Content,null,__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V.Content.Message,null,__jsx("p",{dangerouslySetInnerHTML:{__html:'確認要将「<span class="u-highlight">'.concat(userName,enabled?"</span>」從小黑屋中放出嗎？":"</span>」關進小黑屋嗎？")}}))),__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V.Footer,{closeDialog,btns:__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V.RoundedButton,{text:__jsx(react_intl__WEBPACK_IMPORTED_MODULE_10__.Z,{defaultMessage:"Confirm",id:"N2IrpM"}),color:"green",onClick:onToggle,loading}),smUpBtns:__jsx(_components__WEBPACK_IMPORTED_MODULE_9__.V.TextButton,{text:__jsx(react_intl__WEBPACK_IMPORTED_MODULE_10__.Z,{defaultMessage:"Confirm",id:"N2IrpM"}),color:"green",onClick:onToggle,loading})})))};try{Dialog.displayName="Dialog",Dialog.__docgenInfo={description:"",displayName:"Dialog",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},userName:{defaultValue:null,description:"",name:"userName",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/views/User/UserProfile/DropdownActions/ToggleRestrictUser/Dialog.tsx#Dialog"]={docgenInfo:Dialog.__docgenInfo,name:"Dialog",path:"src/views/User/UserProfile/DropdownActions/ToggleRestrictUser/Dialog.tsx#Dialog"})}catch(__react_docgen_typescript_loader_error){}}}]);